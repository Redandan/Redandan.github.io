const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/features.DxhJ0e1F.js","assets/react-vendor.C14am9Lm.js","assets/embedded-wallet.CpHe6kS-.js","assets/if-defined.DUgTVufX.js","assets/HelpersUtil.DVqAsSqq.js","assets/index._7FJpGjb.js","assets/index.DJDTCYGR.js","assets/ref.DSvrVCzr.js","assets/index.CzAliMZE.js","assets/index.DQPeU5W3.js","assets/index.BpUr87FP.js","assets/index.BU6uGwo7.js","assets/index.DjpreEK4.js","assets/index.DViLvMu2.js","assets/index.d97TINW0.js","assets/email.B49-IXQe.js","assets/index.DNVwV5qb.js","assets/index.CXduJ7ww.js","assets/socials.BQd_FBL3.js","assets/index.DQeFK_I4.js","assets/ConstantsUtil.Dmg8YACJ.js","assets/index.CA2lAN4o.js","assets/index.CkQhu_g1.js","assets/index.C4eRbkL6.js","assets/index.BKhG0gzr.js","assets/swaps.Bv88dV82.js","assets/index.BkVRzANE.js","assets/index.Ej2eRnFe.js","assets/index.B_vpYwNX.js","assets/send.ClRjJDht.js","assets/index.Bfi7yiFh.js","assets/index.DZfBJsPf.js","assets/receive.B8_5WS30.js","assets/index.j5sz28bF.js","assets/onramp.Bsgct7Ao.js","assets/index.BJM0MMMg.js","assets/index.Cz3JBKEj.js","assets/pay-with-exchange.C27Ym_Tv.js","assets/transactions.Cintf43b.js","assets/index.uVSJk_T6.js","assets/index.B4AUE3nC.js","assets/index.DgXD_3hV.js","assets/data-capture.CTto1Q7A.js","assets/index.1nQBZETm.js","assets/index.DKMsBeuO.js","assets/w3m-modal.DXrq2D2l.js"])))=>i.map(i=>d[i]);
var dI=Object.defineProperty;var hI=(t,e,n)=>e in t?dI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bi=(t,e,n)=>hI(t,typeof e!="symbol"?e+"":e,n);import{g as Xr,r as Se,R as kt,a as fI,c as Mn,b as Vv}from"./react-vendor.C14am9Lm.js";var Gv={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new s(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,C,E;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,f),!0;case 5:return y.fn.call(y.context,u,d,f,h),!0;case 6:return y.fn.call(y.context,u,d,f,h,p),!0}for(E=1,C=new Array(b-1);E<b;E++)C[E-1]=arguments[E];y.fn.apply(y.context,C)}else{var S=y.length,O;for(E=0;E<S;E++)switch(y[E].once&&this.removeListener(l,y[E].fn,void 0,!0),b){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,u);break;case 3:y[E].fn.call(y[E].context,u,d);break;case 4:y[E].fn.call(y[E].context,u,d,f);break;default:if(!C)for(O=1,C=new Array(b-1);O<b;O++)C[O-1]=arguments[O];y[E].fn.apply(y[E].context,C)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,y=[],b=p.length;g<b;g++)(p[g].fn!==u||f&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[h]=y.length===1?y[0]:y:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Gv);var pI=Gv.exports;const gI=Xr(pI);var _e;(function(t){t.Loading="Loading",t.NotFound="NotFound",t.Found="Found"})(_e||(_e={}));var K;(function(t){t.Loading="Loading",t.NotFound="NotFound",t.Disconnect="Disconnected",t.Connected="Connected"})(K||(K={}));class mi extends gI{get connected(){return this.state===K.Connected}disconnect(){return console.info("The current adapter doesn't support disconnect by DApp."),Promise.resolve()}multiSign(...e){return Promise.reject("The current wallet doesn't support multiSign.")}switchChain(e){return Promise.reject("The current wallet doesn't support switch chain.")}}class pr extends Error{constructor(e,n){super(e),this.error=n}}class gn extends pr{constructor(){super(...arguments),this.name="WalletNotFoundError",this.message="The wallet is not found."}}class Ah extends pr{constructor(){super(...arguments),this.name="WalletNotSelectedError",this.message="No wallet is selected. Please select a wallet."}}class nt extends pr{constructor(){super(...arguments),this.name="WalletDisconnectedError",this.message="The wallet is disconnected. Please connect first."}}class St extends pr{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Kv extends pr{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class zt extends pr{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class ze extends pr{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class mI extends pr{constructor(){super(...arguments),this.name="WalletWindowClosedError",this.message="The QR window is closed."}}class Km extends pr{constructor(){super(...arguments),this.name="WalletSwitchChainError"}}class Aa extends pr{constructor(){super(...arguments),this.name="WalletGetNetworkError"}}var Jo;(function(t){t.Mainnet="Mainnet",t.Shasta="Shasta",t.Nile="Nile",t.Unknown="Unknown"})(Jo||(Jo={}));var Xf;(function(t){t.Mainnet="Mainnet",t.Shasta="Shasta",t.Nile="Nile"})(Xf||(Xf={}));const Ch="TIP6963:announceProvider",wI="TIP6963:requestProvider";function wt(){return typeof window<"u"&&typeof document<"u"&&typeof navigator<"u"}function Bt(){return typeof navigator<"u"&&navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i)}function yI(t,e){const[n,r]=Se.useState(()=>{try{const i=localStorage.getItem(t);if(i)return JSON.parse(i)}catch(i){wt()&&console.error(i)}return e}),s=Se.useRef(!0);return Se.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}catch(i){wt()&&console.error(i)}},[n,t]),[n,r]}function ei(){console.error(`
You are using WalletContext without provide the WalletContext.Provider.
Please wrap your sub-components with a WalletProvider and provide required values.
`)}const Ud={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(t){ei()},connect(){return ei(),Promise.reject()},disconnect(){return ei(),Promise.reject()},signTransaction(t){return ei(),Promise.reject()},signMessage(t){return ei(),Promise.reject()}};Object.defineProperty(Ud,"wallets",{get(){return ei(),[]}});Object.defineProperty(Ud,"wallet",{get(){return ei(),null}});Object.defineProperty(Ud,"address",{get(){return ei(),null}});const Yv=Se.createContext(Ud);function Qv(){return Se.useContext(Yv)}var bI=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function ep(){return!!(window.tron&&window.tron.isTronLink)}function Zv(){return!!(ep()||window.tronLink||window.tronWeb)}function vI(){return wt()&&typeof window.iTron<"u"}function EI({dappIcon:t,dappName:e}={dappIcon:"",dappName:""}){if(!Zv()&&Bt()&&!vI()){let n="",r="";try{n=document.title;const u=document.querySelector('link[rel*="icon"]');u&&(r=new URL(u.getAttribute("href")||"",location.href).toString())}catch{}const{origin:s,pathname:i,search:o,hash:a}=window.location,c=s+i+o+(a.includes("?")?a:`${a}?_=1`),l={action:"open",actionId:Date.now()+"",callbackUrl:"http://someurl.com",dappIcon:t||r,dappName:e||n,url:c,protocol:"TronLink",version:"1.0",chainId:"0x2b6653dc"};return window.location.href=`tronlinkoutside://pull.activity?param=${encodeURIComponent(JSON.stringify(l))}`,!0}return!1}function _I(t){return bI(this,void 0,void 0,function*(){return new Promise((e,n)=>{const r=setInterval(()=>{t.tronWeb&&(clearInterval(r),clearTimeout(s),e())},50),s=setTimeout(()=>{clearInterval(r),n("`window.tron.tronweb` is not ready.")},2e3)})})}var hs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const AI={"0x2b6653dc":Jo.Mainnet,"0x94a9059e":Jo.Shasta,"0xcd8690dc":Jo.Nile};function Ca(t){return hs(this,void 0,void 0,function*(){var e,n,r;const{blockID:s=""}=yield t.trx.getBlockByNumber(0),i=`0x${s.slice(-8)}`;return{networkType:AI[i]||Jo.Unknown,chainId:i,fullNode:((e=t.fullNode)===null||e===void 0?void 0:e.host)||"",solidityNode:((n=t.solidityNode)===null||n===void 0?void 0:n.host)||"",eventServer:((r=t.eventServer)===null||r===void 0?void 0:r.host)||""}})}const CI="TronLink";class II extends mi{constructor(e={}){super(),this.name=CI,this.url="https://www.tronlink.org/",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF0AAABdCAYAAADHcWrDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAABdoAMABAAAAAEAAABdAAAAAMkTBfIAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Chle4QcAABZhSURBVHgB7V0JlBTVuf6runtWllkA2QeYQQRBZHNFxZjw4jFqMEFxCWIS1yOaTeJ76nk5Lyc5CUZNfCoa0BgUxRh3QD2CJs8lELaIgOCw78sszN4z0131vu/W1NDTfbtneqa7Zx5v/nN6prrq1q2q77//ev9bbUgcNHjm/sya7PIiIxA43TCNUbYEcw3bsOLo4v98U9sWAxSwbbvYI7LDCDZ+dezl847G82BGWxrnzVl/nmF5bhCxviG2FBoen0+Ep9ptOf0UbOPAZlsNhOCYmOYawzaXirfynZLnpla19sAxQc+5ac14jyf9IbHsqw1vute2GoF78P8x2Bo4DVMME2OQqAQDW8W2flv64oQXMCijjsiooOfP3jAXvf0SHfa2A/XsUnXc/ScGAgAfqgfgB18zGqvvKVk69ZCudSTot63z5fvNRw0z7W7bCpB9uvO698VAwPBmAraGzXbQuq5sycSt4U3NljtsA4D/wfBk3I2TugFvCU6bv9mBOigJ71jTY7zd++Z1heEntgA976b1P8YIv9MO+NGuW52EgxXPdzsIlexJK/Ra5uK+d23pEXpuM+h9blo30TS9/6WMZTfgoRi1e5uD1/BmXGBV1j0Y2okD+i9smGDjV2L6smF9Q493b3cQATXiTc/c3BvXjXO7UqD32bn2Itv0TlcN3CPd/xODAAax4UnP8pjmvW6HCnTbNm+B4sd2tx53gUnkfw5mW6wZUOED2K+ZM2djDoLLy+wgAp9uSg4CarRn5Ikpl/ICpinWGfBvBnXr8uTg3dwrIlfkbS5yQLdkPNxEBEndqqUZoGRsqCDTHK1At2yZZnd7LMmAuUWfDsZ236LLV6SbGPXZ3aO8BT7J/OLx98iBSre79UoyUW7RN3Jh/O4ERy2OdH9JNgLdoCcbYU3/3aBrQEn2rm7Qk42wpn+vZl/cuzgTUtvgJMo8piEesNLE/8gZkri7PiVP6DDojUFb5s0YIIPz02TDzhr58oBf9hyrl9KqgGIEZq/ABEOY2UEFQTcjMIw6DHoAoO891iAPfHeg3HxpH4a6cryyUXYfrZdNe+tk055aMKJO9h5vUIyog0ScZASYQGackuM5+kN1GPR0nykrN1XIobIGGZiXpgDt19sn/Jx7ujNhgqhXjlU4jPhiby0YUdfEiHopg0TUNbKYxJUIgwmhU5o6DDo0hhw90Sjvb6yQWy7rqwWLbfrn+NTn/FEnGcHzdh7xyxeQCDKDqmlficOI+iZGeHGyxwNGnELi0GHQiTIBeWNNucz5Wl81YrXIh+3kOQNyfeozdXRPdTQIkThWEZAdh/1QTY5EbD9YB0Y0SFl1QBpOEUYkBPQ0WMm1xTVCgM4YnBkGb9u/0uC6jLhojMMI2gxKxI4j9UoaaCO2HfTLfjCinIwIOKrJC2ng+WRmV6eEgE59XFEblHfWnugQ6DqwCOYgeEb8XHLmSUYcLm+U4kNQTfsc1bTdZURNQBq7OCMSAjrB8gGcd9adkHuv7C9p3uQONzJiSJ809fnaWb0Ur+i6HgEjviIjqJrwISMOQCJO1ASFxykFtA+dLREJBX0zRt16+OqusdSN3GTtI9NdRlzWxAiqHkrEV4coDScl4kCpwwiqrs5gRMJAp7Ptr7fkzdXlnQK6jpmUuIK+aerzjfG9VRN6RXRvt0MiNkMayAxKBxlBFekywrURVJ2JpsSBjjvjQ77/rwp5YOZA6ZWF6u02Ui2YRXvQI9OUcUOz4O/7hA+dDEr3GTL8tHT1+eYElxGWHCxrVOqIqsllxEEyoi4owSaJSBQjEgo6b2oXItGPv6ySKybltBmzrHRTRgCIW5/ardTBqEEZws+4giwZOzRTRg7IkP5wL6lCkkEM8Hh9fi6f6DDCj8iZo9+RCETWYAYN90FISWWtJXRvGcSpOAI6Kh6JMPJnr38LtV9XCSt0E0AM82dNzZdn7x4ed29MFcx5fJd8AqZRaphS4P/cHl6lr88AI84a1sSIgRlyGgIuPnSqiM9GV5UGevM+RyJcRlTVtcIIE+PbDmzLrKufmHDQLSQb83p65ONfj1E+d7yAlFQG1IhnhEsJIDGNQBEPYMNlRB4YMRT6mnHBuIJMSESWnE5G9PaqDGe8121ve6pGMmIbYhSqJTKj+FC9shvVfqgm4KEkwusTjxHcluVPAui8eY6IBbcPk9lIgLWHqv2WzF24R175pEwyAbxuLIczgrqajCjomw5GQCKgms6EaiqCako1I2pw/4yiGSwqGwGvrvhIQI6W1W3zVPsTP9IJcn2jJV+Ht/D6/SO1gG3YVQs9nS49M6MbW7p7//7Cfnnm/WNCndsWnUkpozRQ31IiyIj8ng4jRkMixg/LBCOypLB/uvRFQi6FmkmofpB53bNkU81ZCTWk7qhmWmDNV9XK8FDkw6myNiB3PH1YnoI09I7i5VCX/27OUKXP579xWHkzrYFEMU5TjU7KBrOYzOesxv2QERlppmLEMKim0UOomhwb4TLi5Jnhd92x7z3hmcE58BTu8FO7J544KhkF0g386dX9Iy5wwRk9Zd6f98u1D++QxfeOUAYxohF2sJ8H4X7m9fDIgy8dVCOY0WQ8xBks4Mze1GnAXUqR72c+57Pt1WofJalPL68M65cuY5ptRCa8mQxIROIgYgxA8mSNv/16zCSMSnQtI7unSN14cb4Ku9XVmv4QuEr4vwveOyb/RKLskrG91IgObRO6PWVkDxXgrNxUqRJcBLK9xDO5GIv3QBdUuaHYWQOjR4O4DhH1uxsqlD1Z+kmpLENqYyPUISNbgkYpdg18vPeAnFDlF/vqFySOjWF34IN6oCXfsLtGzgVo4fStybny6NtHZO2OGvnub4vlT/eMgM7NCm/W/H3WRfmSA0N5x4LdSPMGlSvZfLCDG2QEmcC53VCJ4MQLwf5kK5aGolEmRKavKxFQTXRfx8FYD4N/TyPeVkraSOeD0J3KyfLCqDpJqdCbooH7eGu1mk8liO/CRTx7eJbyPkLbhW7TE+Fs1EdfVCKtG0xa1Mpr8v5NVyIwgCgRjvQG1dQjJXTF+hNKIuhlrYB0fL67Vo6CUXQTacTJpFAKBqVy0z7/gqSBzotRJxPQG6BiqDdDicfq4aFQfGncqG64TcOrM77uuUxqXQp1xKiXWcVkpQvc64X+1zICnKjCve/GPDGdBz4D1dJfwAgOJOb/jyH2AAvBNKuy5EjjgoQHR6E3yW26fq/8rKg5vA49fhj5jqn/sVUxhqLt6sxHbhki35sW28ffe7xebvnv3bIGxpC+fFciekkW/gSwBFelC8Ct7Kx0yc+2vyrq0zgh6XfLi76xpkyLyQAktqZh1DYEII8gjtpGyOY9i/bJH5bFfscBgyAyczqSVlRjXYkoxbQRVDE0upRkDqhD5Y3Wxi0NWFWXZKK//dEXVcpF011qxnm5CI8puA7xZvn1wSUH5BdLD6oR4x4L/0+jRpfzuql5qsaGOrerEp/JVYVJB50gMn+98vMKLR4XYy50BCJERpIu4RTlnTz85mH50bP7xI8INxoxqn3mzuFyx7/1k3qkHyjaXZ2SDjoBIJdfX3NCCwjz7tPP7q1m+kPB4jm0/os+OC63Prkb6dTo7yigND2C6PX+7wxU03Ih/AvtstO3OXd74ABNagqIAcVqGDzWuOhoxrm5Su/pBil14mv/KJcbH9sZVUWxT6WSEL3+5nuD8c3Jv+iu1Vn7mI+aMDw77aNFRU44kOwbobpguQTdKR1NKspWkxVumBzehsB/iGiUaQNOksSiuy4/TZ68bZhyUaP1F+v8ZByjoZ8Fu/PKzwp9PTP6pgZ0PgiNyNvIxeiAoHr41uQcVToR7aHpFq7fheh1frHyfaO14/7rEb0+P3eE9M72KJc1VttkHqN9YZr7tun95KnbhkpOthfPUJ4a9cIHY1qAgcK/ELXp6MopOSrjGMsQZiDA4kzNTIx4zi7Fom9i2m3pT4tkENxSTkanmmhX6AqzovnR7w9FROvEIbyPlOh0XggaRvnTb6L8TkejBmXKlJHZrY5MRraMRG94dGdUdeX2z1KQV+eNFE7zcc4zVeTk82351U1D5D+vGxSRt08Z6HxgqpH3EBozoxdO1Ps0qIzkWiNKDb2ZHzyxW174W0nM5pzY/uvPi+QcJN0o6skmqk/maR7/YYHcc8Vp2sulFHTqdaqHT7c5eezwO6LryMlmzgC1RuyLKYZ7Fu2Vx9sSvd5XKNMxm5XM6JUuIeOGZ+8eETONkVLQCSSDIFb46oj1igyW3LSArk3oProBzI2fjF5Dj7bc7tvLJ4t/1BS9wptoXZ5ant/aNw6AfjleWfLjQqF9ikUpB50qhu4fc9U6mnFenvK5dcd0+6iWqG6c6HWvmp/VteM+Fb3ekfjolREzC5heva9ILm4qctXdgw+5GFLKQWdagEU8qwC8jliZywcITQvo2oXuC41ef9ha9IoHf+SWofLzaxITvdJOcPLltXlFmA/Aiv8Y9MHnlf4nH14bSDnovCeC9AZqHnWUA99alxbQtQ3fF0/0+tC1jF6HqC7obbSHaB+oDukhcYIlFj31fqnM/v3O4KaqCqtTQGda4B9IC+yKkhb4NtMCcA3bA4WKXjGz1LbotZ88cWuBpON+dEFbLBAJOHX3Sz8plIEo+YtGfIZf//UQykkOqGnowYMHp1698Oaoh7nkcfl6feZxCtICY4ZkxA2E++BMlLFkm3OvDMhiEWe1nsf8bFujV4JYB8A5yfInRL0s+YtGarnn8/sV6PS2zKYyn04Z6bxJJy1QrgWWAdAVraQFoj2ou58TB8WH69scvb78E0avaTENMUMIJq7mwv9+8raCmFUBrPK68+k98uR7RyUd90KV6lKngU6PgykB1v/p6Kopuarcug2xku50tY8zN270ujxKss09+YIzGL0WoSAoUxtEudVjD84cJL+ZPaR5QsI9P/Q/C5xYCPvS/5RKFgEPPYjtTgOdN8LREC0twDK4yYWtpwXCnifiqxu9fv+JXfLi31uPXumFsGQkNHqloeVInQ+w779GvXAu4jruDnpmsx7ZKcs3nIgqCZ0GOm+SPvsK3JwuSmSJHA1qsCNDvQkJN3qdu7AN0SuqvJCCFa7c4H1RL9OoL7hjmNyO2alYxBLqmfN3IOKuUiOcbWkDLDCNwVPz+xOSVeEV6+bcY6zUYmn0+SizY0F+OLHIk6UM/qb1o+HH4/nOGham3eArKwAuHtOrhZ4N7Ss7w6Nsyh6UVVA9PYew/upzckObRGzTcDMJxwXIzL0Q5AA+XFiWhxqfsQXZMu3MHhWXFHj+GN30RnSbnB0cSfTZv960OCv0KqxxoR/8+uoyNbMUeqw92/SaKF2MXjmpMv/moWrGXtcXo9enMbqpLmLV4fDc5Sg6cqcUaYwL+qE4VdVEOuXaHFDMKUFo0579sNzT6aC7aQGOeBZxhtOM83OjlnCEt23Ldw54ejYLMffKQih6IdHWR9Hnbw1wLiT+++YqFLoOUhVqnGQ/DRIa6q2491UDdUWKfEq3RYr+My2wv7RePmRAc2FexFWnIS1QAD17EMWdFNVEEHtxotcyrKgLyMK7hketHG7tekWos59/sxPZttbWPd6phtS9CVqbaGkBBh80aizBSzQR+FXQ8df+bgfK4mLPvUa7dnvWPHUJ0NPgHdDiR3twTm6kwedOPOwo8+DcKyqHv8PoFSvoUkFdAnQaOOr0d2GQdHQOpvFYrB9vfkTXl26fil6xOIvuXmtzr7rz27rPrbnsEqDzppFzkrf+iWoBTcaPoHBdKmdmkkWMXlmLfj3cvk9bmfSO5x6YNuDrtT74vFp+/86RhpWfHg52uiF1H8AH1DeixGIz0gKsUw+nq87JkceXH1WjXecZhLdvz3d6UiVNr8K6sOkdNPH0Q4BRJKqmJJne4Mo6Lv51Vl6jODbQ2JhvNXYd0AkklzK+vbZcC/oYrHyYWJiFUVitfO14wIinLdO8g/tEBmrhfbC6gKunnYW8dbJlP94xAPeR+yo0b93web0ImiDOSDV5YZ26zCvkONKWr6uQ+64eEFFzTtfy24gK6ROzXTKIGQdmBHXxAq/H1Rer8L4yBTBG8CHU17MqgbaGdsl9rQnzPfxEI6TA7MSsT492hTj2M0fCBa+ri/XVApdPzFEvZNOo/TiuEr0pLUY2vBkuzdERl1Y+gBJuvumDo5q5GQ4Aup60Owz/CX4Msr3Z9bZpW57PDDe7HqN1qg65aQHd9bgs/UKkYNtaLaDrI9Y+JqZyUfrGFEA48VhpVaP0RF6GAKtJidgAt+jC4LsQxa7Y8/y0euSBrA34obsWDTrzC0cOly4yJ60jLiKI41l1XUTdRwlicoqjPZyqMaqZNmhlJIefdvI7QbfNYiTdbNMTSNuCtzOUqrdSnmzSaVvU3fvwNowPN+urBS4d1wtvxEhXa3kSfZMczXyPgM474gt4KvB+ML5Ftb1kiPUZzzWPvTzuKK7yqfvzju3tMLHnOZlHXZ/Ut1wimYyiUI50ZgN1pF5ji9HeLsjBRfzsTq0R9Kxi30qO8GuCLzjpdt3lUr+P1QKMDLmCTkcqLRDDO9Cd09Z9fEWhjo6jOIr5H50U6NqH7jM8aYDXXnX8pQlQL02g9/L1WQZObFQHQ1t30jYl+DheosDl4jriAl6++YhGN5FEQJkP1xEnM9qXhsAotwKWYdiPuf2qkb7n+eF+6PmH8LvJSPi2S4Dc/hL2n7r9LdQ86gqB6KJ1tFpAd6N0+aKpF/rk7Zk5xA8G4rzAKyWLJ3/kXrPZTJf8efJysRueMXyxK5XcE5P9n17MBqQFGIjoiNUCPTJQkJSgwa4CI2Q7+WJmHTEvE7dqwS/x2kH/Pgn65oX22Qw6d5p1mfPwc46r+MuxnU18QL5F4x0kwXQ0Fq+QmjAC1QIJUjHkXTaYyFdh6ehweUN8oKu3uliVhhW8uWzJ+AOhfbYA/firZ1Y3NFqzwJ0PDS+TTp2rahhKc/4xtBzCvXlOHnCymO/2SgTRXeQLf3RTdzx2HKnn0EXGMa9Jwyn2CSMYuKHkxSl/C2/bAnQerHp5cgl+6niGHax7Tsitpl8KDz8xFd8Z9fGF93x5so4un9Rb5Uno6nWU2AdfH5KVHjnSObdZjmBNBZWxLoQGSkvYwS3A8IqSF6GyNRQBOtuULTmvsnTxxB9YVuB6VG1sxW9O4zc1wb24lZrminHsopzRH482lTccc6eszEpEWoDLbmhEdbEPk1p8U5NTxqF5AAxORyUbVWI1PNbQEJhW9uI5n2laql36zE5T6/IXJi7Nu3H1CsO0r4OmmY2M5CT8oGmmw3IMjURZsWh3h/3pGbas3OKXE5hJy4lMs8s1WESwbAMOejwdUoaIVaR/nt6JKK1GoVAQDEF61lG4+Ks2GPRgQbId3InZl7cxQBeWLJ70ZYzHUYdigs4WHPX4txA9L8qfs34UfM7J2B6NFVmDxLB6i92q0KkLtfcPhX0vSqq3H6geC/98RHg/VwL0MW8e/hjvVy/Xim34CVG+21h+ePawjAk4HDG1byFN4q+r/dQH74aaDGOtFvnw4wC+2BJzo8db/XnJc1Njr7EMua7DuJAdXXXTrq8fI2lpUyPvz8LSjjXLjCEXHIw8Ft8eu65sqmTkjok4K+AvNnyZH0Xsb+eO/wWrg46Do/7gYAAAAABJRU5ErkJggg==",this._readyState=wt()?_e.Loading:_e.NotFound,this._state=K.Loading,this._supportNewTronProtocol=!1,this._tronLinkMessageHandler=a=>{var c,l,u,d,f;const h=(c=a.data)===null||c===void 0?void 0:c.message;if(h)if(h.action==="accountsChanged")setTimeout(()=>{var p;const g=this.address||"";if(!((p=this._wallet)===null||p===void 0)&&p.ready){const y=h.data.address;this.setAddress(y),this.setState(K.Connected)}else this.setAddress(null),this.setState(K.Disconnect);this.emit("accountsChanged",this.address||"",g),!g&&this.address?this.emit("connect",this.address):g&&!this.address&&this.emit("disconnect")},200);else if(h.action==="setNode")this.emit("chainChanged",{chainId:((u=(l=h.data)===null||l===void 0?void 0:l.node)===null||u===void 0?void 0:u.chainId)||""});else if(h.action==="connect"){const p=((f=(d=this._wallet.tronWeb)===null||d===void 0?void 0:d.defaultAddress)===null||f===void 0?void 0:f.base58)||"";this.setAddress(p),this.setState(K.Connected),this.emit("connect",p)}else h.action==="disconnect"&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))},this._onChainChanged=a=>{this.emit("chainChanged",a)},this._onAccountsChanged=()=>{var a,c,l;const u=this.address||"",d=((a=this._wallet)===null||a===void 0?void 0:a.tronWeb)&&((l=(c=this._wallet)===null||c===void 0?void 0:c.tronWeb.defaultAddress)===null||l===void 0?void 0:l.base58)||"";if(!d)this.setAddress(null),this.setState(K.Disconnect);else{const f=d;this.setAddress(f),this.setState(K.Connected)}this.emit("accountsChanged",this.address||"",u),!u&&this.address?this.emit("connect",this.address):u&&!this.address&&this.emit("disconnect")},this._checkPromise=null,this._updateWallet=()=>{var a,c,l,u,d,f,h,p,g;let y=this.state,b=this.address;if(Bt())window.tronLink?this._wallet=window.tronLink:this._wallet={ready:!!(!((a=window.tronWeb)===null||a===void 0)&&a.defaultAddress),tronWeb:window.tronWeb,request:()=>Promise.resolve(!0)},b=((l=(c=this._wallet.tronWeb)===null||c===void 0?void 0:c.defaultAddress)===null||l===void 0?void 0:l.base58)||null,y=b?K.Connected:K.Disconnect;else if(window.tron&&window.tron.isTronLink){this._supportNewTronProtocol=!0,this._wallet=window.tron,this._listenTronEvent();try{b=((u=this._wallet)===null||u===void 0?void 0:u.tronWeb)&&((f=(d=this._wallet.tronWeb)===null||d===void 0?void 0:d.defaultAddress)===null||f===void 0?void 0:f.base58)||null,y=b?K.Connected:K.Disconnect}catch(C){console.error("Unknow error: "+C," Please install TronLink extension wallet."),b=null,y=K.Disconnect,this._readyState=_e.NotFound,this.emit("readyStateChanged",this.readyState);return}}else window.tronLink?(this._wallet=window.tronLink,this._listenTronLinkEvent(),b=((p=(h=this._wallet.tronWeb)===null||h===void 0?void 0:h.defaultAddress)===null||p===void 0?void 0:p.base58)||null,y=this._wallet.ready?K.Connected:K.Disconnect):window.tronWeb?(this._wallet={ready:window.tronWeb.ready,tronWeb:window.tronWeb,request:()=>Promise.resolve(!0)},b=((g=this._wallet.tronWeb.defaultAddress)===null||g===void 0?void 0:g.base58)||null,y=this._wallet.ready?K.Connected:K.Disconnect):(this._wallet=null,b=null,y=K.NotFound);Bt()&&y===K.Disconnect&&this.checkForWalletReadyForApp(),this.setAddress(b),this.setState(y)},this.checkReadyInterval=null;const{checkTimeout:n=30*1e3,dappIcon:r="",dappName:s="",openUrlWhenWalletNotFound:i=!0,openTronLinkAppOnMobile:o=!0}=e;if(typeof n!="number")throw new Error("[TronLinkAdapter] config.checkTimeout should be a number");if(this.config={checkTimeout:n,openTronLinkAppOnMobile:o,openUrlWhenWalletNotFound:i,dappIcon:r,dappName:s},this._connecting=!1,this._wallet=null,this._address=null,!wt()){this._readyState=_e.NotFound,this.setState(K.NotFound);return}ep()||Bt()&&(window.tronLink||window.tronWeb)?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return hs(this,void 0,void 0,function*(){var e;try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const n=((e=this._wallet)===null||e===void 0?void 0:e.tronWeb)||window.tronWeb;if(!n)throw new nt;try{return yield Ca(n)}catch(r){throw new Aa(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}})}connect(){return hs(this,void 0,void 0,function*(){var e,n;try{if(this.checkIfOpenTronLink(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.state===K.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;if(!this._wallet)return;if(this._connecting=!0,this._supportNewTronProtocol){const r=this._wallet;try{const i=(yield r.request({method:"eth_requestAccounts"}))[0];this.setAddress(i),this.setState(K.Connected),this._listenTronEvent(),this._wallet.tronWeb||(yield _I(this._wallet))}catch(s){let i=(s==null?void 0:s.message)||s||"Connect TronLink wallet failed.";throw s.code===-32002&&(i="The same DApp has already initiated a request to connect to TronLink wallet, and the pop-up window has not been closed."),s.code===4001&&(i="The user rejected connection."),new St(i,s)}}else if(window.tronLink){const r=this._wallet;try{const i=yield r.request({method:"tron_requestAccounts"});if(!i)throw new St("TronLink wallet is locked or no wallet account is avaliable.");if(i.code===4e3)throw new St("The same DApp has already initiated a request to connect to TronLink wallet, and the pop-up window has not been closed.");if(i.code===4001)throw new St("The user rejected connection.")}catch(i){throw new St(i==null?void 0:i.message,i)}const s=((e=r.tronWeb.defaultAddress)===null||e===void 0?void 0:e.base58)||"";this.setAddress(s),this.setState(K.Connected),this._listenTronLinkEvent()}else if(window.tronWeb){const s=((n=this._wallet.tronWeb.defaultAddress)===null||n===void 0?void 0:n.base58)||"";this.setAddress(s),this.setState(K.Connected)}else throw new St("Cannot connect wallet.");this.connected&&this.emit("connect",this.address||"")}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}})}disconnect(){return hs(this,void 0,void 0,function*(){this._supportNewTronProtocol?this._stopListenTronEvent():this._stopListenTronLinkEvent(),this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return hs(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error?new ze(s.message,s):new ze(s,new Error(s))}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return hs(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error?new ze(i.message,i):new ze(i,new Error(i))}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return hs(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error?new zt(s.message,s):new zt(s,new Error(s))}}catch(r){throw this.emit("error",r),r}})}switchChain(e){return hs(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state===K.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;if(!this._supportNewTronProtocol)throw new Km("Current version of TronLink doesn't support switch chain operation.");const n=this._wallet;try{yield n.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}catch(r){throw new Km((r==null?void 0:r.message)||r,r instanceof Error?r:new Error(r))}}catch(n){throw this.emit("error",n),n}})}checkAndGetWallet(){return hs(this,void 0,void 0,function*(){if(this.checkIfOpenTronLink(),yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}_listenTronLinkEvent(){this._stopListenTronLinkEvent(),window.addEventListener("message",this._tronLinkMessageHandler)}_stopListenTronLinkEvent(){window.removeEventListener("message",this._tronLinkMessageHandler)}checkIfOpenTronLink(){const{dappName:e="",dappIcon:n=""}=this.config;if(this.config.openTronLinkAppOnMobile!==!1&&EI({dappIcon:n,dappName:e}))throw new gn}_listenTronEvent(){var e,n;this._stopListenTronEvent(),this._stopListenTronLinkEvent();const r=this._wallet;(e=r.on)===null||e===void 0||e.call(r,"chainChanged",this._onChainChanged),(n=r.on)===null||n===void 0||n.call(r,"accountsChanged",this._onAccountsChanged)}_stopListenTronEvent(){var e,n;const r=this._wallet;(e=r.removeListener)===null||e===void 0||e.call(r,"chainChanged",this._onChainChanged),(n=r.removeListener)===null||n===void 0||n.call(r,"accountsChanged",this._onAccountsChanged)}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;const e=100,n=Math.floor(2e3/e),r=Math.floor(this.config.checkTimeout/e);let s=0,i;return this._checkPromise=new Promise(o=>{const a=()=>{s++;const c=s<n&&!Bt()?ep():Zv();(c||s>r)&&(i&&clearInterval(i),this._readyState=c?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),o(c))};i=setInterval(a,e),a()}),this._checkPromise}checkForWalletReadyForApp(){if(this.checkReadyInterval)return;let e=0;const n=Math.floor(this.config.checkTimeout/200),r=()=>{var s,i;(window.tronLink?!((s=window.tronLink.tronWeb)===null||s===void 0)&&s.defaultAddress:!((i=window.tronWeb)===null||i===void 0)&&i.defaultAddress)?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null,this._updateWallet(),this.emit("connect",this.address||"")):e>n?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null):e++};this.checkReadyInterval=setInterval(r,200)}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}var $a=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Ym={wallet:null,address:null,connected:!1,adapter:null},NY=function({children:t,adapters:e=null,onError:n=f=>console.error(f),onReadyStateChanged:r,onConnect:s,onDisconnect:i,onAccountsChanged:o,onChainChanged:a,onAdapterChanged:c,localStorageKey:l="tronAdapterName",autoConnect:u=!0,disableAutoConnectOnLoad:d=!1}){const[f,h]=yI(l,null),[{wallet:p,connected:g,address:y,adapter:b},C]=Se.useState(Ym),[E,S]=Se.useState(!1),[O,P]=Se.useState(!1),$=Se.useRef(!1),U=Se.useRef(!1),T=Se.useMemo(()=>e===null?[new II]:e,[e]),[M,R]=Se.useState(()=>T.map(z=>({adapter:z,state:z.state})));Se.useEffect(function(){R(J=>T.map((me,Ie)=>{const pe=J[Ie];return pe&&pe.adapter===me&&pe.state===me.state?pe:{adapter:me,state:me.state}}));function z(){R(J=>{const me=J.findIndex(Ie=>Ie.adapter===this);return me===-1?J:J.map((Ie,pe)=>pe===me?Object.assign(Object.assign({},Ie),{state:Ie.adapter.state}):Ie)})}return T.forEach(J=>J.on("stateChanged",z,J)),()=>T.forEach(J=>J.off("stateChanged",z,J))},[T]),Se.useEffect(function(){const z=f&&M.find(J=>J.adapter.name===f);C(z?{wallet:z,adapter:z.adapter,connected:z.adapter.connected,address:z.adapter.address}:Ym)},[f,M]);const k=Se.useRef(null);Se.useEffect(function(){b!==k.current&&(c==null||c(b),k.current=b)},[b,c]);const j=Se.useCallback(function(z){if(!b)return h(null);C(J=>Object.assign(Object.assign({},J),{connected:b.connected,address:b.address})),s==null||s(z)},[b,h,s]),D=Se.useCallback(function(z){return n(z),z},[n]),m=Se.useCallback(function(z,J){C(me=>Object.assign(Object.assign({},me),{address:z})),o==null||o(z,J)},[o]),w=Se.useCallback(function(){i==null||i()},[i]),_=Se.useCallback(function(z){r==null||r(z)},[r]),A=Se.useCallback(function(z){a==null||a(z)},[a]);Se.useEffect(function(){if(b)return b.on("connect",j),b.on("error",D),b.on("accountsChanged",m),b.on("chainChanged",A),b.on("readyStateChanged",_),b.on("disconnect",w),()=>{b.off("connect",j),b.off("error",D),b.off("accountsChanged",m),b.off("chainChanged",A),b.off("readyStateChanged",_),b.off("disconnect",w)}},[b,j,D,m,A,_,w]),Se.useEffect(()=>()=>{b==null||b.disconnect()},[b]);const I=Se.useRef(!1);Se.useEffect(function(){const z=u&&(!d||I.current);$.current||!z||!b||b.state!==K.Disconnect||function(){return $a(this,void 0,void 0,function*(){$.current=!0,S(!0);try{yield b.connect()}catch{}finally{S(!1),$.current=!1}})}()},[$,u,b,h,d]);const x=Se.useCallback(z=>{I.current=!0,h(z)},[h]),L=Se.useCallback(function(){return $a(this,void 0,void 0,function*(){if(!($.current||U.current||g)){if(!b)throw D(new Ah);$.current=!0,S(!0);try{yield b.connect()}catch(z){throw h(null),z}finally{S(!1),$.current=!1}}})},[$,U,b,g,D,h]),F=Se.useCallback(function(){return $a(this,void 0,void 0,function*(){if(!U.current){if(!b)return h(null);U.current=!0,P(!0);try{yield b.disconnect(),h(null)}catch(z){throw h(null),z}finally{P(!1),U.current=!1}}})},[b,U,h]),V=Se.useCallback(function(z,J){return $a(this,void 0,void 0,function*(){if(!b)throw D(new Ah);return yield b.signTransaction(z,J)})},[b,D]),q=Se.useCallback(function(z,J){return $a(this,void 0,void 0,function*(){if(!b)throw D(new Ah);return yield b.signMessage(z,J)})},[b,D]);return kt.createElement(Yv.Provider,{value:{disableAutoConnectOnLoad:d,autoConnect:u,wallets:M,wallet:p,address:y,connecting:E,connected:g,disconnecting:O,select:x,connect:L,disconnect:F,signTransaction:V,signMessage:q}},t)};var NI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Jv=t=>{var{children:e,onClick:n,className:r="",tabIndex:s=0,icon:i}=t,o=NI(t,["children","onClick","className","tabIndex","icon"]);const a=Se.useRef(null);function c(l){n==null||n(l),setTimeout(()=>{var u;(u=a.current)===null||u===void 0||u.blur()},300)}return kt.createElement("button",Object.assign({ref:a,onClick:c,className:`adapter-react-button ${r}`,tabIndex:s},o),i&&kt.createElement("i",{className:"button-icon"},kt.createElement("img",{src:i})),e)};function SI(t){const e=document.createElement("div");return e.setAttribute("id",t),e.style.position="relative",document.body.appendChild(e),e}const TI=function({children:t,wrapperId:e="react-portal-wrapper"}){const[n,r]=Se.useState(null);return Se.useLayoutEffect(()=>{let s=document.getElementById(e),i=!1;return s||(i=!0,s=SI(e)),r(s),()=>{i&&(s!=null&&s.parentNode)&&s.parentNode.removeChild(s)}},[e]),n===null?null:fI.createPortal(t,n)},xI=({onClick:t,wallet:e})=>kt.createElement("div",{className:"adapter-wallet-item"},kt.createElement(Jv,{onClick:t,icon:e.adapter.icon,tabIndex:0},e.adapter.name,kt.createElement("span",{className:"status-text"},e.state!==K.NotFound?"Detected":"NotFound"))),OI=function({visible:t,onClose:e}){const n=Se.useRef(null),{wallets:r,select:s}=Qv(),[i,o]=Se.useState(!1),[a,c]=Se.useState(!1),l=Se.useMemo(()=>[...r.filter(h=>h.state!==K.NotFound),...r.filter(h=>h.state===K.NotFound)],[r]),u=Se.useCallback(h=>{s(h.adapter.name),e()},[s,e]);function d(){c(!0),o(!0)}function f(){o(!1),setTimeout(()=>c(!1),200)}return Se.useEffect(function(){t?d():f()},[t]),Se.useEffect(()=>{const h=p=>p.key==="Escape"?e():null;return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[e]),a?kt.createElement(TI,{wrapperId:"react-portal-modal-container"},kt.createElement("div",{"data-testid":"wallet-select-modal",ref:n,className:`adapter-modal ${i&&"adapter-modal-fade-in"}`},kt.createElement("div",{className:"adapter-modal-wrapper"},kt.createElement("div",{className:"adapter-modal-header"},kt.createElement("button",{onClick:e,className:"close-button",tabIndex:0}),kt.createElement("div",{className:"adapter-modal-title"},"Connect a wallet on",kt.createElement("br",null),"Tron to continue")),kt.createElement("div",{className:"adapter-list"},l.map(h=>kt.createElement(xI,{key:h.adapter.name,wallet:h,onClick:()=>u(h)})))))):null};var DI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const SY=t=>{var{children:e,disabled:n,onClick:r}=t,s=DI(t,["children","disabled","onClick"]);const{wallet:i,disconnect:o,disconnecting:a,connected:c}=Qv(),l=Se.useCallback(d=>{r&&r(d),d.defaultPrevented||o().catch(()=>{})},[r,o]),u=Se.useMemo(()=>e||(a?"Disconnecting ...":i?"Disconnect":"Disconnect Wallet"),[e,a,i]);return kt.createElement(Jv,Object.assign({"data-testid":"wallet-disconnect-button",disabled:n||!i||!c,icon:i?i.adapter.icon:"",onClick:l},s),u)},Xv={setVisible(t){eE()},visible:!1};Object.defineProperty(Xv,"visible",{get(){return eE(),!1}});function eE(){console.error("WalletModalProvider is not provided.Please wrap your components with WalletModalProvider.")}const tE=Se.createContext(Xv);function TY(){return Se.useContext(tE)}var RI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function xY(t){var{children:e}=t,n=RI(t,["children"]);const[r,s]=Se.useState(!1);return kt.createElement(tE.Provider,{value:{visible:r,setVisible:s}},e,kt.createElement(OI,Object.assign({visible:r,onClose:()=>s(!1)},n)))}const kI=Symbol(),Qm=Object.getPrototypeOf,tp=new WeakMap,PI=t=>t&&(tp.has(t)?tp.get(t):Qm(t)===Object.prototype||Qm(t)===Array.prototype),MI=t=>PI(t)&&t[kI]||null,Zm=(t,e=!0)=>{tp.set(t,e)},sd={},Ng=t=>typeof t=="object"&&t!==null,LI=t=>Ng(t)&&!Dl.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),nE=(t,e)=>{const n=np.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Zm(r,!0),np.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Dl.has(i))Zm(i,!1);else if(di.has(i)){const[c,l]=di.get(i);a.value=nE(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},UI=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Jm(l,o)||Mc.has(o)&&Jm(l,Mc.get(o))))return!0;n(i),Ng(o)&&(o=MI(o)||o);const u=!di.has(o)&&BI(o)?Xe(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),di=new WeakMap,Dl=new WeakSet,np=new WeakMap,uc=[1,1],Mc=new WeakMap;let Jm=Object.is,$I=(t,e)=>new Proxy(t,e),BI=LI,jI=nE,FI=UI;function Xe(t={}){if(!Ng(t))throw new Error("object required");const e=Mc.get(t);if(e)return e;let n=uc[0];const r=new Set,s=(y,b=++uc[0])=>{n!==b&&(n=b,r.forEach(C=>C(y,b)))};let i=uc[1];const o=(y=++uc[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([b])=>{const C=b[1](y);C>n&&(n=C)})),n),a=y=>(b,C)=>{const E=[...b];E[1]=[y,...E[1]],s(E,C)},c=new Map,l=(y,b)=>{const C=!Dl.has(b)&&di.get(b);if(C){if((sd?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const E=C[2](a(y));c.set(y,[C,E])}else c.set(y,[C])}},u=y=>{var b;const C=c.get(y);C&&(c.delete(y),(b=C[1])==null||b.call(C))},d=y=>(r.add(y),r.size===1&&c.forEach(([C,E],S)=>{if((sd?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const O=C[2](a(S));c.set(S,[C,O])}),()=>{r.delete(y),r.size===0&&c.forEach(([C,E],S)=>{E&&(E(),c.set(S,[C]))})});let f=!0;const h=FI(()=>f,l,u,s),p=$I(t,h);Mc.set(t,p);const g=[t,o,d];return di.set(p,g),Reflect.ownKeys(t).forEach(y=>{const b=Object.getOwnPropertyDescriptor(t,y);"value"in b&&b.writable&&(p[y]=t[y])}),f=!1,p}function _t(t,e,n){const r=di.get(t);(sd?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Lc(t){const e=di.get(t);(sd?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return jI(n,r())}function Ji(t){return Dl.add(t),t}function zI(){return{proxyStateMap:di,refSet:Dl,snapCache:np,versionHolder:uc,proxyCache:Mc}}function Tt(t,e,n,r){let s=t[e];return _t(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:WI,snapCache:HI}=zI(),Zl=t=>WI.has(t);function qI(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=HI.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Zl(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Zl(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Zl(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Zl(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,f)=>{l(this.data[d],f,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Xe(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var rE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Mn,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",l="day",u="week",d="month",f="quarter",h="year",p="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var m=["th","st","nd","rd"],w=D%100;return"["+D+(m[(w-20)%10]||m[w]||m[0])+"]"}},E=function(D,m,w){var _=String(D);return!_||_.length>=m?D:""+Array(m+1-_.length).join(w)+D},S={s:E,z:function(D){var m=-D.utcOffset(),w=Math.abs(m),_=Math.floor(w/60),A=w%60;return(m<=0?"+":"-")+E(_,2,"0")+":"+E(A,2,"0")},m:function D(m,w){if(m.date()<w.date())return-D(w,m);var _=12*(w.year()-m.year())+(w.month()-m.month()),A=m.clone().add(_,d),I=w-A<0,x=m.clone().add(_+(I?-1:1),d);return+(-(_+(w-A)/(I?A-x:x-A))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:h,w:u,d:l,D:p,h:c,m:a,s:o,ms:i,Q:f}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},O="en",P={};P[O]=C;var $="$isDayjsObject",U=function(D){return D instanceof k||!(!D||!D[$])},T=function D(m,w,_){var A;if(!m)return O;if(typeof m=="string"){var I=m.toLowerCase();P[I]&&(A=I),w&&(P[I]=w,A=I);var x=m.split("-");if(!A&&x.length>1)return D(x[0])}else{var L=m.name;P[L]=m,A=L}return!_&&A&&(O=A),A||!_&&O},M=function(D,m){if(U(D))return D.clone();var w=typeof m=="object"?m:{};return w.date=D,w.args=arguments,new k(w)},R=S;R.l=T,R.i=U,R.w=function(D,m){return M(D,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var k=function(){function D(w){this.$L=T(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[$]=!0}var m=D.prototype;return m.parse=function(w){this.$d=function(_){var A=_.date,I=_.utc;if(A===null)return new Date(NaN);if(R.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var x=A.match(y);if(x){var L=x[2]-1||0,F=(x[7]||"0").substring(0,3);return I?new Date(Date.UTC(x[1],L,x[3]||1,x[4]||0,x[5]||0,x[6]||0,F)):new Date(x[1],L,x[3]||1,x[4]||0,x[5]||0,x[6]||0,F)}}return new Date(A)}(w),this.init()},m.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},m.$utils=function(){return R},m.isValid=function(){return this.$d.toString()!==g},m.isSame=function(w,_){var A=M(w);return this.startOf(_)<=A&&A<=this.endOf(_)},m.isAfter=function(w,_){return M(w)<this.startOf(_)},m.isBefore=function(w,_){return this.endOf(_)<M(w)},m.$g=function(w,_,A){return R.u(w)?this[_]:this.set(A,w)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(w,_){var A=this,I=!!R.u(_)||_,x=R.p(w),L=function(pe,xe){var Ze=R.w(A.$u?Date.UTC(A.$y,xe,pe):new Date(A.$y,xe,pe),A);return I?Ze:Ze.endOf(l)},F=function(pe,xe){return R.w(A.toDate()[pe].apply(A.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(xe)),A)},V=this.$W,q=this.$M,z=this.$D,J="set"+(this.$u?"UTC":"");switch(x){case h:return I?L(1,0):L(31,11);case d:return I?L(1,q):L(0,q+1);case u:var me=this.$locale().weekStart||0,Ie=(V<me?V+7:V)-me;return L(I?z-Ie:z+(6-Ie),q);case l:case p:return F(J+"Hours",0);case c:return F(J+"Minutes",1);case a:return F(J+"Seconds",2);case o:return F(J+"Milliseconds",3);default:return this.clone()}},m.endOf=function(w){return this.startOf(w,!1)},m.$set=function(w,_){var A,I=R.p(w),x="set"+(this.$u?"UTC":""),L=(A={},A[l]=x+"Date",A[p]=x+"Date",A[d]=x+"Month",A[h]=x+"FullYear",A[c]=x+"Hours",A[a]=x+"Minutes",A[o]=x+"Seconds",A[i]=x+"Milliseconds",A)[I],F=I===l?this.$D+(_-this.$W):_;if(I===d||I===h){var V=this.clone().set(p,1);V.$d[L](F),V.init(),this.$d=V.set(p,Math.min(this.$D,V.daysInMonth())).$d}else L&&this.$d[L](F);return this.init(),this},m.set=function(w,_){return this.clone().$set(w,_)},m.get=function(w){return this[R.p(w)]()},m.add=function(w,_){var A,I=this;w=Number(w);var x=R.p(_),L=function(q){var z=M(I);return R.w(z.date(z.date()+Math.round(q*w)),I)};if(x===d)return this.set(d,this.$M+w);if(x===h)return this.set(h,this.$y+w);if(x===l)return L(1);if(x===u)return L(7);var F=(A={},A[a]=r,A[c]=s,A[o]=n,A)[x]||1,V=this.$d.getTime()+w*F;return R.w(V,this)},m.subtract=function(w,_){return this.add(-1*w,_)},m.format=function(w){var _=this,A=this.$locale();if(!this.isValid())return A.invalidDate||g;var I=w||"YYYY-MM-DDTHH:mm:ssZ",x=R.z(this),L=this.$H,F=this.$m,V=this.$M,q=A.weekdays,z=A.months,J=A.meridiem,me=function(xe,Ze,xt,Wt){return xe&&(xe[Ze]||xe(_,I))||xt[Ze].slice(0,Wt)},Ie=function(xe){return R.s(L%12||12,xe,"0")},pe=J||function(xe,Ze,xt){var Wt=xe<12?"AM":"PM";return xt?Wt.toLowerCase():Wt};return I.replace(b,function(xe,Ze){return Ze||function(xt){switch(xt){case"YY":return String(_.$y).slice(-2);case"YYYY":return R.s(_.$y,4,"0");case"M":return V+1;case"MM":return R.s(V+1,2,"0");case"MMM":return me(A.monthsShort,V,z,3);case"MMMM":return me(z,V);case"D":return _.$D;case"DD":return R.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return me(A.weekdaysMin,_.$W,q,2);case"ddd":return me(A.weekdaysShort,_.$W,q,3);case"dddd":return q[_.$W];case"H":return String(L);case"HH":return R.s(L,2,"0");case"h":return Ie(1);case"hh":return Ie(2);case"a":return pe(L,F,!0);case"A":return pe(L,F,!1);case"m":return String(F);case"mm":return R.s(F,2,"0");case"s":return String(_.$s);case"ss":return R.s(_.$s,2,"0");case"SSS":return R.s(_.$ms,3,"0");case"Z":return x}return null}(xe)||x.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(w,_,A){var I,x=this,L=R.p(_),F=M(w),V=(F.utcOffset()-this.utcOffset())*r,q=this-F,z=function(){return R.m(x,F)};switch(L){case h:I=z()/12;break;case d:I=z();break;case f:I=z()/3;break;case u:I=(q-V)/6048e5;break;case l:I=(q-V)/864e5;break;case c:I=q/s;break;case a:I=q/r;break;case o:I=q/n;break;default:I=q}return A?I:R.a(I)},m.daysInMonth=function(){return this.endOf(d).$D},m.$locale=function(){return P[this.$L]},m.locale=function(w,_){if(!w)return this.$L;var A=this.clone(),I=T(w,_,!0);return I&&(A.$L=I),A},m.clone=function(){return R.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},D}(),j=k.prototype;return M.prototype=j,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",l],["$M",d],["$y",h],["$D",p]].forEach(function(D){j[D[1]]=function(m){return this.$g(m,D[0],D[1])}}),M.extend=function(D,m){return D.$i||(D(m,k,M),D.$i=!0),M},M.locale=T,M.isDayjs=U,M.unix=function(D){return M(1e3*D)},M.en=P[O],M.Ls=P,M.p={},M})})(rE);var VI=rE.exports;const Xo=Xr(VI);var sE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Mn,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],s=n%100;return"["+n+(r[(s-20)%10]||r[s]||r[0])+"]"}}})})(sE);var GI=sE.exports;const KI=Xr(GI);var iE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Mn,function(){return function(n,r,s){n=n||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(l,u,d,f){return i.fromToBase(l,u,d,f)}s.en.relativeTime=o,i.fromToBase=function(l,u,d,f,h){for(var p,g,y,b=d.$locale().relativeTime||o,C=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],E=C.length,S=0;S<E;S+=1){var O=C[S];O.d&&(p=f?s(l).diff(d,O.d,!0):d.diff(l,O.d,!0));var P=(n.rounding||Math.round)(Math.abs(p));if(y=p>0,P<=O.r||!O.r){P<=1&&S>0&&(O=C[S-1]);var $=b[O.l];h&&(P=h(""+P)),g=typeof $=="string"?$.replace("%d",P):$(P,u,O.l,y);break}}if(u)return g;var U=y?b.future:b.past;return typeof U=="function"?U(g):U.replace("%s",g)},i.to=function(l,u){return a(l,u,this,!0)},i.from=function(l,u){return a(l,u,this)};var c=function(l){return l.$u?s.utc():s()};i.toNow=function(l){return this.to(c(this),l)},i.fromNow=function(l){return this.from(c(this),l)}}})})(iE);var YI=iE.exports;const QI=Xr(YI);var oE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Mn,function(){return function(n,r,s){s.updateLocale=function(i,o){var a=s.Ls[i];if(a)return(o?Object.keys(o):[]).forEach(function(c){a[c]=o[c]}),a}}})})(oE);var ZI=oE.exports;const JI=Xr(ZI);Xo.extend(QI);Xo.extend(JI);const XI={...KI,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},eN=["January","February","March","April","May","June","July","August","September","October","November","December"];Xo.locale("en-web3-modal",XI);const Xm={getMonthNameByIndex(t){return eN[t]},getYear(t=new Date().toISOString()){return Xo(t).year()},getRelativeDateFromNow(t){return Xo(t).locale("en-web3-modal").fromNow(!0)},formatDate(t,e="DD MMM"){return Xo(t).format(e)}};var ew={};const H={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof ew<"u"?ew.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},aE={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=H.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},cE=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var tN=20,nN=1,Xi=1e6,tw=1e6,rN=-7,sN=21,iN=!1,Rl="[big.js] ",lo=Rl+"Invalid ",$d=lo+"decimal places",oN=lo+"rounding mode",lE=Rl+"Division by zero",rt={},Vr=void 0,aN=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function uE(){function t(e){var n=this;if(!(n instanceof t))return e===Vr?uE():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(lo+"value");e=e===0&&1/e<0?"-0":String(e)}cN(n,e)}n.constructor=t}return t.prototype=rt,t.DP=tN,t.RM=nN,t.NE=rN,t.PE=sN,t.strict=iN,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function cN(t,e){var n,r,s;if(!aN.test(e))throw Error(lo+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function uo(t,e,n,r){var s=t.c;if(n===Vr&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(oN);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Vr))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Vr||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function ho(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}rt.abs=function(){var t=new this.constructor(this);return t.s=1,t};rt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};rt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Xi)throw Error($d);if(!s[0])throw Error(lE);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,f=s.slice(),h=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,b=t,C=b.c=[],E=0,S=o+(b.e=e.e-t.e)+1;for(b.s=i,i=S<0?0:S,f.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:f;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}C[E++]=u?l:++l,g[0]&&u?g[y]=r[h]||0:g=[r[h]]}while((h++<p||g[0]!==Vr)&&i--);return!C[0]&&E!=1&&(C.shift(),b.e--,S--),E>S&&uo(b,S,n.RM,g[0]!==Vr),b};rt.eq=function(t){return this.cmp(t)===0};rt.gt=function(t){return this.cmp(t)>0};rt.gte=function(t){return this.cmp(t)>-1};rt.lt=function(t){return this.cmp(t)<0};rt.lte=function(t){return this.cmp(t)<1};rt.minus=rt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,f=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-f){for((s=a<0)?(a=-a,r=l):(f=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--f;return l[0]||(t.s=1,l=[f=0]),t.c=l,t.e=f,t};rt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(lE);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};rt.plus=rt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};rt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-tw||t>tw)throw Error(lo+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};rt.prec=function(t,e){if(t!==~~t||t<1||t>Xi)throw Error(lo+"precision");return uo(new this.constructor(this),t,e)};rt.round=function(t,e){if(t===Vr)t=0;else if(t!==~~t||t<-Xi||t>Xi)throw Error($d);return uo(new this.constructor(this),t+this.e+1,e)};rt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Rl+"No square root");i=Math.sqrt(+ho(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return uo(t,(s.DP-=4)+t.e+1,s.RM)};rt.times=rt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};rt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Vr){if(t!==~~t||t<0||t>Xi)throw Error($d);for(n=uo(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return ho(n,!0,!!r)};rt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Vr){if(t!==~~t||t<0||t>Xi)throw Error($d);for(n=uo(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return ho(n,!1,!!r)};rt[Symbol.for("nodejs.util.inspect.custom")]=rt.toJSON=rt.toString=function(){var t=this,e=t.constructor;return ho(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};rt.toNumber=function(){var t=+ho(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Rl+"Imprecise conversion");return t};rt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Vr){if(t!==~~t||t<1||t>Xi)throw Error(lo+"precision");for(n=uo(new r(n),t,e);n.c.length<t;)n.c.push(0)}return ho(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};rt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Rl+"valueOf disallowed");return ho(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ds=uE();const It={bigNumber(t){return t?new Ds(t):new Ds(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ds(0);const n=new Ds(t),r=new Ds(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Ds(0).toFixed(e):new Ds(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Ds(e).toNumber()}},OY={numericInputKeyDown(t,e,n){const r=["Backspace","Meta","Ctrl","a","A","c","C","x","X","v","V","ArrowLeft","ArrowRight","Tab"],s=t.metaKey||t.ctrlKey,i=t.key,o=i.toLocaleLowerCase(),a=o==="a",c=o==="c",l=o==="v",u=o==="x",d=i===",",f=i===".",h=i>="0"&&i<="9";!s&&(a||c||l||u)&&t.preventDefault(),e==="0"&&!d&&!f&&i==="0"&&t.preventDefault(),e==="0"&&h&&(n(i),t.preventDefault()),(d||f)&&(e||(n("0."),t.preventDefault()),(e!=null&&e.includes(".")||e!=null&&e.includes(","))&&t.preventDefault()),!h&&!r.includes(i)&&!f&&!d&&t.preventDefault()}},lN=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],uN=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],dN=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],hN={getERC20Abi:t=>H.USDT_CONTRACT_ADDRESSES.includes(t)?dN:lN,getSwapAbi:()=>uN},DY={URLS:{FAQ:"https://walletconnect.com/faq"}},pn={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ve={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function Ih(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ye={setItem(t,e){Ko()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Ko())return localStorage.getItem(t)||void 0},removeItem(t){Ko()&&localStorage.removeItem(t)},clear(){Ko()&&localStorage.clear()}};function Ko(){return typeof window<"u"&&typeof localStorage<"u"}function vs(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var nw={};const Nh=(typeof process<"u"&&typeof nw<"u"?nw.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",dE=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],fN="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$e={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Nh,SECURE_SITE_DASHBOARD:`${Nh}/dashboard`,SECURE_SITE_FAVICON:`${Nh}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[H.CHAIN.EVM,H.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[H.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[H.CHAIN.EVM,H.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[H.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[H.CHAIN.EVM,H.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Q={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Q.getActiveNamespace(),e=Q.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ye.setItem(ve.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ye.getItem(ve.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ye.removeItem(ve.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ye.setItem(ve.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ye.setItem(ve.ACTIVE_CAIP_NETWORK_ID,t),Q.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ye.getItem(ve.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ye.removeItem(ve.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Ih(t);ye.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Q.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ye.setItem(ve.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ye.getItem(ve.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=Ih(t);ye.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ye.getItem(ve.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Ih(t);return ye.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ye.setItem(ve.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ye.getItem(ve.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ye.removeItem(ve.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ye.getItem(ve.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ye.getItem(ve.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ye.setItem(ve.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ye.getItem(ve.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ye.getItem(ve.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ye.setItem(ve.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Q.getConnectedNamespaces();e.includes(t)||(e.push(t),Q.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Q.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Q.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ye.getItem(ve.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ye.setItem(ve.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ye.removeItem(ve.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ye.getItem(ve.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Q.getBalanceCache();ye.setItem(ve.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Q.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Q.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Q.getBalanceCache();e[t.caipAddress]=t,ye.setItem(ve.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ye.getItem(ve.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Q.getBalanceCache();ye.setItem(ve.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Q.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Q.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Q.getNativeBalanceCache();e[t.caipAddress]=t,ye.setItem(ve.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ye.getItem(ve.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Q.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Q.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Q.getEnsCache();e[t.address]=t,ye.setItem(ve.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Q.getEnsCache();ye.setItem(ve.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ye.getItem(ve.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Q.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Q.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Q.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ye.setItem(ve.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Q.getIdentityCache();ye.setItem(ve.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ye.removeItem(ve.PORTFOLIO_CACHE),ye.removeItem(ve.NATIVE_BALANCE_CACHE),ye.removeItem(ve.ENS_CACHE),ye.removeItem(ve.IDENTITY_CACHE),ye.removeItem(ve.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ye.setItem(ve.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ye.getItem(ve.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Q.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===H.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};ye.setItem(ve.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ye.getItem(ve.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Q.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ye.setItem(ve.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=ye.getItem(ve.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Q.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),ye.setItem(ve.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Q.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),ye.setItem(ve.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Q.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ye.getItem(ve.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=Q.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;Q.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=Q.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},ye.setItem(ve.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=Q.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;ye.setItem(ve.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ye.getItem(ve.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=Q.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;Q.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=Q.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ye.setItem(ve.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=Q.getTokenPriceCache();ye.setItem(ve.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},de={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return de.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=$e.TEN_SEC_MS:!0},isAllowedRetry(t,e=$e.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(de.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$e.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(de.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!de.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Q.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,de.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},getApiUrl(){return H.W3M_API_URL},getBlockchainApiUrl(){return H.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return H.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?$e.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in H.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Ba(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class kl{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Ba(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Ba(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Ba(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Ba(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Ba(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const pN={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?$e.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(de.isTelegram()){if(de.isIos())return t.filter(e=>e!=="google");if(de.isMac())return t.filter(e=>e!=="x");if(de.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ge=Xe({features:$e.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$e.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),G={state:ge,subscribeKey(t,e){return Tt(ge,t,e)},setOptions(t){Object.assign(ge,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...ge.remoteFeatures,...t};ge.remoteFeatures=e,(n=ge.remoteFeatures)!=null&&n.socials&&(ge.remoteFeatures.socials=pN.filterSocialsByPlatform(ge.remoteFeatures.socials)),(r=ge.features)!=null&&r.pay&&(ge.remoteFeatures.email=!1,ge.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;ge.features||(ge.features=$e.DEFAULT_FEATURES);const e={...ge.features,...t};ge.features=e,(n=ge.features)!=null&&n.pay&&ge.remoteFeatures&&(ge.remoteFeatures.email=!1,ge.remoteFeatures.socials=!1)},setProjectId(t){ge.projectId=t},setCustomRpcUrls(t){ge.customRpcUrls=t},setAllWallets(t){ge.allWallets=t},setIncludeWalletIds(t){ge.includeWalletIds=t},setExcludeWalletIds(t){ge.excludeWalletIds=t},setFeaturedWalletIds(t){ge.featuredWalletIds=t},setTokens(t){ge.tokens=t},setTermsConditionsUrl(t){ge.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ge.privacyPolicyUrl=t},setCustomWallets(t){ge.customWallets=t},setIsSiweEnabled(t){ge.isSiweEnabled=t},setIsUniversalProvider(t){ge.isUniversalProvider=t},setSdkVersion(t){ge.sdkVersion=t},setMetadata(t){ge.metadata=t},setDisableAppend(t){ge.disableAppend=t},setEIP6963Enabled(t){ge.enableEIP6963=t},setDebug(t){ge.debug=t},setEnableWalletConnect(t){ge.enableWalletConnect=t},setEnableWalletGuide(t){ge.enableWalletGuide=t},setEnableAuthLogger(t){ge.enableAuthLogger=t},setEnableWallets(t){ge.enableWallets=t},setPreferUniversalLinks(t){ge.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries($e.SIWX_DEFAULTS))t[e]??(t[e]=n);ge.siwx=t},setConnectMethodsOrder(t){ge.features={...ge.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ge.features={...ge.features,walletFeaturesOrder:t}},setSocialsOrder(t){ge.remoteFeatures={...ge.remoteFeatures,socials:t}},setCollapseWallets(t){ge.features={...ge.features,collapseWallets:t}},setEnableEmbedded(t){ge.enableEmbedded=t},setAllowUnsupportedChain(t){ge.allowUnsupportedChain=t},setManualWCControl(t){ge.manualWCControl=t},setEnableNetworkSwitch(t){ge.enableNetworkSwitch=t},setEnableReconnect(t){ge.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ge.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ge.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ge.universalProviderConfigOverride},getSnapshot(){return Lc(ge)}},gN=Object.freeze({enabled:!0,events:[]}),mN=new kl({baseUrl:de.getAnalyticsUrl(),clientId:null}),wN=5,yN=60*1e3,Rs=Xe({...gN}),bN={state:Rs,subscribeKey(t,e){return Tt(Rs,t,e)},async sendError(t,e){if(!Rs.enabled)return;const n=Date.now();if(Rs.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<yN}).length>=wN)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Rs.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=G.state;await mN.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:de.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Rs.enabled=!0},disable(){Rs.enabled=!1},clearEvents(){Rs.events=[]}};class ia extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ia.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ia):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function rw(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?n=JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof ia?t:new ia(n,e,t);throw bN.sendError(r,r.category),r}function vn(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return rw(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return rw(a,e)}},n[r]=i}else n[r]=s}),n}var oa={};const vN="https://secure.walletconnect.org/sdk",EN=(typeof process<"u"&&typeof oa<"u"?oa.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||vN,_N=(typeof process<"u"&&typeof oa<"u"?oa.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",AN=(typeof process<"u"&&typeof oa<"u"?oa.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",he={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},yt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},fn={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},CN={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===fn.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${fn.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===fn.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${fn.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===H.CHAIN.SOLANA&&t===fn.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${fn.COINBASE.url}/dapp?cb_url=${r}`),e===H.CHAIN.BITCOIN&&t===fn.BINANCE.id&&!("binancew3w"in window)){const s=N.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(fn.BINANCE.deeplink);a.searchParams.set("appId",fn.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(fn.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},Wn=Xe({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),IN={state:Wn,subscribeNetworkImages(t){return _t(Wn.networkImages,()=>t(Wn.networkImages))},subscribeKey(t,e){return Tt(Wn,t,e)},subscribe(t){return _t(Wn,()=>t(Wn))},setWalletImage(t,e){Wn.walletImages[t]=e},setNetworkImage(t,e){Wn.networkImages[t]=e},setChainImage(t,e){Wn.chainImages[t]=e},setConnectorImage(t,e){Wn.connectorImages={...Wn.connectorImages,[t]:e}},setTokenImage(t,e){Wn.tokenImages[t]=e},setCurrencyImage(t,e){Wn.currencyImages[t]=e}},Cr=vn(IN),NN={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},Sh=Xe({networkImagePromises:{}}),hE={async fetchWalletImage(t){if(t)return await be._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Sh.networkImagePromises[t]||(Sh.networkImagePromises[t]=be._fetchNetworkImage(t)),await Sh.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Cr.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Cr.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Cr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Cr.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Cr.state.connectorImages[t.imageId]},getChainImage(t){return Cr.state.networkImages[NN[t]]}},ks=Xe({message:"",variant:"info",open:!1}),SN={state:ks,subscribeKey(t,e){return Tt(ks,t,e)},open(t,e){const{debug:n}=G.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(ks.message=s,ks.variant=e,ks.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},close(){ks.open=!1,ks.message="",ks.variant="info"}},Ct=vn(SN),TN=de.getAnalyticsUrl(),xN=new kl({baseUrl:TN,clientId:null}),ON=["MODAL_CREATED"],ts=Xe({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ue={state:ts,subscribe(t){return _t(ts,()=>t(ts))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=G.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){var e;try{let n=oe.state.address;if("address"in t.data&&t.data.address&&(n=t.data.address),ON.includes(t.data.event)||typeof window>"u")return;const r=(e=N.getActiveCaipNetwork())==null?void 0:e.caipNetworkId;await xN.post({path:"/e",params:Ue.getSdkProperties(),body:{eventId:de.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:n,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}}),ts.reportedErrors.FORBIDDEN=!1}catch(n){n instanceof Error&&n.cause instanceof Response&&n.cause.status===H.HTTP_STATUS_CODES.FORBIDDEN&&!ts.reportedErrors.FORBIDDEN&&(Ct.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Ko()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ts.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var n;ts.timestamp=Date.now(),ts.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];((n=G.state.features)!=null&&n.analytics||e.includes(t.event))&&Ue._sendAnalyticsEvent(ts)}},DN=de.getApiUrl(),_n=new kl({baseUrl:DN,clientId:null}),RN=40,sw=4,kN=20,Oe=Xe({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),be={state:Oe,subscribeKey(t,e){return Tt(Oe,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=G.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return G.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${_n.baseUrl}/getWalletImage/${t}`,n=await _n.getBlob({path:e,params:be._getSdkProperties()});Cr.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${_n.baseUrl}/public/getAssetImage/${t}`,n=await _n.getBlob({path:e,params:be._getSdkProperties()});Cr.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${_n.baseUrl}/public/getAssetImage/${t}`,n=await _n.getBlob({path:e,params:be._getSdkProperties()});Cr.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${_n.baseUrl}/public/getCurrencyImage/${t}`,n=await _n.getBlob({path:e,params:be._getSdkProperties()});Cr.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${_n.baseUrl}/public/getTokenImage/${t}`,n=await _n.getBlob({path:e,params:be._getSdkProperties()});Cr.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return de.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===fn.COINBASE.id||n.id===fn.BINANCE.id?!0:N.state.activeChain==="solana"&&(n.id===fn.SOLFLARE.id||n.id===fn.PHANTOM.id)):t},async fetchProjectConfig(){return(await _n.get({path:"/appkit/v1/config",params:be._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await _n.get({path:"/projects/v1/origins",params:be._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===H.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=H.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=N.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!hE.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>be._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=X.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>be._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>be._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>be._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];be._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(fn).map(o=>o.id));const r=await _n.get({path:"/getWallets",params:{...be._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:be._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=G.state;if(t!=null&&t.length){const e={...be._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??sw,include:t},{data:n}=await be.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>be._fetchWalletImage(i))),Oe.featured=r,Oe.allFeatured=r}},async fetchRecommendedWallets(){try{Oe.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=G.state,r=[...e??[],...n??[]].filter(Boolean),s=N.getRequestedCaipNetworkIds().join(","),i={page:1,entries:sw,include:t,exclude:r,chains:s},{data:o,count:a}=await be.fetchWallets(i),c=Q.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>be._fetchWalletImage(d))),Oe.recommended=o,Oe.allRecommended=o,Oe.count=a??0}catch{}finally{Oe.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=G.state,s=N.getRequestedCaipNetworkIds().join(","),i=[...Oe.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:RN,include:e,exclude:i,chains:s},{data:a,count:c}=await be.fetchWallets(o),l=a.slice(0,kN).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>be._fetchWalletImage(u))),Oe.wallets=de.uniqueBy([...Oe.wallets,...be._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(f=>s.includes(f))}),Oe.count=c>Oe.count?c:Oe.count,Oe.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await be.fetchWallets(e);n&&n.forEach(r=>{Oe.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=G.state,s=N.getRequestedCaipNetworkIds().join(",");Oe.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await be.fetchWallets(i);Ue.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>be._fetchWalletImage(c)),de.wait(300)]),Oe.search=be._filterOutExtensions(o)},initPromise(t,e){const n=Oe.promises[t];return n||(Oe.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&be.initPromise("connectorImages",be.fetchConnectorImages),e&&be.initPromise("featuredWallets",be.fetchFeaturedWallets),n&&be.initPromise("recommendedWallets",be.fetchRecommendedWallets),r&&be.initPromise("networkImages",be.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=G.state.features)!=null&&t.analytics&&be.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await _n.get({path:"/getAnalyticsConfig",params:be._getSdkProperties()});G.setFeatures({analytics:t})}catch{G.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Oe.featured=Oe.allFeatured,Oe.recommended=Oe.allRecommended;return}const e=N.getRequestedCaipNetworkIds().join(",");Oe.featured=Oe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Oe.recommended=Oe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Oe.filteredWallets=Oe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Oe.filteredWallets=[]},setFilterByNamespace(t){if(!t){Oe.featured=Oe.allFeatured,Oe.recommended=Oe.allRecommended;return}const e=N.getRequestedCaipNetworkIds().join(",");Oe.featured=Oe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Oe.recommended=Oe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Oe.filteredWallets=Oe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},st=Xe({view:"Connect",history:["Connect"],transactionStack:[]}),PN={state:st,subscribeKey(t,e){return Tt(st,t,e)},pushTransactionStack(t){st.transactionStack.push(t)},popTransactionStack(t){const e=st.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),fe.goBack();break;case"cancel":s==null||s(),fe.goBack();break}},push(t,e){t!==st.view&&(st.view=t,st.history.push(t),st.data=e)},reset(t,e){st.view=t,st.history=[t],st.data=e},replace(t,e){st.history.at(-1)===t||(st.view=t,st.history[st.history.length-1]=t,st.data=e)},goBack(){var r;const t=N.state.activeCaipAddress,e=fe.state.view==="ConnectingFarcaster",n=!t&&e;if(st.history.length>1){st.history.pop();const[s]=st.history.slice(-1);s&&(t&&s==="Connect"?st.view="Account":st.view=s)}else Le.close();(r=st.data)!=null&&r.wallet&&(st.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){oe.setFarcasterUrl(void 0,N.state.activeChain);const a=X.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Lc(G.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(st.history.length>1){st.history=st.history.slice(0,t+1);const[e]=st.history.slice(-1);e&&(st.view=e)}},goBackOrCloseModal(){fe.state.history.length>1?fe.goBack():Le.close()}},fe=vn(PN),ns=Xe({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),rp={state:ns,subscribe(t){return _t(ns,()=>t(ns))},setThemeMode(t){ns.themeMode=t;try{const e=X.getAuthConnector();if(e){const n=rp.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:vs(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ns.themeVariables={...ns.themeVariables,...t};try{const e=X.getAuthConnector();if(e){const n=rp.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:vs(ns.themeVariables,ns.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Lc(ns)}},On=vn(rp),fE=Object.fromEntries(cE.map(t=>[t,void 0])),MN=Object.fromEntries(cE.map(t=>[t,!0])),He=Xe({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:fE,filterByNamespaceMap:MN}),LN={state:He,subscribe(t){return _t(He,()=>{t(He)})},subscribeKey(t,e){return Tt(He,t,e)},initialize(t){t.forEach(e=>{const n=Q.getConnectedConnectorId(e);n&&X.setConnectorId(n,e)})},setActiveConnector(t){t&&(He.activeConnector=Ji(t))},setConnectors(t){t.filter(s=>!He.allConnectors.some(i=>i.id===s.id&&X.getConnectorName(i.name)===X.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&He.allConnectors.push(Ji(s))});const n=X.getEnabledNamespaces(),r=X.getEnabledConnectors(n);He.connectors=X.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(He.filterByNamespaceMap).forEach(e=>{He.filterByNamespaceMap[e]=!1}),t.forEach(e=>{He.filterByNamespaceMap[e]=!0}),X.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){He.filterByNamespaceMap[t]=e,X.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=X.getEnabledNamespaces(),e=X.getEnabledConnectors(t),n=X.areAllNamespacesEnabled();He.connectors=X.mergeMultiChainConnectors(e),n?be.clearFilterByNamespaces():be.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(He.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return He.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(He.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=X.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===H.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=X.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===H.CONNECTOR_ID.AUTH){const s=t,i=Lc(G.state),o=On.getSnapshot().themeMode,a=On.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:vs(a,o)}),X.setConnectors([t])}else X.setConnectors([t])},getAuthConnector(t){var r;const e=t||N.state.activeChain,n=He.connectors.find(s=>s.id===H.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return He.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return He.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||N.state.activeChain;return He.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Lc(G.state),r=On.getSnapshot().themeMode,s=On.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:vs(s,r)})},getConnectorsByNamespace(t){const e=He.allConnectors.filter(n=>n.chain===t);return X.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return N.checkIfSmartAccountEnabled()&&Bn(t)===yt.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=X.getConnector({id:t.id,rdns:t.rdns});CN.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,N.state.activeChain),e?fe.push("ConnectingExternal",{connector:e,wallet:t}):fe.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?X.getConnectorsByNamespace(t):X.mergeMultiChainConnectors(He.allConnectors)},setFilterByNamespace(t){He.filterByNamespace=t,He.connectors=X.getConnectors(t),be.setFilterByNamespace(t)},setConnectorId(t,e){t&&(He.activeConnectorIds={...He.activeConnectorIds,[e]:t},Q.setConnectedConnectorId(e,t))},removeConnectorId(t){He.activeConnectorIds={...He.activeConnectorIds,[t]:void 0},Q.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return He.activeConnectorIds[t]},isConnected(t){return t?!!He.activeConnectorIds[t]:Object.values(He.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){He.activeConnectorIds={...fE}}},X=vn(LN),UN=1e3,ja={checkNamespaceConnectorId(t,e){return X.getConnectorId(t)===e},isSocialProvider(t){return $e.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&X.setActiveConnector(e),s==null||s(de.isMobile()&&t),r){const l=Le.subscribeKey("open",u=>{u||(fe.state.view!==r&&fe.replace(r),l(),a(new Error("Modal closed")))})}const c=N.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Le.close(),c(),o(pn.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=N.subscribeKey("activeCaipAddress",s=>{s&&(Le.close(),r(),e(pn.parseCaipAddress(s)))});ne.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i=oe.state.socialWindow,o=oe.state.socialProvider,a=!1,c=null;const l=e||N.state.activeChain,u=N.subscribeKey("activeCaipAddress",d=>{d&&(n&&Le.close(),u())});return new Promise((d,f)=>{async function h(g){var y;if((y=g.data)!=null&&y.resultUri)if(g.origin===H.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{const b=X.getAuthConnector(l);if(b&&!a){i&&(i.close(),oe.setSocialWindow(void 0,l),i=oe.state.socialWindow),a=!0;const C=g.data.resultUri;if(o&&Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){Q.setConnectedSocialProvider(o),await ne.connectExternal({id:b.id,type:b.type,socialUri:C},b.chain);const E=N.state.activeCaipAddress;if(!E){f(new Error("Failed to connect"));return}d(pn.parseCaipAddress(E)),Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),f(new Error("Failed to connect"))}}else o&&Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function p(){if(t&&(oe.setSocialProvider(t,l),o=oe.state.socialProvider,Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){r==null||r();const g=Le.subscribeKey("open",b=>{!b&&t==="farcaster"&&(f(new Error("Popup closed")),s==null||s(),g())}),y=X.getAuthConnector();if(y&&!oe.state.farcasterUrl)try{const{url:b}=await y.provider.getFarcasterUri();oe.setFarcasterUrl(b,l)}catch{f(new Error("Failed to connect to farcaster"))}}else{const g=X.getAuthConnector();c=de.returnOpenHref(`${H.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g&&o){const{uri:y}=await g.provider.getSocialRedirectUri({provider:o});if(c&&y){oe.setSocialWindow(c,l),i=oe.state.socialWindow,c.location.href=y;const b=setInterval(()=>{i!=null&&i.closed&&!a&&(f(new Error("Popup closed")),clearInterval(b))},1e3);window.addEventListener("message",h,!1)}else c==null||c.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),c==null||c.close()}}}p()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Le.subscribeKey("open",c=>{c||(fe.state.view!==e&&fe.replace(e),a(),i(new Error("Modal closed")))})}const o=N.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Le.close(),o(),s(pn.parseCaipAddress(a)))})})},async updateEmail(){const t=Q.getConnectedConnectorId(N.state.activeChain),e=X.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==H.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await Le.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Le.close(),clearInterval(i),o(),r({email:a}))},UN),o=Le.subscribeKey("open",a=>{a||(fe.state.view!=="Connect"&&fe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return N.checkIfSmartAccountEnabled()&&Bn(t)===yt.ACCOUNT_TYPES.EOA}};function Bd(){var r,s;const t=((r=N.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=N.state.activeCaipNetwork)==null?void 0:s.id)||1,n=$e.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Bn(t){var n;return(n=N.getAccountData(t))==null?void 0:n.preferredAccountType}function dc(t){var e,n;return t?(n=(e=N.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:N.state.activeCaipNetwork}const id={getConnectionStatus(t,e){const n=X.state.activeConnectorIds[e],r=ne.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=G.state.remoteFeatures)!=null&&a.multiWallet),n=X.state.activeConnectorIds[t],r=ne.getConnections(t),i=(ne.state.recentConnections.get(t)??[]).filter(c=>X.getConnectorById(c.connectorId)),o=id.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Di=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ot=Xe({...Di}),$N={state:Ot,subscribeKey(t,e){return Tt(Ot,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=de.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ot.message=Di.message,Ot.variant=Di.variant,Ot.svg=Di.svg,Ot.open=Di.open,Ot.autoClose=Di.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Di.autoClose}){Ot.open?(Ot.open=!1,setTimeout(()=>{Ot.message=t,Ot.variant=n,Ot.svg=e,Ot.open=!0,Ot.autoClose=r},150)):(Ot.message=t,Ot.variant=n,Ot.svg=e,Ot.open=!0,Ot.autoClose=r)}},ft=$N,ht=Xe({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),BN={state:ht,subscribe(t){return _t(ht,()=>t(ht))},setLastNetworkInView(t){ht.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");ht.loading=!0;try{const n=await we.fetchTransactions({account:t,cursor:ht.next,chainId:(e=N.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=$u.filterSpamTransactions(n.data),s=$u.filterByConnectedChain(r),i=[...ht.transactions,...s];ht.loading=!1,ht.transactions=i,ht.transactionsByYear=$u.groupTransactionsByYearAndMonth(ht.transactionsByYear,s),ht.empty=i.length===0,ht.next=n.next?n.next:void 0}catch{const r=N.state.activeChain;Ue.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:G.state.projectId,cursor:ht.next,isSmartAccount:Bn(r)===yt.ACCOUNT_TYPES.SMART_ACCOUNT}}),ft.showError("Failed to fetch transactions"),ht.loading=!1,ht.empty=!0,ht.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=N.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){ht.next=void 0},resetTransactions(){ht.transactions=[],ht.transactionsByYear={},ht.lastNetworkInView=void 0,ht.loading=!1,ht.empty=!1,ht.next=void 0}},$u=vn(BN,"API_ERROR"),Fe=Xe({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let vi;const jN={state:Fe,subscribe(t){return _t(Fe,()=>t(Fe))},subscribeKey(t,e){return Tt(Fe,t,e)},_getClient(){return Fe._client},setClient(t){Fe._client=Ji(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ne.syncStorageConnections(e)},syncStorageConnections(t){const e=Q.getConnections(),n=t??Array.from(N.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Fe.recentConnections);i.set(r,s),Fe.recentConnections=i}},getConnections(t){return t?Fe.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ne.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){var n,r,s,i;const e=de.isTelegram()||de.isSafari()&&de.isIos();if(t==="always"||t==="auto"&&e){if(vi){await vi,vi=void 0;return}if(!de.isPairingExpired(Fe==null?void 0:Fe.wcPairingExpiry)){const o=Fe.wcUri;Fe.wcUri=o;return}vi=(r=(n=ne._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n).catch(()=>{}),ne.state.status="connecting",await vi,vi=void 0,Fe.wcPairingExpiry=void 0,ne.state.status="connected"}else await((i=(s=ne._getClient())==null?void 0:s.connectWalletConnect)==null?void 0:i.call(s))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ne._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&N.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ne._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||N.state.activeChain;e&&X.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Le.setLoading(!0,N.state.activeChain);const n=X.getAuthConnector();n&&(oe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Q.setPreferredAccountTypes(Object.entries(N.state.chains).reduce((s,[i,o])=>{const a=i,c=Bn(a);return c!==void 0&&(s[a]=c),s},{})),await ne.reconnectExternal(n),Le.setLoading(!1,N.state.activeChain),Ue.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=N.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ne._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ne._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ne._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ne._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ne._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ne._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ne._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ne._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ne._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ne._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ne._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ne._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Fe.wcUri=void 0,Fe.wcPairingExpiry=void 0,Fe.wcLinking=void 0,Fe.recentWallet=void 0,Fe.status="disconnected",$u.resetTransactions(),Q.deleteWalletConnectDeepLink()},resetUri(){Fe.wcUri=void 0,Fe.wcPairingExpiry=void 0,vi=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=ne.state;e&&Q.setWalletConnectDeepLink(e),n&&Q.setAppKitRecent(n),Ue.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=fe.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown"}})},setWcBasic(t){Fe.wcBasic=t},setUri(t){Fe.wcUri=t,Fe.wcPairingExpiry=de.getPairingExpiry()},setWcLinking(t){Fe.wcLinking=t},setWcError(t){Fe.wcError=t,Fe.buffering=!1},setRecentWallet(t){Fe.recentWallet=t},setBuffering(t){Fe.buffering=t},setStatus(t){Fe.status=t},setIsSwitchingConnection(t){Fe.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=ne._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new ia("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Fe.connections);n.set(e,t),Fe.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=oe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&ja.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ne.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=X.getConnectorById(t.connectorId),s=t.connectorId===H.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ne.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await ne.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=X.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===H.CONNECTOR_ID.AUTH,a=t.connectorId===H.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&ja.isSocialProvider(i)){const{address:d}=await ja.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Le.open({view:"ConnectingFarcaster"})},onConnect(){fe.replace("ProfileWallets")}});c=d}else{const{address:d}=await ja.connectEmail({closeModalOnConnect:r,onOpen(){Le.open({view:"EmailLogin"})},onConnect(){fe.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await ja.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(f){const h=f?"AllWallets":"ConnectingWalletConnect";Le.state.open?fe.push(h):Le.open({view:h})},onConnect(){fe.replace("ProfileWallets")}});c=d}else{const d=await ne.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ne.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=oe.getCaipAddress(n);if(o){const{address:c}=pn.parseCaipAddress(o);i=c}const a=id.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ne.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ne.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ne=vn(jN),bo=Xe({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ir={state:bo,subscribe(t){return _t(bo,()=>t(bo))},subscribeOpen(t){return Tt(bo,"open",t)},set(t){Object.assign(bo,{...bo,...t})}},hc={async getTokenList(t){var r;const e=await we.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=N.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ne==null?void 0:ne.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await we.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await we.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ne.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await jd.getMyTokensWithBalance(t);return oe.setTokenBalance(e,N.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Bd(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},et=Xe({tokenBalances:[],loading:!1}),FN={state:et,subscribe(t){return _t(et,()=>t(et))},subscribeKey(t,e){return Tt(et,t,e)},setToken(t){t&&(et.token=Ji(t))},setTokenAmount(t){et.sendTokenAmount=t},setReceiverAddress(t){et.receiverAddress=t},setReceiverProfileImageUrl(t){et.receiverProfileImageUrl=t},setReceiverProfileName(t){et.receiverProfileName=t},setNetworkBalanceInUsd(t){et.networkBalanceInUSD=t},setLoading(t){et.loading=t},async sendToken(){var t;try{switch(Qe.setLoading(!0),(t=N.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Qe.sendEvmToken();return;case"solana":await Qe.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Qe.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=N.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Bn(t);if(!Qe.state.sendTokenAmount||!Qe.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Qe.state.token)throw new Error("A token is required");(n=Qe.state.token)!=null&&n.address?(Ue.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qe.state.token.address,amount:Qe.state.sendTokenAmount,network:((r=N.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Qe.sendERC20Token({receiverAddress:Qe.state.receiverAddress,tokenAddress:Qe.state.token.address,sendTokenAmount:Qe.state.sendTokenAmount,decimals:Qe.state.token.quantity.decimals})):(Ue.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qe.state.token.symbol||"",amount:Qe.state.sendTokenAmount,network:((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Qe.sendNativeToken({receiverAddress:Qe.state.receiverAddress,sendTokenAmount:Qe.state.sendTokenAmount,decimals:Qe.state.token.quantity.decimals}))},async fetchTokenBalance(t){var o,a;et.loading=!0;const e=N.state.activeChain,n=(o=N.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=N.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=oe.getCaipAddress(e)??N.state.activeCaipAddress,i=s?de.getPlainAddress(s):void 0;if(et.lastRetry&&!de.isAllowedRetry(et.lastRetry,30*$e.ONE_SEC_MS))return et.loading=!1,[];try{if(i&&n&&r){const c=await jd.getMyTokensWithBalance();return et.tokenBalances=c,et.lastRetry=void 0,c}}catch(c){et.lastRetry=Date.now(),t==null||t(c),ft.showError("Token Balance Unavailable")}finally{et.loading=!1}return[]},fetchNetworkBalance(){if(et.tokenBalances.length===0)return;const t=hc.mapBalancesToSwapTokens(et.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Bd());e&&(et.networkBalanceInUSD=e?It.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;fe.pushTransactionStack({});const e=t.receiverAddress,n=oe.state.address,r=ne.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ne.sendTransaction({chainNamespace:H.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Ue.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Bn("eip155")===yt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Qe.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=N.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=ne._getClient())==null||a.updateBalance("eip155"),Qe.resetSend()},async sendERC20Token(t){fe.pushTransactionStack({onSuccess(){fe.replace("Account")}});const e=ne.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(oe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=de.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ne.writeContract({fromAddress:oe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:hN.getERC20Abi(n),chainNamespace:H.CHAIN.EVM}),Qe.resetSend()}},async sendSolanaToken(){var t;if(!Qe.state.sendTokenAmount||!Qe.state.receiverAddress)throw new Error("An amount and receiver address are required");fe.pushTransactionStack({onSuccess(){fe.replace("Account")}}),await ne.sendTransaction({chainNamespace:"solana",to:Qe.state.receiverAddress,value:Qe.state.sendTokenAmount}),(t=ne._getClient())==null||t.updateBalance("solana"),Qe.resetSend()},resetSend(){et.token=void 0,et.sendTokenAmount=void 0,et.receiverAddress=void 0,et.receiverProfileImageUrl=void 0,et.receiverProfileName=void 0,et.loading=!1,et.tokenBalances=[]}},Qe=vn(FN),Th={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Jl={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},re=Xe({chains:qI(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),zN={state:re,subscribe(t){return _t(re,()=>{t(re)})},subscribeKey(t,e){return Tt(re,t,e)},subscribeChainProp(t,e,n){let r;return _t(re.chains,()=>{var i;const s=n||re.activeChain;if(s){const o=(i=re.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Q.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=G.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(re.noAdapters=!0),re.noAdapters||(re.activeChain=a==null?void 0:a.namespace,re.activeCaipNetwork=i,N.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),re.activeChain&&Ir.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),f=Q.getPreferredAccountTypes()||{},h={...G.state.defaultAccountTypes,...f};N.state.chains.set(u,{namespace:u,networkState:Xe({...Jl,caipNetwork:d==null?void 0:d[0]}),accountState:Xe({...Th,preferredAccountType:h[u]}),caipNetworks:d??[],...n}),N.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(re.activeChain===t){const r=Array.from(re.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&N.setActiveCaipNetwork(s)}}re.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Jl,caipNetwork:r[0]},accountState:Th,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),N.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=re.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),re.chains.set(t.chainNamespace,{...e,caipNetworks:r}),N.setRequestedCaipNetworks(r,t.chainNamespace),X.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=re.chains.get(t);if(n){const o=((r=re.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&N.setActiveCaipNetwork(n.caipNetworks[0]),re.chains.set(t,{...n,caipNetworks:a}),N.setRequestedCaipNetworks(a||[],t),a.length===0&&X.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=re.chains.get(t);n&&(n.networkState={...n.networkState||Jl,...e},re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=re.chains.get(t);if(r){const s={...r.accountState||Th,...e};re.chains.set(t,{...r,accountState:s}),(re.chains.size===1||re.activeChain===t)&&(e.caipAddress&&(re.activeCaipAddress=e.caipAddress),oe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=re.chains.get(t);if(n){const r={...n.networkState||Jl,...e};re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){N.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;re.activeChain=t;const e=t?re.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(re.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,re.activeCaipNetwork=n,N.setChainNetworkData(t,{caipNetwork:n}),Q.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ir.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;re.activeChain!==t.chainNamespace&&N.setIsSwitchingNamespace(!0);const e=re.chains.get(t.chainNamespace);re.activeChain=t.chainNamespace,re.activeCaipNetwork=t,N.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:re.activeCaipAddress=void 0,N.setAccountProp("caipAddress",re.activeCaipAddress,t.chainNamespace),e&&oe.replaceState(e.accountState),Qe.resetSend(),Ir.set({activeChain:re.activeChain,selectedNetworkId:(i=re.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Q.setActiveCaipNetworkId(t.caipNetworkId),!N.checkIfSupportedNetwork(t.chainNamespace)&&G.state.enableNetworkSwitch&&!G.state.allowUnsupportedChain&&!ne.state.wcBasic&&N.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=re.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==N.state.activeChain,n=(s=N.getNetworkData(t))==null?void 0:s.caipNetwork,r=N.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await N.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=N.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=N.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=re.activeCaipNetwork)==null?void 0:a.id)})),s=N.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Le.close()}catch{fe.goBack()}Ue.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||re.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=re.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=re.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=re.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return de.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=N.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){N.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=N.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));X.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=N.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=re.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:re.activeCaipNetwork},getActiveCaipAddress(){return re.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=re.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=N.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());N.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){var s;const n=e||((s=re.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=N.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!re.activeChain)return!0;const e=N.getRequestedCaipNetworks(re.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){N.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=aE.caipNetworkIdToNumber((r=re.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=re.activeChain;if(!e||!t)return!1;const n=N.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Le.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=re.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&$e.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){N.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=N.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=G.state.defaultAccountTypes[e];re.activeCaipAddress=void 0,N.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),X.removeConnectorId(e)},setIsSwitchingNamespace(t){re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(re.chains.forEach(s=>{H.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=re.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||re.activeChain;if(e)return(n=N.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||re.activeChain;if(e)return(n=N.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=N.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=X.state.filterByNamespace;return(t?[re.chains.get(t)]:Array.from(re.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?N.getRequestedCaipNetworks(t):N.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return re.lastConnectedSIWECaipNetwork}},N=vn(zN),WN={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},pE=de.getBlockchainApiUrl(),An=Xe({clientId:null,api:new kl({baseUrl:pE,clientId:null}),supportedChains:{http:[],ws:[]}}),we={state:An,async get(t){const{st:e,sv:n}=we.getSdkProperties(),r=G.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return An.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=G.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{An.supportedChains.http.length||await we.getSupportedNetworks()}catch{return!1}return An.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await we.get({path:"v1/supported-chains"});return An.supportedChains=t,t}catch{return An.supportedChains}},async fetchIdentity({address:t}){const e=Q.getIdentityFromCacheForAddress(t);if(e)return e;const n=await we.get({path:`/v1/identity/${t}`,params:{sender:N.state.activeCaipAddress?de.getPlainAddress(N.state.activeCaipAddress):void 0}});return Q.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await we.isNetworkSupported((c=N.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=Q.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await we.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return Q.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await we.isNetworkSupported((o=N.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?we.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await we.isNetworkSupported((n=N.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?we.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var s;if(!await we.isNetworkSupported((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=Q.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await An.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:G.state.projectId},headers:{"Content-Type":"application/json"}});return Q.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await we.isNetworkSupported((r=N.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?we.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=we.getSdkProperties();if(!await we.isNetworkSupported((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return we.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await we.isNetworkSupported((o=N.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return An.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:$e.CONVERT_SLIPPAGE_TOLERANCE},projectId:G.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=we.getSdkProperties();if(!await we.isNetworkSupported((o=N.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return we.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=we.getSdkProperties();if(!await we.isNetworkSupported((l=N.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ft.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Q.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await we.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Q.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await we.isNetworkSupported((n=N.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?we.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await we.isNetworkSupported((n=N.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?we.get({path:`/v1/profile/reverse/${t}`,params:{sender:oe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await we.isNetworkSupported((n=N.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?we.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await we.isNetworkSupported((i=N.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?An.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await we.isNetworkSupported((a=N.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await An.api.post({path:"/v1/generators/onrampurl",params:{projectId:G.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await we.isNetworkSupported((e=N.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await we.get({path:"/v1/onramp/options"})}catch{return WN}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await we.isNetworkSupported((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await An.api.post({path:"/v1/onramp/quote",params:{projectId:G.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await we.isNetworkSupported((n=N.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?we.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await we.isNetworkSupported((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?An.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:G.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){An.clientId=t,An.api=new kl({baseUrl:pE,clientId:t})}};function HN(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const qN="modulepreload",VN=function(t){return"/"+t},iw={},hn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=VN(c),c in iw)return;iw[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":qN,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},xh={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return HN(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},jd={async getMyTokensWithBalance(t){const e=oe.state.address,n=N.state.activeCaipNetwork,r=X.getConnectorId("eip155")===H.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Q.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===H.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await we.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=xh.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ne.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ne.walletGetAssets({account:t,chainFilter:[s]});if(!xh.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>xh.createBalance(l,e.caipNetworkId));return Q.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Pr=Xe({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),GN={state:Pr,replaceState(t){t&&Object.assign(Pr,Ji(t))},subscribe(t){return N.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return N.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){N.setAccountProp("status",t,e)},getCaipAddress(t){var e,n;if(t)return(n=(e=N.state.chains.get(t))==null?void 0:e.accountState)==null?void 0:n.caipAddress},setCaipAddress(t,e){const n=t?de.getPlainAddress(t):void 0;e===N.state.activeChain&&(N.state.activeCaipAddress=t),N.setAccountProp("caipAddress",t,e),N.setAccountProp("address",n,e)},setBalance(t,e,n){N.setAccountProp("balance",t,n),N.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){N.setAccountProp("profileName",t,e)},setProfileImage(t,e){N.setAccountProp("profileImage",t,e)},setUser(t,e){N.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){N.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){N.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){N.setAccountProp("currentTab",t,N.state.activeChain)},setTokenBalance(t,e){t&&N.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){N.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){var s,i;if(!n)return;const r=((i=(s=N.state.chains.get(n))==null?void 0:s.accountState)==null?void 0:i.addressLabels)||new Map;r.set(t,e),N.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){var r,s;if(!e)return;const n=((s=(r=N.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.addressLabels)||new Map;n.delete(t),N.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){N.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){N.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&N.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){N.setAccountProp("socialWindow",t?Ji(t):void 0,e)},setFarcasterUrl(t,e){N.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Pr.balanceLoading=!0;const e=(i=N.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=N.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=N.state.activeCaipAddress,s=r?de.getPlainAddress(r):void 0;if(Pr.lastRetry&&!de.isAllowedRetry(Pr.lastRetry,30*$e.ONE_SEC_MS))return Pr.balanceLoading=!1,[];try{if(s&&e&&n){const a=await jd.getMyTokensWithBalance();return oe.setTokenBalance(a,n),Pr.lastRetry=void 0,Pr.balanceLoading=!1,a}}catch(a){Pr.lastRetry=Date.now(),t==null||t(a),ft.showError("Token Balance Unavailable")}finally{Pr.balanceLoading=!1}return[]},resetAccount(t){N.resetAccount(t)}},oe=vn(GN),KN={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=N.state.activeCaipNetwork,r=fe.state.data;if(t.id===(n==null?void 0:n.id))return;const i=oe.getCaipAddress(N.state.activeChain),o=t.chainNamespace!==N.state.activeChain,a=oe.getCaipAddress(t.chainNamespace),l=X.getConnectorId(N.state.activeChain)===H.CONNECTOR_ID.AUTH,u=H.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?fe.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?fe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):fe.push("SwitchNetwork",{...r,network:t})}},Cn=Xe({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),YN={state:Cn,subscribe(t){return _t(Cn,()=>t(Cn))},subscribeKey(t,e){return Tt(Cn,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=N.state.activeChain,r=e&&e!==n,s=(i=N.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(ne.state.wcBasic?be.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await be.prefetch(),X.setFilterByNamespace(t==null?void 0:t.namespace),Le.setLoading(!0,e),e&&r){const a=((o=N.getNetworkData(e))==null?void 0:o.caipNetwork)||N.getRequestedCaipNetworks(e)[0];a&&KN.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=N.state.noAdapters;G.state.manualWCControl||a&&!s?de.isMobile()?fe.reset("AllWallets"):fe.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?fe.reset(t.view,t.data):s?fe.reset("Account"):fe.reset("Connect")}Cn.open=!0,Ir.set({open:!0}),Ue.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=G.state.enableEmbedded,e=!!N.state.activeCaipAddress;Cn.open&&Ue.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Cn.open=!1,fe.reset("Connect"),Le.clearLoading(),t?e?fe.replace("Account"):fe.push("Connect"):Ir.set({open:!1}),ne.resetUri()},setLoading(t,e){e&&Cn.loadingNamespaceMap.set(e,t),Cn.loading=t,Ir.set({loading:t})},clearLoading(){Cn.loadingNamespaceMap.clear(),Cn.loading=!1,Ir.set({loading:!1})},shake(){Cn.shake||(Cn.shake=!0,setTimeout(()=>{Cn.shake=!1},500))}},Le=vn(YN),bc={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},sp={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},QN={providers:dE,selectedProvider:null,error:null,purchaseCurrency:bc,paymentCurrency:sp,purchaseCurrencies:[bc],paymentCurrencies:[],quotesLoading:!1},We=Xe(QN),ZN={state:We,subscribe(t){return _t(We,()=>t(We))},subscribeKey(t,e){return Tt(We,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=N.state.activeChain,s=r===H.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=N.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",fN),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",G.state.projectId),We.selectedProvider={...t,url:o.toString()}}else We.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=dE.filter(r=>e.includes(r.name));We.providers=n}else We.providers=[]},setPurchaseCurrency(t){We.purchaseCurrency=t},setPaymentCurrency(t){We.paymentCurrency=t},setPurchaseAmount(t){ip.state.purchaseAmount=t},setPaymentAmount(t){ip.state.paymentAmount=t},async getAvailableCurrencies(){const t=await we.getOnrampOptions();We.purchaseCurrencies=t.purchaseCurrencies,We.paymentCurrencies=t.paymentCurrencies,We.paymentCurrency=t.paymentCurrencies[0]||sp,We.purchaseCurrency=t.purchaseCurrencies[0]||bc,await be.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await be.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;We.quotesLoading=!0;try{const n=await we.getOnrampQuote({purchaseCurrency:We.purchaseCurrency,paymentCurrency:We.paymentCurrency,amount:((t=We.paymentAmount)==null?void 0:t.toString())||"0",network:(e=We.purchaseCurrency)==null?void 0:e.symbol});return We.quotesLoading=!1,We.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return We.error=n.message,We.quotesLoading=!1,null}finally{We.quotesLoading=!1}},resetState(){We.selectedProvider=null,We.error=null,We.purchaseCurrency=bc,We.paymentCurrency=sp,We.purchaseCurrencies=[bc],We.paymentCurrencies=[],We.paymentAmount=void 0,We.purchaseAmount=void 0,We.quotesLoading=!1}},ip=vn(ZN),Ks={getGasPriceInEther(t,e){const n=e*t;return Number(n)/1e18},getGasPriceInUSD(t,e,n){const r=Ks.getGasPriceInEther(e,n);return It.bigNumber(t).times(r).toNumber()},getPriceImpact({sourceTokenAmount:t,sourceTokenPriceInUSD:e,toTokenPriceInUSD:n,toTokenAmount:r}){const s=It.bigNumber(t).times(e),i=It.bigNumber(r).times(n);return s.minus(i).div(s).times(100).toNumber()},getMaxSlippage(t,e){const n=It.bigNumber(t).div(100);return It.multiply(e,n).toNumber()},getProviderFee(t,e=.0085){return It.bigNumber(t).times(e).toString()},isInsufficientNetworkTokenForGas(t,e){const n=e||"0";return It.bigNumber(t).eq(0)?!0:It.bigNumber(It.bigNumber(n)).gt(t)},isInsufficientSourceTokenForSwap(t,e,n){var i,o;const r=(o=(i=n==null?void 0:n.find(a=>a.address===e))==null?void 0:i.quantity)==null?void 0:o.numeric;return It.bigNumber(r||"0").lt(t)}},ow=15e4,JN=6,dn={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:$e.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0},B=Xe({...dn}),Bu={state:B,subscribe(t){return _t(B,()=>t(B))},subscribeKey(t,e){return Tt(B,t,e)},getParams(){var c,l,u,d,f,h,p,g;const t=N.state.activeChain,e=oe.getCaipAddress(t)??N.state.activeCaipAddress,n=de.getPlainAddress(e),r=Bd(),s=X.getConnectorId(N.state.activeChain);if(!n)throw new Error("No address found to swap the tokens from.");const i=!((c=B.toToken)!=null&&c.address)||!((l=B.toToken)!=null&&l.decimals),o=!((u=B.sourceToken)!=null&&u.address)||!((d=B.sourceToken)!=null&&d.decimals)||!It.bigNumber(B.sourceTokenAmount).gt(0),a=!B.sourceTokenAmount;return{networkAddress:r,fromAddress:n,fromCaipAddress:e,sourceTokenAddress:(f=B.sourceToken)==null?void 0:f.address,toTokenAddress:(h=B.toToken)==null?void 0:h.address,toTokenAmount:B.toTokenAmount,toTokenDecimals:(p=B.toToken)==null?void 0:p.decimals,sourceTokenAmount:B.sourceTokenAmount,sourceTokenDecimals:(g=B.sourceToken)==null?void 0:g.decimals,invalidToToken:i,invalidSourceToken:o,invalidSourceTokenAmount:a,availableToSwap:e&&!i&&!o&&!a,isAuthConnector:s===H.CONNECTOR_ID.AUTH}},setSourceToken(t){if(!t){B.sourceToken=t,B.sourceTokenAmount="",B.sourceTokenPriceInUSD=0;return}B.sourceToken=t,Ce.setTokenPrice(t.address,"sourceToken")},setSourceTokenAmount(t){B.sourceTokenAmount=t},setToToken(t){if(!t){B.toToken=t,B.toTokenAmount="",B.toTokenPriceInUSD=0;return}B.toToken=t,Ce.setTokenPrice(t.address,"toToken")},setToTokenAmount(t){B.toTokenAmount=t?It.toFixed(t,JN):""},async setTokenPrice(t,e){let n=B.tokensPriceMap[t]||0;n||(B.loadingPrices=!0,n=await Ce.getAddressPrice(t)),e==="sourceToken"?B.sourceTokenPriceInUSD=n:e==="toToken"&&(B.toTokenPriceInUSD=n),B.loadingPrices&&(B.loadingPrices=!1),Ce.getParams().availableToSwap&&Ce.swapTokens()},switchTokens(){if(B.initializing||!B.initialized)return;const t=B.toToken?{...B.toToken}:void 0,e=B.sourceToken?{...B.sourceToken}:void 0,n=t&&B.toTokenAmount===""?"1":B.toTokenAmount;Ce.setSourceToken(t),Ce.setToToken(e),Ce.setSourceTokenAmount(n),Ce.setToTokenAmount(""),Ce.swapTokens()},resetState(){B.myTokensWithBalance=dn.myTokensWithBalance,B.tokensPriceMap=dn.tokensPriceMap,B.initialized=dn.initialized,B.initializing=dn.initializing,B.sourceToken=dn.sourceToken,B.sourceTokenAmount=dn.sourceTokenAmount,B.sourceTokenPriceInUSD=dn.sourceTokenPriceInUSD,B.toToken=dn.toToken,B.toTokenAmount=dn.toTokenAmount,B.toTokenPriceInUSD=dn.toTokenPriceInUSD,B.networkPrice=dn.networkPrice,B.networkTokenSymbol=dn.networkTokenSymbol,B.networkBalanceInUSD=dn.networkBalanceInUSD,B.inputError=dn.inputError},resetValues(){var n;const{networkAddress:t}=Ce.getParams(),e=(n=B.tokens)==null?void 0:n.find(r=>r.address===t);Ce.setSourceToken(e),Ce.setToToken(void 0)},getApprovalLoadingState(){return B.loadingApprovalTransaction},clearError(){B.transactionError=void 0},async initializeState(){if(!B.initializing){if(B.initializing=!0,!B.initialized)try{await Ce.fetchTokens(),B.initialized=!0}catch{B.initialized=!1,ft.showError("Failed to initialize swap"),fe.goBack()}B.initializing=!1}},async fetchTokens(){var n;const{networkAddress:t}=Ce.getParams();await Ce.getNetworkTokenPrice(),await Ce.getMyTokensWithBalance();const e=(n=B.myTokensWithBalance)==null?void 0:n.find(r=>r.address===t);e&&(B.networkTokenSymbol=e.symbol,Ce.setSourceToken(e),Ce.setSourceTokenAmount("0"))},async getTokenList(){var e;const t=(e=N.state.activeCaipNetwork)==null?void 0:e.caipNetworkId;if(!(B.caipNetworkId===t&&B.tokens))try{B.tokensLoading=!0;const n=await hc.getTokenList(t);B.tokens=n,B.caipNetworkId=t,B.popularTokens=n.sort((r,s)=>r.symbol<s.symbol?-1:r.symbol>s.symbol?1:0),B.suggestedTokens=n.filter(r=>!!$e.SWAP_SUGGESTED_TOKENS.includes(r.symbol))}catch{B.tokens=[],B.popularTokens=[],B.suggestedTokens=[]}finally{B.tokensLoading=!1}},async getAddressPrice(t){var c,l;const e=B.tokensPriceMap[t];if(e)return e;const n=await we.fetchTokenPrice({addresses:[t]}),r=(n==null?void 0:n.fungibles)||[],s=[...B.tokens||[],...B.myTokensWithBalance||[]],i=(c=s==null?void 0:s.find(u=>u.address===t))==null?void 0:c.symbol,o=((l=r.find(u=>u.symbol.toLowerCase()===(i==null?void 0:i.toLowerCase())))==null?void 0:l.price)||0,a=parseFloat(o.toString());return B.tokensPriceMap[t]=a,a},async getNetworkTokenPrice(){var s;const{networkAddress:t}=Ce.getParams(),n=(s=(await we.fetchTokenPrice({addresses:[t]}).catch(()=>(ft.showError("Failed to fetch network token price"),{fungibles:[]}))).fungibles)==null?void 0:s[0],r=(n==null?void 0:n.price.toString())||"0";B.tokensPriceMap[t]=parseFloat(r),B.networkTokenSymbol=(n==null?void 0:n.symbol)||"",B.networkPrice=r},async getMyTokensWithBalance(t){const e=await jd.getMyTokensWithBalance(t),n=hc.mapBalancesToSwapTokens(e);n&&(await Ce.getInitialGasPrice(),Ce.setBalances(n))},setBalances(t){const{networkAddress:e}=Ce.getParams(),n=N.state.activeCaipNetwork;if(!n)return;const r=t.find(s=>s.address===e);t.forEach(s=>{B.tokensPriceMap[s.address]=s.price||0}),B.myTokensWithBalance=t.filter(s=>s.address.startsWith(n.caipNetworkId)),B.networkBalanceInUSD=r?It.multiply(r.quantity.numeric,r.price).toString():"0"},async getInitialGasPrice(){var e,n;const t=await hc.fetchGasPrice();if(!t)return{gasPrice:null,gasPriceInUSD:null};switch((n=(e=N.state)==null?void 0:e.activeCaipNetwork)==null?void 0:n.chainNamespace){case H.CHAIN.SOLANA:return B.gasFee=t.standard??"0",B.gasPriceInUSD=It.multiply(t.standard,B.networkPrice).div(1e9).toNumber(),{gasPrice:BigInt(B.gasFee),gasPriceInUSD:Number(B.gasPriceInUSD)};case H.CHAIN.EVM:default:const r=t.standard??"0",s=BigInt(r),i=BigInt(ow),o=Ks.getGasPriceInUSD(B.networkPrice,i,s);return B.gasFee=r,B.gasPriceInUSD=o,{gasPrice:s,gasPriceInUSD:o}}},async swapTokens(){var i,o;const t=oe.state.address,e=B.sourceToken,n=B.toToken,r=It.bigNumber(B.sourceTokenAmount).gt(0);if(r||Ce.setToTokenAmount(""),!n||!e||B.loadingPrices||!r)return;B.loadingQuote=!0;const s=It.bigNumber(B.sourceTokenAmount).times(10**e.decimals).round(0);try{const a=await we.fetchSwapQuote({userAddress:t,from:e.address,to:n.address,gasPrice:B.gasFee,amount:s.toString()});B.loadingQuote=!1;const c=(o=(i=a==null?void 0:a.quotes)==null?void 0:i[0])==null?void 0:o.toAmount;if(!c){Ct.open({displayMessage:"Incorrect amount",debugMessage:"Please enter a valid amount"},"error");return}const l=It.bigNumber(c).div(10**n.decimals).toString();Ce.setToTokenAmount(l),Ce.hasInsufficientToken(B.sourceTokenAmount,e.address)?B.inputError="Insufficient balance":(B.inputError=void 0,Ce.setTransactionDetails())}catch{B.loadingQuote=!1,B.inputError="Insufficient balance"}},async getTransaction(){const{fromCaipAddress:t,availableToSwap:e}=Ce.getParams(),n=B.sourceToken,r=B.toToken;if(!(!t||!e||!n||!r||B.loadingQuote))try{B.loadingBuildTransaction=!0;const s=await hc.fetchSwapAllowance({userAddress:t,tokenAddress:n.address,sourceTokenAmount:B.sourceTokenAmount,sourceTokenDecimals:n.decimals});let i;return s?i=await Ce.createSwapTransaction():i=await Ce.createAllowanceTransaction(),B.loadingBuildTransaction=!1,B.fetchError=!1,i}catch{fe.goBack(),ft.showError("Failed to check allowance"),B.loadingBuildTransaction=!1,B.approvalTransaction=void 0,B.swapTransaction=void 0,B.fetchError=!0;return}},async createAllowanceTransaction(){const{fromCaipAddress:t,sourceTokenAddress:e,toTokenAddress:n}=Ce.getParams();if(!(!t||!n)){if(!e)throw new Error("createAllowanceTransaction - No source token address found.");try{const r=await we.generateApproveCalldata({from:e,to:n,userAddress:t}),s=de.getPlainAddress(r.tx.from);if(!s)throw new Error("SwapController:createAllowanceTransaction - address is required");const i={data:r.tx.data,to:s,gasPrice:BigInt(r.tx.eip155.gasPrice),value:BigInt(r.tx.value),toAmount:B.toTokenAmount};return B.swapTransaction=void 0,B.approvalTransaction={data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount},{data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount}}catch{fe.goBack(),ft.showError("Failed to create approval transaction"),B.approvalTransaction=void 0,B.swapTransaction=void 0,B.fetchError=!0;return}}},async createSwapTransaction(){var o;const{networkAddress:t,fromCaipAddress:e,sourceTokenAmount:n}=Ce.getParams(),r=B.sourceToken,s=B.toToken;if(!e||!n||!r||!s)return;const i=(o=ne.parseUnits(n,r.decimals))==null?void 0:o.toString();try{const a=await we.generateSwapCalldata({userAddress:e,from:r.address,to:s.address,amount:i,disableEstimate:!0}),c=r.address===t,l=BigInt(a.tx.eip155.gas),u=BigInt(a.tx.eip155.gasPrice),d=de.getPlainAddress(a.tx.to);if(!d)throw new Error("SwapController:createSwapTransaction - address is required");const f={data:a.tx.data,to:d,gas:l,gasPrice:u,value:BigInt(c?i??"0":"0"),toAmount:B.toTokenAmount};return B.gasPriceInUSD=Ks.getGasPriceInUSD(B.networkPrice,l,u),B.approvalTransaction=void 0,B.swapTransaction=f,f}catch{fe.goBack(),ft.showError("Failed to create transaction"),B.approvalTransaction=void 0,B.swapTransaction=void 0,B.fetchError=!0;return}},onEmbeddedWalletApprovalSuccess(){ft.showLoading("Approve limit increase in your wallet"),fe.replace("SwapPreview")},async sendTransactionForApproval(t){var s,i,o;const{fromAddress:e,isAuthConnector:n}=Ce.getParams();B.loadingApprovalTransaction=!0,n?fe.pushTransactionStack({onSuccess:Ce.onEmbeddedWalletApprovalSuccess}):ft.showLoading("Approve limit increase in your wallet");try{await ne.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:H.CHAIN.EVM}),await Ce.swapTokens(),await Ce.getTransaction(),B.approvalTransaction=void 0,B.loadingApprovalTransaction=!1}catch(a){const c=a;B.transactionError=c==null?void 0:c.displayMessage,B.loadingApprovalTransaction=!1,ft.showError((c==null?void 0:c.displayMessage)||"Transaction error"),Ue.sendEvent({type:"track",event:"SWAP_APPROVAL_ERROR",properties:{message:(c==null?void 0:c.displayMessage)||(c==null?void 0:c.message)||"Unknown",network:((s=N.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||"",swapFromToken:((i=Ce.state.sourceToken)==null?void 0:i.symbol)||"",swapToToken:((o=Ce.state.toToken)==null?void 0:o.symbol)||"",swapFromAmount:Ce.state.sourceTokenAmount||"",swapToAmount:Ce.state.toTokenAmount||"",isSmartAccount:Bn(H.CHAIN.EVM)===yt.ACCOUNT_TYPES.SMART_ACCOUNT}})}},async sendTransactionForSwap(t){var o,a,c,l,u,d,f,h,p,g,y,b;if(!t)return;const{fromAddress:e,toTokenAmount:n,isAuthConnector:r}=Ce.getParams();B.loadingTransaction=!0;const s=`Swapping ${(o=B.sourceToken)==null?void 0:o.symbol} to ${It.formatNumberToLocalString(n,3)} ${(a=B.toToken)==null?void 0:a.symbol}`,i=`Swapped ${(c=B.sourceToken)==null?void 0:c.symbol} to ${It.formatNumberToLocalString(n,3)} ${(l=B.toToken)==null?void 0:l.symbol}`;r?fe.pushTransactionStack({onSuccess(){fe.replace("Account"),ft.showLoading(s),Bu.resetState()}}):ft.showLoading("Confirm transaction in your wallet");try{const C=[(u=B.sourceToken)==null?void 0:u.address,(d=B.toToken)==null?void 0:d.address].join(","),E=await ne.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:H.CHAIN.EVM});return B.loadingTransaction=!1,ft.showSuccess(i),Ue.sendEvent({type:"track",event:"SWAP_SUCCESS",properties:{network:((f=N.state.activeCaipNetwork)==null?void 0:f.caipNetworkId)||"",swapFromToken:((h=Ce.state.sourceToken)==null?void 0:h.symbol)||"",swapToToken:((p=Ce.state.toToken)==null?void 0:p.symbol)||"",swapFromAmount:Ce.state.sourceTokenAmount||"",swapToAmount:Ce.state.toTokenAmount||"",isSmartAccount:Bn(H.CHAIN.EVM)===yt.ACCOUNT_TYPES.SMART_ACCOUNT}}),Bu.resetState(),r||fe.replace("Account"),Bu.getMyTokensWithBalance(C),E}catch(C){const E=C;B.transactionError=E==null?void 0:E.displayMessage,B.loadingTransaction=!1,ft.showError((E==null?void 0:E.displayMessage)||"Transaction error"),Ue.sendEvent({type:"track",event:"SWAP_ERROR",properties:{message:(E==null?void 0:E.displayMessage)||(E==null?void 0:E.message)||"Unknown",network:((g=N.state.activeCaipNetwork)==null?void 0:g.caipNetworkId)||"",swapFromToken:((y=Ce.state.sourceToken)==null?void 0:y.symbol)||"",swapToToken:((b=Ce.state.toToken)==null?void 0:b.symbol)||"",swapFromAmount:Ce.state.sourceTokenAmount||"",swapToAmount:Ce.state.toTokenAmount||"",isSmartAccount:Bn(H.CHAIN.EVM)===yt.ACCOUNT_TYPES.SMART_ACCOUNT}});return}},hasInsufficientToken(t,e){return Ks.isInsufficientSourceTokenForSwap(t,e,B.myTokensWithBalance)},setTransactionDetails(){const{toTokenAddress:t,toTokenDecimals:e}=Ce.getParams();!t||!e||(B.gasPriceInUSD=Ks.getGasPriceInUSD(B.networkPrice,BigInt(B.gasFee),BigInt(ow)),B.priceImpact=Ks.getPriceImpact({sourceTokenAmount:B.sourceTokenAmount,sourceTokenPriceInUSD:B.sourceTokenPriceInUSD,toTokenPriceInUSD:B.toTokenPriceInUSD,toTokenAmount:B.toTokenAmount}),B.maxSlippage=Ks.getMaxSlippage(B.slippage,B.toTokenAmount),B.providerFee=Ks.getProviderFee(B.sourceTokenAmount))}},Ce=vn(Bu),yr=Xe({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),XN={state:yr,subscribe(t){return _t(yr,()=>t(yr))},subscribeKey(t,e){return Tt(yr,t,e)},showTooltip({message:t,triggerRect:e,variant:n}){yr.open=!0,yr.message=t,yr.triggerRect=e,yr.variant=n},hide(){yr.open=!1,yr.message="",yr.triggerRect={width:0,height:0,top:0,left:0}}},RY=vn(XN),aw=2147483648,eS={convertEVMChainIdToCoinType(t){if(t>=aw)throw new Error("Invalid chainId");return(aw|t)>>>0}},Xn=Xe({suggestions:[],loading:!1}),tS={state:Xn,subscribe(t){return _t(Xn,()=>t(Xn))},subscribeKey(t,e){return Tt(Xn,t,e)},async resolveName(t){var e,n;try{return await we.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await we.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xn.loading=!0,Xn.suggestions=[];const e=await we.getEnsNameSuggestions(t);return Xn.suggestions=e.suggestions||[],Xn.suggestions}catch(e){const n=vc.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Xn.loading=!1}},async getNamesForAddress(t){try{if(!N.state.activeCaipNetwork)return[];const n=Q.getEnsFromCacheForAddress(t);if(n)return n;const r=await we.reverseLookupEnsName({address:t});return Q.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=vc.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=N.state.activeCaipNetwork,n=oe.state.address,r=X.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Xn.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});fe.pushTransactionStack({onCancel(){fe.replace("RegisterAccountName")}});const i=await ne.signMessage(s);Xn.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=eS.convertEVMChainIdToCoinType(Number(o));await we.registerEnsName({coinType:a,address:n,signature:i,message:s}),oe.setProfileName(t,e.chainNamespace),Q.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),fe.replace("RegisterAccountNameSuccess")}catch(s){const i=vc.parseEnsApiError(s,`Error registering name ${t}`);throw fe.replace("RegisterAccountName"),new Error(i)}finally{Xn.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},vc=vn(tS),Fa=Xe({isLegalCheckboxChecked:!1}),kY={state:Fa,subscribe(t){return _t(Fa,()=>t(Fa))},subscribeKey(t,e){return Tt(Fa,t,e)},setIsLegalCheckboxChecked(t){Fa.isLegalCheckboxChecked=t}},nS={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class rS extends Error{}function sS(){return`https://rpc.walletconnect.org/v1/json-rpc?projectId=${G.getSnapshot().projectId}&source=fund-wallet`}async function Sg(t,e){const n=sS(),{sdkType:r,sdkVersion:s,projectId:i}=G.getSnapshot(),o={jsonrpc:"2.0",id:1,method:t,params:{...e||{},st:r,sv:s,projectId:i}},c=await(await fetch(n,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}})).json();if(c.error)throw new rS(c.error.message);return c}async function iS(t){return(await Sg("reown_getExchanges",t)).result}async function oS(t){return(await Sg("reown_getExchangePayUrl",t)).result}async function aS(t){return(await Sg("reown_getExchangeBuyStatus",t)).result}function cw(t,e){const{chainNamespace:n,chainId:r}=pn.parseCaipNetworkId(t),s=nS[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const cS=0,gE={paymentAsset:{network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:0}},amount:0,tokenAmount:0,tokenPrice:null,priceLoading:!1,error:null,exchanges:[],isLoading:!1,currentPayment:void 0,isPaymentInProgress:!1,paymentId:""},Ae=Xe(gE),PY={state:Ae,subscribe(t){return _t(Ae,()=>t(Ae))},subscribeKey(t,e){return Tt(Ae,t,e)},resetState(){Object.assign(Ae,{...gE})},async fetchTokenPrice(){var n,r;Ae.priceLoading=!0;const t=Bd(),e=await we.fetchTokenPrice({addresses:[t]});Ae.tokenPrice=((r=(n=e.fungibles)==null?void 0:n[0])==null?void 0:r.price)||null,Ae.priceLoading=!1},getTokenAmount(){if(!Ae.tokenPrice)throw new Error("Cannot get token price");const t=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:4}).format(Ae.amount/Ae.tokenPrice);return Number(t)},setAmount(t){Ae.amount=t,Ae.tokenPrice&&(Ae.tokenAmount=this.getTokenAmount())},setPaymentAsset(t){Ae.paymentAsset=t},async fetchExchanges(){try{Ae.isLoading=!0;const t=await iS({page:cS,asset:cw(Ae.paymentAsset.network,Ae.paymentAsset.asset),amount:Ae.amount.toString()});Ae.exchanges=t.exchanges.slice(0,2)}catch{throw ft.showError("Unable to get exchanges"),new Error("Unable to get exchanges")}finally{Ae.isLoading=!1}},async getPayUrl(t,e){try{const n=Number(e.amount),r=await oS({exchangeId:t,asset:cw(e.network,e.asset),amount:n.toString(),recipient:`${e.network}:${e.recipient}`});return Ue.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{exchange:{id:t},configuration:{network:e.network,asset:e.asset,recipient:e.recipient,amount:n},currentPayment:{type:"exchange",exchangeId:t},source:"fund-from-exchange",headless:!1}}),r}catch(n){throw n instanceof Error&&n.message.includes("is not supported")?new Error("Asset not supported"):new Error(n.message)}},async handlePayWithExchange(t){try{if(!oe.state.address)throw new Error("No account connected");Ae.isPaymentInProgress=!0,Ae.paymentId=crypto.randomUUID(),Ae.currentPayment={type:"exchange",exchangeId:t};const{network:e,asset:n}=Ae.paymentAsset,r={network:e,asset:n,amount:Ae.tokenAmount,recipient:oe.state.address},s=await this.getPayUrl(t,r);if(!s)throw new Error("Unable to initiate payment");Ae.currentPayment.sessionId=s.sessionId,Ae.currentPayment.status="IN_PROGRESS",Ae.currentPayment.exchangeId=t,de.openHref(s.url,"_blank","popup=yes,width=480,height=720,noopener,noreferrer")}catch{Ae.error="Unable to initiate payment",ft.showError(Ae.error)}},async waitUntilComplete({exchangeId:t,sessionId:e,paymentId:n,retries:r=20}){const s=await this.getBuyStatus(t,e,n);if(s.status==="SUCCESS"||s.status==="FAILED")return s;if(r===0)throw new Error("Unable to get deposit status");return await new Promise(i=>{setTimeout(i,5e3)}),this.waitUntilComplete({exchangeId:t,sessionId:e,paymentId:n,retries:r-1})},async getBuyStatus(t,e,n){var r,s;try{if(!Ae.currentPayment)throw new Error("No current payment");const i=await aS({sessionId:e,exchangeId:t});return Ae.currentPayment.status=i.status,(i.status==="SUCCESS"||i.status==="FAILED")&&(Ae.currentPayment.result=i.txHash,Ae.isPaymentInProgress=!1,Ue.sendEvent({type:"track",event:i.status==="SUCCESS"?"PAY_SUCCESS":"PAY_ERROR",properties:{source:"fund-from-exchange",paymentId:n,configuration:{network:Ae.paymentAsset.network,asset:Ae.paymentAsset.asset,recipient:oe.state.address||"",amount:Ae.amount},currentPayment:{type:"exchange",exchangeId:(r=Ae.currentPayment)==null?void 0:r.exchangeId,sessionId:(s=Ae.currentPayment)==null?void 0:s.sessionId,result:i.txHash}}})),i}catch{return{status:"UNKNOWN",txHash:""}}},reset(){Ae.currentPayment=void 0,Ae.isPaymentInProgress=!1,Ae.paymentId="",Ae.paymentAsset={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:0}},Ae.amount=0,Ae.tokenAmount=0,Ae.tokenPrice=null,Ae.priceLoading=!1,Ae.error=null,Ae.exchanges=[],Ae.isLoading=!1}};var Tg={exports:{}},ea=typeof Reflect=="object"?Reflect:null,lw=ea&&typeof ea.apply=="function"?ea.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},ju;ea&&typeof ea.ownKeys=="function"?ju=ea.ownKeys:Object.getOwnPropertySymbols?ju=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ju=function(e){return Object.getOwnPropertyNames(e)};function lS(t){console&&console.warn&&console.warn(t)}var mE=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}Tg.exports=ot;Tg.exports.once=fS;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var uw=10;function Fd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return uw},set:function(t){if(typeof t!="number"||t<0||mE(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");uw=t}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||mE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wE(t){return t._maxListeners===void 0?ot.defaultMaxListeners:t._maxListeners}ot.prototype.getMaxListeners=function(){return wE(this)};ot.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")lw(c,this,n);else for(var l=c.length,u=_E(c,l),r=0;r<l;++r)lw(u[r],this,n);return!0};function yE(t,e,n,r){var s,i,o;if(Fd(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=wE(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,lS(a)}return t}ot.prototype.addListener=function(e,n){return yE(this,e,n,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,n){return yE(this,e,n,!0)};function uS(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bE(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=uS.bind(r);return s.listener=n,r.wrapFn=s,s}ot.prototype.once=function(e,n){return Fd(n),this.on(e,bE(this,e,n)),this};ot.prototype.prependOnceListener=function(e,n){return Fd(n),this.prependListener(e,bE(this,e,n)),this};ot.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Fd(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():dS(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function vE(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?hS(s):_E(s,s.length)}ot.prototype.listeners=function(e){return vE(this,e,!0)};ot.prototype.rawListeners=function(e){return vE(this,e,!1)};ot.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):EE.call(t,e)};ot.prototype.listenerCount=EE;function EE(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?ju(this._events):[]};function _E(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function dS(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function hS(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function fS(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}AE(t,e,i,{once:!0}),e!=="error"&&pS(t,s,{once:!0})})}function pS(t,e,n){typeof t.on=="function"&&AE(t,"error",e,n)}function AE(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var gr=Tg.exports;const zd=Xr(gr);var ee={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var op=function(t,e){return op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},op(t,e)};function gS(t,e){op(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ap=function(){return ap=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ap.apply(this,arguments)};function mS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function wS(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function yS(t,e){return function(n,r){e(n,r,t)}}function bS(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vS(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function ES(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function _S(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function AS(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function cp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function CE(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function CS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(CE(arguments[e]));return t}function IS(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Uc(t){return this instanceof Uc?(this.v=t,this):new Uc(t)}function NS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(p,g){i.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(i[0][3],p)}}function c(f){f.value instanceof Uc?Promise.resolve(f.value.v).then(l,u):d(i[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function SS(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Uc(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function TS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof cp=="function"?cp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function xS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function OS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function DS(t){return t&&t.__esModule?t:{default:t}}function RS(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function kS(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const PS=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ap},__asyncDelegator:SS,__asyncGenerator:NS,__asyncValues:TS,__await:Uc,__awaiter:vS,__classPrivateFieldGet:RS,__classPrivateFieldSet:kS,__createBinding:_S,__decorate:wS,__exportStar:AS,__extends:gS,__generator:ES,__importDefault:DS,__importStar:OS,__makeTemplateObject:xS,__metadata:bS,__param:yS,__read:CE,__rest:mS,__spread:CS,__spreadArrays:IS,__values:cp},Symbol.toStringTag,{value:"Module"})),Pl=Vv(PS);var Oh={},za={},dw;function MS(){if(dw)return za;dw=1,Object.defineProperty(za,"__esModule",{value:!0}),za.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return za.delay=t,za}var Ei={},Dh={},_i={},hw;function LS(){return hw||(hw=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.ONE_THOUSAND=_i.ONE_HUNDRED=void 0,_i.ONE_HUNDRED=100,_i.ONE_THOUSAND=1e3),_i}var Rh={},fw;function US(){return fw||(fw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Rh)),Rh}var pw;function IE(){return pw||(pw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pl;e.__exportStar(LS(),t),e.__exportStar(US(),t)}(Dh)),Dh}var gw;function $S(){if(gw)return Ei;gw=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.fromMiliseconds=Ei.toMiliseconds=void 0;const t=IE();function e(r){return r*t.ONE_THOUSAND}Ei.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ei.fromMiliseconds=n,Ei}var mw;function BS(){return mw||(mw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pl;e.__exportStar(MS(),t),e.__exportStar($S(),t)}(Oh)),Oh}var vo={},ww;function jS(){if(ww)return vo;ww=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return vo.Watch=t,vo.default=t,vo}var kh={},Wa={},yw;function FS(){if(yw)return Wa;yw=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.IWatch=void 0;class t{}return Wa.IWatch=t,Wa}var bw;function zS(){return bw||(bw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Pl.__exportStar(FS(),t)}(kh)),kh}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pl;e.__exportStar(BS(),t),e.__exportStar(jS(),t),e.__exportStar(zS(),t),e.__exportStar(IE(),t)})(ee);class fo{}let WS=class extends fo{constructor(e){super()}};const vw=ee.FIVE_SECONDS,po={pulse:"heartbeat_pulse"};let HS=class NE extends WS{constructor(e){super(e),this.events=new gr.EventEmitter,this.interval=vw,this.interval=(e==null?void 0:e.interval)||vw}static async init(e){const n=new NE(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ee.toMiliseconds(this.interval))}pulse(){this.events.emit(po.pulse)}};const qS=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,VS=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,GS=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function KS(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){YS(t);return}return e}function YS(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Xl(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!GS.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(qS.test(t)||VS.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,KS)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function QS(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ut(t,...e){try{return QS(t(...e))}catch(n){return Promise.reject(n)}}function ZS(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function JS(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Fu(t){if(ZS(t))return String(t);if(JS(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Fu(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const lp="base64:";function XS(t){return typeof t=="string"?t:lp+nT(t)}function eT(t){return typeof t!="string"||!t.startsWith(lp)?t:tT(t.slice(lp.length))}function tT(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function nT(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Tn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function rT(...t){return Tn(t.join(":"))}function eu(t){return t=Tn(t),t?t+":":""}function sT(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function iT(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const oT="memory",aT=()=>{const t=new Map;return{name:oT,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function cT(t={}){const e={mounts:{"":t.driver||aT()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Tn(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Ew(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const f=new Map,h=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Tn(g?p:p.key),b=g?void 0:p.value,C=g||!p.options?u:{...u,...p.options},E=n(y);h(E).items.push({key:y,value:b,relativeKey:E.relativeKey,options:C})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Tn(l);const{relativeKey:d,driver:f}=n(l);return Ut(f.hasItem,d,u)},getItem(l,u={}){l=Tn(l);const{relativeKey:d,driver:f}=n(l);return Ut(f.getItem,d,u).then(h=>Xl(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Ut(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:rT(d.base,h.key),value:Xl(h.value)}))):Promise.all(d.items.map(f=>Ut(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Xl(h)})))))},getItemRaw(l,u={}){l=Tn(l);const{relativeKey:d,driver:f}=n(l);return f.getItemRaw?Ut(f.getItemRaw,d,u):Ut(f.getItem,d,u).then(h=>eT(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Tn(l);const{relativeKey:f,driver:h}=n(l);h.setItem&&(await Ut(h.setItem,f,Fu(u),d),h.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Ut(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:Fu(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>Ut(d.driver.setItem,f.relativeKey,Fu(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Tn(l);const{relativeKey:f,driver:h}=n(l);if(h.setItemRaw)await Ut(h.setItemRaw,f,u,d);else if(h.setItem)await Ut(h.setItem,f,XS(u),d);else return;h.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Tn(l);const{relativeKey:d,driver:f}=n(l);f.removeItem&&(await Ut(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Ut(f.removeItem,d+"$",u),f.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Tn(l);const{relativeKey:d,driver:f}=n(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await Ut(f.getMeta,d,u)),!u.nativeOnly){const p=await Ut(f.getItem,d+"$",u).then(g=>Xl(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=eu(l);const d=r(l,!0);let f=[];const h=[];let p=!0;for(const b of d){(y=b.driver.flags)!=null&&y.maxDepth||(p=!1);const C=await Ut(b.driver.getKeys,b.relativeBase,u);for(const E of C){const S=b.mountpoint+Tn(E);f.some(O=>S.startsWith(O))||h.push(S)}f=[b.mountpoint,...f.filter(E=>!E.startsWith(b.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return h.filter(b=>(!g||sT(b,u.maxDepth))&&iT(b,l))},async clear(l,u={}){l=eu(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Ut(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>_w(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=eu(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Ew(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=eu(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((f=(d=e.unwatch)[l])==null||f.call(d),delete e.unwatch[l]),u&&await _w(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=Tn(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Tn(l),r(l,u.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Ew(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function _w(t){typeof t.dispose=="function"&&await Ut(t.dispose)}function go(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function SE(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=go(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let Ph;function Ml(){return Ph||(Ph=SE("keyval-store","keyval")),Ph}function Aw(t,e=Ml()){return e("readonly",n=>go(n.get(t)))}function lT(t,e,n=Ml()){return n("readwrite",r=>(r.put(e,t),go(r.transaction)))}function uT(t,e=Ml()){return e("readwrite",n=>(n.delete(t),go(n.transaction)))}function dT(t=Ml()){return t("readwrite",e=>(e.clear(),go(e.transaction)))}function hT(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},go(t.transaction)}function fT(t=Ml()){return t("readonly",e=>{if(e.getAllKeys)return go(e.getAllKeys());const n=[];return hT(e,r=>n.push(r.key)).then(()=>n)})}const pT=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),gT=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function eo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return gT(t)}catch{return t}}function Ns(t){return typeof t=="string"?t:pT(t)||""}const mT="idb-keyval";var wT=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=SE(t.dbName,t.storeName)),{name:mT,options:t,async hasItem(s){return!(typeof await Aw(n(s),r)>"u")},async getItem(s){return await Aw(n(s),r)??null},setItem(s,i){return lT(n(s),i,r)},removeItem(s){return uT(n(s),r)},getKeys(){return fT(r)},clear(){return dT(r)}}};const yT="WALLET_CONNECT_V2_INDEXED_DB",bT="keyvaluestorage";let vT=class{constructor(){this.indexedDb=cT({driver:wT({dbName:yT,storeName:bT})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Ns(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Mh<"u"&&Mh.localStorage?zu.exports=Mh.localStorage:typeof window<"u"&&window.localStorage?zu.exports=window.localStorage:zu.exports=new e})();function ET(t){var e;return[t[0],eo((e=t[1])!=null?e:"")]}let _T=class{constructor(){this.localStorage=zu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ET)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return eo(n)}async setItem(e,n){this.localStorage.setItem(e,Ns(n))}async removeItem(e){this.localStorage.removeItem(e)}};const AT="wc_storage_version",Cw=1,CT=async(t,e,n)=>{const r=AT,s=await e.getItem(r);if(s&&s>=Cw){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,Cw),n(e),IT(t,o)},IT=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let NT=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new _T;this.storage=e;try{const n=new vT;CT(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function ST(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var TT=xT;function xT(t,e,n){var r=n&&n.stringify||ST,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,f=t&&t.length||0,h=0;h<f;){if(t.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,t.charCodeAt(h+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Number(e[u]),d=h+2,h++;break;case 105:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Math.floor(Number(e[u])),d=h+2,h++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<h&&(l+=t.slice(d,h));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=h+2,h++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=h+2,h++;break}l+=r(e[u]),d=h+2,h++;break;case 115:if(u>=c)break;d<h&&(l+=t.slice(d,h)),l+=String(e[u]),d=h+2,h++;break;case 37:d<h&&(l+=t.slice(d,h)),l+="%",d=h+2,h++,u--;break}++u}++h}return d===-1?t:(d<f&&(l+=t.slice(d)),l)}const Iw=TT;var Wo=Gr;const $c=BT().console||{},OT={mapHttpRequest:tu,mapHttpResponse:tu,wrapRequestSerializer:Lh,wrapResponseSerializer:Lh,wrapErrorSerializer:Lh,req:tu,res:tu,err:MT};function DT(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Gr(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||$c;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=DT(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=Bc),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:f});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:LT(t)};c.levels=Gr.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Bc,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=h,e&&(c._logEvent=up());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function f(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Eo(l,c,"error","log"),Eo(l,c,"fatal","error"),Eo(l,c,"warn","error"),Eo(l,c,"info","log"),Eo(l,c,"debug","log"),Eo(l,c,"trace","log")}function h(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var b=Object.assign({},r,y),C=t.browser.serialize===!0?Object.keys(b):s;delete p.serializers,Wd([p],C,b,this._stdErrSerialize)}function E(S){this._childLevel=(S._childLevel|0)+1,this.error=_o(S,p,"error"),this.fatal=_o(S,p,"fatal"),this.warn=_o(S,p,"warn"),this.info=_o(S,p,"info"),this.debug=_o(S,p,"debug"),this.trace=_o(S,p,"trace"),b&&(this.serializers=b,this._serialize=C),e&&(this._logEvent=up([].concat(S._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}Gr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Gr.stdSerializers=OT;Gr.stdTimeFunctions=Object.assign({},{nullTime:TE,epochTime:xE,unixTime:UT,isoTime:$T});function Eo(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Bc:s[n]?s[n]:$c[n]||$c[r]||Bc,RT(t,e,n)}function RT(t,e,n){!t.transmit&&e[n]===Bc||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===$c?$c:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Wd(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,kT(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Gr.levels.values[l],d=Gr.levels.values[n];if(d<u)return;PT(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Gr.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function kT(t,e,n,r){t._serialize&&Wd(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Gr.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?Iw(s.shift(),s):void 0}else typeof i=="string"&&(i=Iw(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Wd(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Gr.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function _o(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function PT(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Wd(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=up(c)}function up(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function MT(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function LT(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?TE:xE}function tu(){return{}}function Lh(t){return t}function Bc(){}function TE(){return!1}function xE(){return Date.now()}function UT(){return Math.round(Date.now()/1e3)}function $T(){return new Date(Date.now()).toISOString()}function BT(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Ll=Xr(Wo),jT={level:"info"},Ul="custom_context",xg=1e3*1024;let FT=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Nw=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new FT(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},OE=class{constructor(e,n=xg){this.level=e??"error",this.levelValue=Wo.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Nw(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Wo.levels.values.error?console.error(e):n===Wo.levels.values.warn?console.warn(e):n===Wo.levels.values.debug?console.debug(e):n===Wo.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ns({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Nw(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ns({extraMetadata:e})),new Blob(n,{type:"application/json"})}},zT=class{constructor(e,n=xg){this.baseChunkLogger=new OE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},WT=class{constructor(e,n=xg){this.baseChunkLogger=new OE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var HT=Object.defineProperty,qT=Object.defineProperties,VT=Object.getOwnPropertyDescriptors,Sw=Object.getOwnPropertySymbols,GT=Object.prototype.hasOwnProperty,KT=Object.prototype.propertyIsEnumerable,Tw=(t,e,n)=>e in t?HT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,od=(t,e)=>{for(var n in e||(e={}))GT.call(e,n)&&Tw(t,n,e[n]);if(Sw)for(var n of Sw(e))KT.call(e,n)&&Tw(t,n,e[n]);return t},ad=(t,e)=>qT(t,VT(e));function Ia(t){return ad(od({},t),{level:(t==null?void 0:t.level)||jT.level})}function YT(t,e=Ul){return t[e]||""}function QT(t,e,n=Ul){return t[n]=e,t}function Fn(t,e=Ul){let n="";return typeof t.bindings>"u"?n=YT(t,e):n=t.bindings().context||"",n}function ZT(t,e,n=Ul){const r=Fn(t,n);return r.trim()?`${r}/${e}`:e}function un(t,e,n=Ul){const r=ZT(t,e,n),s=t.child({context:r});return QT(s,r,n)}function JT(t){var e,n;const r=new zT((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ll(ad(od({},t.opts),{level:"trace",browser:ad(od({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function XT(t){var e;const n=new WT((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ll(ad(od({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Og(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?JT(t):XT(t)}var ex=Object.defineProperty,tx=(t,e,n)=>e in t?ex(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xw=(t,e,n)=>tx(t,typeof e!="symbol"?e+"":e,n);let nx=class extends fo{constructor(e){super(),this.opts=e,xw(this,"protocol","wc"),xw(this,"version",2)}};var rx=Object.defineProperty,sx=(t,e,n)=>e in t?rx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ix=(t,e,n)=>sx(t,e+"",n);let ox=class extends fo{constructor(e,n){super(),this.core=e,this.logger=n,ix(this,"records",new Map)}},ax=class{constructor(e,n){this.logger=e,this.core=n}},cx=class extends fo{constructor(e,n){super(),this.relayer=e,this.logger=n}},lx=class extends fo{constructor(e){super()}},ux=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},dx=class extends fo{constructor(e,n){super(),this.relayer=e,this.logger=n}},hx=class extends fo{constructor(e,n){super(),this.core=e,this.logger=n}},fx=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},px=class{constructor(e,n){this.projectId=e,this.logger=n}},gx=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var mx=Object.defineProperty,wx=(t,e,n)=>e in t?mx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ow=(t,e,n)=>wx(t,typeof e!="symbol"?e+"":e,n);let yx=class{constructor(e){this.opts=e,Ow(this,"protocol","wc"),Ow(this,"version",2)}},bx=class{constructor(e){this.client=e}};function vx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function DE(t,...e){if(!vx(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Dw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ex(t,e){DE(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ao=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function _x(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function RE(t){return typeof t=="string"&&(t=_x(t)),DE(t),t}let Ax=class{clone(){return this._cloneInto()}};function Cx(t){const e=r=>t().update(RE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kE(t=32){if(Ao&&typeof Ao.getRandomValues=="function")return Ao.getRandomValues(new Uint8Array(t));if(Ao&&typeof Ao.randomBytes=="function")return Ao.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Ix(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Nx=class extends Ax{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Uh(this.buffer)}update(e){Dw(this);const{view:n,buffer:r,blockLen:s}=this;e=RE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Uh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dw(this),Ex(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ix(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Uh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const nu=BigInt(2**32-1),dp=BigInt(32);function PE(t,e=!1){return e?{h:Number(t&nu),l:Number(t>>dp&nu)}:{h:Number(t>>dp&nu)|0,l:Number(t&nu)|0}}function Sx(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=PE(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Tx=(t,e)=>BigInt(t>>>0)<<dp|BigInt(e>>>0),xx=(t,e,n)=>t>>>n,Ox=(t,e,n)=>t<<32-n|e>>>n,Dx=(t,e,n)=>t>>>n|e<<32-n,Rx=(t,e,n)=>t<<32-n|e>>>n,kx=(t,e,n)=>t<<64-n|e>>>n-32,Px=(t,e,n)=>t>>>n-32|e<<64-n,Mx=(t,e)=>e,Lx=(t,e)=>t,Ux=(t,e,n)=>t<<n|e>>>32-n,$x=(t,e,n)=>e<<n|t>>>32-n,Bx=(t,e,n)=>e<<n-32|t>>>64-n,jx=(t,e,n)=>t<<n-32|e>>>64-n;function Fx(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const zx=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Wx=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Hx=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qx=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Vx=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Gx=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Pe={fromBig:PE,split:Sx,toBig:Tx,shrSH:xx,shrSL:Ox,rotrSH:Dx,rotrSL:Rx,rotrBH:kx,rotrBL:Px,rotr32H:Mx,rotr32L:Lx,rotlSH:Ux,rotlSL:$x,rotlBH:Bx,rotlBL:jx,add:Fx,add3L:zx,add3H:Wx,add4L:Hx,add4H:qx,add5H:Gx,add5L:Vx},[Kx,Yx]=Pe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ps=new Uint32Array(80),Ms=new Uint32Array(80);let Qx=class extends Nx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let E=0;E<16;E++,n+=4)Ps[E]=e.getUint32(n),Ms[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const S=Ps[E-15]|0,O=Ms[E-15]|0,P=Pe.rotrSH(S,O,1)^Pe.rotrSH(S,O,8)^Pe.shrSH(S,O,7),$=Pe.rotrSL(S,O,1)^Pe.rotrSL(S,O,8)^Pe.shrSL(S,O,7),U=Ps[E-2]|0,T=Ms[E-2]|0,M=Pe.rotrSH(U,T,19)^Pe.rotrBH(U,T,61)^Pe.shrSH(U,T,6),R=Pe.rotrSL(U,T,19)^Pe.rotrBL(U,T,61)^Pe.shrSL(U,T,6),k=Pe.add4L($,R,Ms[E-7],Ms[E-16]),j=Pe.add4H(k,P,M,Ps[E-7],Ps[E-16]);Ps[E]=j|0,Ms[E]=k|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:y,Hh:b,Hl:C}=this;for(let E=0;E<80;E++){const S=Pe.rotrSH(d,f,14)^Pe.rotrSH(d,f,18)^Pe.rotrBH(d,f,41),O=Pe.rotrSL(d,f,14)^Pe.rotrSL(d,f,18)^Pe.rotrBL(d,f,41),P=d&h^~d&g,$=f&p^~f&y,U=Pe.add5L(C,O,$,Yx[E],Ms[E]),T=Pe.add5H(U,b,S,P,Kx[E],Ps[E]),M=U|0,R=Pe.rotrSH(r,s,28)^Pe.rotrBH(r,s,34)^Pe.rotrBH(r,s,39),k=Pe.rotrSL(r,s,28)^Pe.rotrBL(r,s,34)^Pe.rotrBL(r,s,39),j=r&i^r&a^i&a,D=s&o^s&c^o&c;b=g|0,C=y|0,g=h|0,y=p|0,h=d|0,p=f|0,{h:d,l:f}=Pe.add(l|0,u|0,T|0,M|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const m=Pe.add3L(M,k,D);r=Pe.add3H(m,T,R,j),s=m|0}({h:r,l:s}=Pe.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Pe.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Pe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Pe.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=Pe.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=Pe.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:y}=Pe.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:b,l:C}=Pe.add(this.Hh|0,this.Hl|0,b|0,C|0),this.set(r,s,i,o,a,c,l,u,d,f,h,p,g,y,b,C)}roundClean(){Ps.fill(0),Ms.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Zx=Cx(()=>new Qx);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dg=BigInt(0),ME=BigInt(1),Jx=BigInt(2);function Rg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kg(t){if(!Rg(t))throw new Error("Uint8Array expected")}function $h(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Xx=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pg(t){kg(t);let e="";for(let n=0;n<t.length;n++)e+=Xx[t[n]];return e}function LE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dg:BigInt("0x"+t)}const rs={_0:48,_9:57,A:65,F:70,a:97,f:102};function Rw(t){if(t>=rs._0&&t<=rs._9)return t-rs._0;if(t>=rs.A&&t<=rs.F)return t-(rs.A-10);if(t>=rs.a&&t<=rs.f)return t-(rs.a-10)}function UE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Rw(t.charCodeAt(i)),a=Rw(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function e2(t){return LE(Pg(t))}function Wu(t){return kg(t),LE(Pg(Uint8Array.from(t).reverse()))}function $E(t,e){return UE(t.toString(16).padStart(e*2,"0"))}function hp(t,e){return $E(t,e).reverse()}function ss(t,e,n){let r;if(typeof e=="string")try{r=UE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Rg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function kw(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kg(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Bh=t=>typeof t=="bigint"&&Dg<=t;function t2(t,e,n){return Bh(t)&&Bh(e)&&Bh(n)&&e<=t&&t<n}function Ha(t,e,n,r){if(!t2(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function n2(t){let e;for(e=0;t>Dg;t>>=ME,e+=1);return e}const r2=t=>(Jx<<BigInt(t-1))-ME,s2={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Rg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mg(t,e,n={}){const r=(s,i,o)=>{const a=s2[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Pw(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ft=BigInt(0),Et=BigInt(1),ki=BigInt(2),i2=BigInt(3),fp=BigInt(4),Mw=BigInt(5),Lw=BigInt(8);function Pt(t,e){const n=t%e;return n>=Ft?n:e+n}function o2(t,e,n){if(e<Ft)throw new Error("invalid exponent, negatives unsupported");if(n<=Ft)throw new Error("invalid modulus");if(n===Et)return Ft;let r=Et;for(;e>Ft;)e&Et&&(r=r*t%n),t=t*t%n,e>>=Et;return r}function Mr(t,e,n){let r=t;for(;e-- >Ft;)r*=r,r%=n;return r}function Uw(t,e){if(t===Ft)throw new Error("invert: expected non-zero number");if(e<=Ft)throw new Error("invert: expected positive modulus, got "+e);let n=Pt(t,e),r=e,s=Ft,i=Et;for(;n!==Ft;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Et)throw new Error("invert: does not exist");return Pt(s,e)}function a2(t){const e=(t-Et)/ki;let n,r,s;for(n=t-Et,r=0;n%ki===Ft;n/=ki,r++);for(s=ki;s<t&&o2(s,e,t)!==t-Et;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Et)/fp;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Et)/ki;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(l,Et<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function c2(t){if(t%fp===i2){const e=(t+Et)/fp;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Lw===Mw){const e=(t-Mw)/Lw;return function(n,r){const s=n.mul(r,ki),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ki),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return a2(t)}const l2=(t,e)=>(Pt(t,e)&Et)===Et,u2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function d2(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=u2.reduce((r,s)=>(r[s]="function",r),e);return Mg(t,n)}function h2(t,e,n){if(n<Ft)throw new Error("invalid exponent, negatives unsupported");if(n===Ft)return t.ONE;if(n===Et)return e;let r=t.ONE,s=e;for(;n>Ft;)n&Et&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Et;return r}function f2(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function BE(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function jE(t,e,n=!1,r={}){if(t<=Ft)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=BE(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:r2(s),ZERO:Ft,ONE:Et,create:c=>Pt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ft<=c&&c<t},is0:c=>c===Ft,isOdd:c=>(c&Et)===Et,neg:c=>Pt(-c,t),eql:(c,l)=>c===l,sqr:c=>Pt(c*c,t),add:(c,l)=>Pt(c+l,t),sub:(c,l)=>Pt(c-l,t),mul:(c,l)=>Pt(c*l,t),pow:(c,l)=>h2(a,c,l),div:(c,l)=>Pt(c*Uw(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Uw(c,t),sqrt:r.sqrt||(c=>(o||(o=c2(t)),o(a,c))),invertBatch:c=>f2(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?hp(c,i):$E(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Wu(c):e2(c)}});return Object.freeze(a)}const $w=BigInt(0),ru=BigInt(1);function jh(t,e){const n=e.negate();return t?n:e}function FE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Fh(t,e){FE(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function p2(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function g2(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zh=new WeakMap,zE=new WeakMap;function Wh(t){return zE.get(t)||1}function m2(t,e){return{constTimeNegate:jh,hasPrecomputes(n){return Wh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>$w;)r&ru&&(s=s.add(i)),i=i.double(),r>>=ru;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Fh(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Fh(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=ru);const g=h,y=h+Math.abs(p)-1,b=f%2!==0,C=p<0;p===0?c=c.add(jh(b,r[g])):a=a.add(jh(C,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Fh(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===$w)break;let h=Number(s&c);if(s>>=u,h>a&&(h-=l,s+=ru),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=zh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&zh.set(r,s(i))),i},wNAFCached(n,r,s){const i=Wh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Wh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){FE(r,e),zE.set(n,r),zh.delete(n)}}}function w2(t,e,n,r){if(p2(n,t),g2(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=n2(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[h])}let f=s;for(let h=c.length-1,p=s;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function y2(t){return d2(t.Fp),Mg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...BE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const br=BigInt(0),In=BigInt(1),su=BigInt(2),b2=BigInt(8),v2={zip215:!0};function E2(t){const e=y2(t);return Mg(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function _2(t){const e=E2(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=su<<BigInt(a*8)-In,u=n.create,d=jE(e.n,e.nBitLength),f=e.uvRatio||((m,w)=>{try{return{isValid:!0,value:n.sqrt(m*n.inv(w))}}catch{return{isValid:!1,value:br}}}),h=e.adjustScalarBytes||(m=>m),p=e.domain||((m,w,_)=>{if($h("phflag",_),w.length||_)throw new Error("Contexts/pre-hash are not supported");return m});function g(m,w){Ha("coordinate "+m,w,br,l)}function y(m){if(!(m instanceof E))throw new Error("ExtendedPoint expected")}const b=Pw((m,w)=>{const{ex:_,ey:A,ez:I}=m,x=m.is0();w==null&&(w=x?b2:n.inv(I));const L=u(_*w),F=u(A*w),V=u(I*w);if(x)return{x:br,y:In};if(V!==In)throw new Error("invZ was invalid");return{x:L,y:F}}),C=Pw(m=>{const{a:w,d:_}=e;if(m.is0())throw new Error("bad point: ZERO");const{ex:A,ey:I,ez:x,et:L}=m,F=u(A*A),V=u(I*I),q=u(x*x),z=u(q*q),J=u(F*w),me=u(q*u(J+V)),Ie=u(z+u(_*u(F*V)));if(me!==Ie)throw new Error("bad point: equation left != right (1)");const pe=u(A*I),xe=u(x*L);if(pe!==xe)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(w,_,A,I){this.ex=w,this.ey=_,this.ez=A,this.et=I,g("x",w),g("y",_),g("z",A),g("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof E)throw new Error("extended point not allowed");const{x:_,y:A}=w||{};return g("x",_),g("y",A),new E(_,A,In,u(_*A))}static normalizeZ(w){const _=n.invertBatch(w.map(A=>A.ez));return w.map((A,I)=>A.toAffine(_[I])).map(E.fromAffine)}static msm(w,_){return w2(E,d,w,_)}_setWindowSize(w){P.setWindowSize(this,w)}assertValidity(){C(this)}equals(w){y(w);const{ex:_,ey:A,ez:I}=this,{ex:x,ey:L,ez:F}=w,V=u(_*F),q=u(x*I),z=u(A*F),J=u(L*I);return V===q&&z===J}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:w}=e,{ex:_,ey:A,ez:I}=this,x=u(_*_),L=u(A*A),F=u(su*u(I*I)),V=u(w*x),q=_+A,z=u(u(q*q)-x-L),J=V+L,me=J-F,Ie=V-L,pe=u(z*me),xe=u(J*Ie),Ze=u(z*Ie),xt=u(me*J);return new E(pe,xe,xt,Ze)}add(w){y(w);const{a:_,d:A}=e,{ex:I,ey:x,ez:L,et:F}=this,{ex:V,ey:q,ez:z,et:J}=w;if(_===BigInt(-1)){const Fm=u((x-I)*(q+V)),zm=u((x+I)*(q-V)),_h=u(zm-Fm);if(_h===br)return this.double();const Wm=u(L*su*J),Hm=u(F*su*z),qm=Hm+Wm,Vm=zm+Fm,Gm=Hm-Wm,aI=u(qm*_h),cI=u(Vm*Gm),lI=u(qm*Gm),uI=u(_h*Vm);return new E(aI,cI,uI,lI)}const me=u(I*V),Ie=u(x*q),pe=u(F*A*J),xe=u(L*z),Ze=u((I+x)*(V+q)-me-Ie),xt=xe-pe,Wt=xe+pe,Jn=u(Ie-_*me),es=u(Ze*xt),Os=u(Wt*Jn),iI=u(Ze*Jn),oI=u(xt*Wt);return new E(es,Os,oI,iI)}subtract(w){return this.add(w.negate())}wNAF(w){return P.wNAFCached(this,w,E.normalizeZ)}multiply(w){const _=w;Ha("scalar",_,In,r);const{p:A,f:I}=this.wNAF(_);return E.normalizeZ([A,I])[0]}multiplyUnsafe(w,_=E.ZERO){const A=w;return Ha("scalar",A,br,r),A===br?O:this.is0()||A===In?this:P.wNAFCachedUnsafe(this,A,E.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,r).is0()}toAffine(w){return b(this,w)}clearCofactor(){const{h:w}=e;return w===In?this:this.multiplyUnsafe(w)}static fromHex(w,_=!1){const{d:A,a:I}=e,x=n.BYTES;w=ss("pointHex",w,x),$h("zip215",_);const L=w.slice(),F=w[x-1];L[x-1]=F&-129;const V=Wu(L),q=_?l:n.ORDER;Ha("pointHex.y",V,br,q);const z=u(V*V),J=u(z-In),me=u(A*z-I);let{isValid:Ie,value:pe}=f(J,me);if(!Ie)throw new Error("Point.fromHex: invalid y coordinate");const xe=(pe&In)===In,Ze=(F&128)!==0;if(!_&&pe===br&&Ze)throw new Error("Point.fromHex: x=0 and x_0=1");return Ze!==xe&&(pe=u(-pe)),E.fromAffine({x:pe,y:V})}static fromPrivateKey(w){return T(w).point}toRawBytes(){const{x:w,y:_}=this.toAffine(),A=hp(_,n.BYTES);return A[A.length-1]|=w&In?128:0,A}toHex(){return Pg(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,In,u(e.Gx*e.Gy)),E.ZERO=new E(br,In,In,br);const{BASE:S,ZERO:O}=E,P=m2(E,a*8);function $(m){return Pt(m,r)}function U(m){return $(Wu(m))}function T(m){const w=n.BYTES;m=ss("private key",m,w);const _=ss("hashed private key",i(m),2*w),A=h(_.slice(0,w)),I=_.slice(w,2*w),x=U(A),L=S.multiply(x),F=L.toRawBytes();return{head:A,prefix:I,scalar:x,point:L,pointBytes:F}}function M(m){return T(m).pointBytes}function R(m=new Uint8Array,...w){const _=kw(...w);return U(i(p(_,ss("context",m),!!s)))}function k(m,w,_={}){m=ss("message",m),s&&(m=s(m));const{prefix:A,scalar:I,pointBytes:x}=T(w),L=R(_.context,A,m),F=S.multiply(L).toRawBytes(),V=R(_.context,F,x,m),q=$(L+V*I);Ha("signature.s",q,br,r);const z=kw(F,hp(q,n.BYTES));return ss("result",z,n.BYTES*2)}const j=v2;function D(m,w,_,A=j){const{context:I,zip215:x}=A,L=n.BYTES;m=ss("signature",m,2*L),w=ss("message",w),_=ss("publicKey",_,L),x!==void 0&&$h("zip215",x),s&&(w=s(w));const F=Wu(m.slice(L,2*L));let V,q,z;try{V=E.fromHex(_,x),q=E.fromHex(m.slice(0,L),x),z=S.multiplyUnsafe(F)}catch{return!1}if(!x&&V.isSmallOrder())return!1;const J=R(I,q.toRawBytes(),V.toRawBytes(),w);return q.add(V.multiplyUnsafe(J)).subtract(z).clearCofactor().equals(E.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:k,verify:D,ExtendedPoint:E,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>o(n.BYTES),precompute(m=8,w=E.BASE){return w._setWindowSize(m),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const Lg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Bw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const A2=BigInt(1),jw=BigInt(2);BigInt(3);const C2=BigInt(5),I2=BigInt(8);function N2(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Lg,o=t*t%i*t%i,a=Mr(o,jw,i)*o%i,c=Mr(a,A2,i)*t%i,l=Mr(c,C2,i)*c%i,u=Mr(l,e,i)*l%i,d=Mr(u,n,i)*u%i,f=Mr(d,r,i)*d%i,h=Mr(f,s,i)*f%i,p=Mr(h,s,i)*f%i,g=Mr(p,e,i)*l%i;return{pow_p_5_8:Mr(g,jw,i)*t%i,b2:o}}function S2(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function T2(t,e){const n=Lg,r=Pt(e*e*e,n),s=Pt(r*r*e,n),i=N2(t*s).pow_p_5_8;let o=Pt(t*r*i,n);const a=Pt(e*o*o,n),c=o,l=Pt(o*Bw,n),u=a===t,d=a===Pt(-t,n),f=a===Pt(-t*Bw,n);return u&&(o=c),(d||f)&&(o=l),l2(o,n)&&(o=Pt(-o,n)),{isValid:u||d,value:o}}const x2=jE(Lg,void 0,!0),O2={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:x2,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:I2,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Zx,randomBytes:kE,adjustScalarBytes:S2,uvRatio:T2},WE=_2(O2),D2="EdDSA",R2="JWT",cd=".",Hd="base64url",HE="utf8",qE="utf8",k2=":",P2="did",M2="key",Fw="base58btc",L2="z",U2="K36",$2=32;function Ug(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function VE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ug(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function GE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=VE(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Ug(n)}function B2(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,C=p.length;b!==C&&p[b]===0;)b++,g++;for(var E=(C-b)*u+1>>>0,S=new Uint8Array(E);b!==C;){for(var O=p[b],P=0,$=E-1;(O!==0||P<y)&&$!==-1;$--,P++)O+=256*S[$]>>>0,S[$]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");y=P,b++}for(var U=E-y;U!==E&&S[U]===0;)U++;for(var T=c.repeat(g);U<E;++U)T+=t.charAt(S[U]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var C=(p.length-g)*l+1>>>0,E=new Uint8Array(C);p[g];){var S=n[p.charCodeAt(g)];if(S===255)return;for(var O=0,P=C-1;(S!==0||O<b)&&P!==-1;P--,O++)S+=a*E[P]>>>0,E[P]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=O,g++}if(p[g]!==" "){for(var $=C-b;$!==C&&E[$]===0;)$++;for(var U=new Uint8Array(y+(C-$)),T=y;$!==C;)U[T++]=E[$++];return U}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var j2=B2,F2=j2;const KE=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},z2=t=>new TextEncoder().encode(t),W2=t=>new TextDecoder().decode(t);let H2=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},q2=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YE(this,e)}},V2=class{constructor(e){this.decoders=e}or(e){return YE(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const YE=(t,e)=>new V2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let G2=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new H2(e,n,r),this.decoder=new q2(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const qd=({name:t,prefix:e,encode:n,decode:r})=>new G2(t,e,n,r),$l=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=F2(n,e);return qd({prefix:t,name:e,encode:r,decode:i=>KE(s(i))})},K2=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Y2=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>qd({prefix:e,name:t,encode(s){return Y2(s,r,n)},decode(s){return K2(s,r,n,t)}}),Q2=qd({prefix:"\0",name:"identity",encode:t=>W2(t),decode:t=>z2(t)});var Z2=Object.freeze({__proto__:null,identity:Q2});const J2=Zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var X2=Object.freeze({__proto__:null,base2:J2});const eO=Zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var tO=Object.freeze({__proto__:null,base8:eO});const nO=$l({prefix:"9",name:"base10",alphabet:"0123456789"});var rO=Object.freeze({__proto__:null,base10:nO});const sO=Zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iO=Zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var oO=Object.freeze({__proto__:null,base16:sO,base16upper:iO});const aO=Zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cO=Zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lO=Zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uO=Zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dO=Zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hO=Zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fO=Zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pO=Zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gO=Zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var mO=Object.freeze({__proto__:null,base32:aO,base32upper:cO,base32pad:lO,base32padupper:uO,base32hex:dO,base32hexupper:hO,base32hexpad:fO,base32hexpadupper:pO,base32z:gO});const wO=$l({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yO=$l({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bO=Object.freeze({__proto__:null,base36:wO,base36upper:yO});const vO=$l({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),EO=$l({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _O=Object.freeze({__proto__:null,base58btc:vO,base58flickr:EO});const AO=Zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),CO=Zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),IO=Zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),NO=Zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var SO=Object.freeze({__proto__:null,base64:AO,base64pad:CO,base64url:IO,base64urlpad:NO});const QE=Array.from(""),TO=QE.reduce((t,e,n)=>(t[n]=e,t),[]),xO=QE.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function OO(t){return t.reduce((e,n)=>(e+=TO[n],e),"")}function DO(t){const e=[];for(const n of t){const r=xO[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const RO=qd({prefix:"",name:"base256emoji",encode:OO,decode:DO});var kO=Object.freeze({__proto__:null,base256emoji:RO}),PO=ZE,zw=128,MO=-128,LO=Math.pow(2,31);function ZE(t,e,n){e=e||[],n=n||0;for(var r=n;t>=LO;)e[n++]=t&255|zw,t/=128;for(;t&MO;)e[n++]=t&255|zw,t>>>=7;return e[n]=t|0,ZE.bytes=n-r+1,e}var UO=pp,$O=128,Ww=127;function pp(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw pp.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Ww)<<s:(o&Ww)*Math.pow(2,s),s+=7}while(o>=$O);return pp.bytes=i-r,n}var BO=Math.pow(2,7),jO=Math.pow(2,14),FO=Math.pow(2,21),zO=Math.pow(2,28),WO=Math.pow(2,35),HO=Math.pow(2,42),qO=Math.pow(2,49),VO=Math.pow(2,56),GO=Math.pow(2,63),KO=function(t){return t<BO?1:t<jO?2:t<FO?3:t<zO?4:t<WO?5:t<HO?6:t<qO?7:t<VO?8:t<GO?9:10},YO={encode:PO,decode:UO,encodingLength:KO},JE=YO;const Hw=(t,e,n=0)=>(JE.encode(t,e,n),e),qw=t=>JE.encodingLength(t),gp=(t,e)=>{const n=e.byteLength,r=qw(t),s=r+qw(n),i=new Uint8Array(s+n);return Hw(t,i,0),Hw(n,i,r),i.set(e,s),new QO(t,n,e,i)};let QO=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const XE=({name:t,code:e,encode:n})=>new ZO(t,e,n);let ZO=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?gp(this.code,n):n.then(r=>gp(this.code,r))}else throw Error("Unknown type, must be binary type")}};const e_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),JO=XE({name:"sha2-256",code:18,encode:e_("SHA-256")}),XO=XE({name:"sha2-512",code:19,encode:e_("SHA-512")});var eD=Object.freeze({__proto__:null,sha256:JO,sha512:XO});const t_=0,tD="identity",n_=KE,nD=t=>gp(t_,n_(t)),rD={code:t_,name:tD,encode:n_,digest:nD};var sD=Object.freeze({__proto__:null,identity:rD});new TextEncoder,new TextDecoder;const Vw={...Z2,...X2,...tO,...rO,...oO,...mO,...bO,..._O,...SO,...kO};({...eD,...sD});function r_(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Gw=r_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Hh=r_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=VE(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),s_={utf8:Gw,"utf-8":Gw,hex:Vw.base16,latin1:Hh,ascii:Hh,binary:Hh,...Vw};function Vd(t,e="utf8"){const n=s_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Na(t,e="utf8"){const n=s_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ug(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Kw(t){return eo(Vd(Na(t,Hd),HE))}function ld(t){return Vd(Na(Ns(t),HE),Hd)}function i_(t){const e=Na(U2,Fw),n=L2+Vd(GE([e,t]),Fw);return[P2,M2,n].join(k2)}function iD(t){return Vd(t,Hd)}function oD(t){return Na(t,Hd)}function aD(t){return Na([ld(t.header),ld(t.payload)].join(cd),qE)}function cD(t){return[ld(t.header),ld(t.payload),iD(t.signature)].join(cd)}function mp(t){const e=t.split(cd),n=Kw(e[0]),r=Kw(e[1]),s=oD(e[2]),i=Na(e.slice(0,2).join(cd),qE);return{header:n,payload:r,signature:s,data:i}}function Yw(t=kE($2)){const e=WE.getPublicKey(t);return{secretKey:GE([t,e]),publicKey:e}}async function lD(t,e,n,r,s=ee.fromMiliseconds(Date.now())){const i={alg:D2,typ:R2},o=i_(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=aD({header:i,payload:c}),u=WE.sign(l,r.secretKey.slice(0,32));return cD({header:i,payload:c,signature:u})}var Qw=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},uD=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),dD=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),hD=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),fD=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),pD=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),gD=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mD=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Zw=3,wD=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gD]],Jw=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yD(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new pD:typeof navigator<"u"?vD(navigator.userAgent):_D()}function bD(t){return t!==""&&wD.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function vD(t){var e=bD(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new fD;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Zw&&(s=Qw(Qw([],s,!0),AD(Zw-s.length),!0)):s=[];var i=s.join("."),o=ED(t),a=mD.exec(t);return a&&a[1]?new hD(n,i,o,a[1]):new uD(n,i,o)}function ED(t){for(var e=0,n=Jw.length;e<n;e++){var r=Jw[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function _D(){var t=typeof process<"u"&&process.version;return t?new dD(process.version.slice(1)):null}function AD(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=o_=lt.getLocation=lt.getLocationOrThrow=$g=lt.getNavigator=lt.getNavigatorOrThrow=to=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function mo(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}lt.getFromWindow=mo;function Sa(t){const e=mo(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}lt.getFromWindowOrThrow=Sa;function CD(){return Sa("document")}lt.getDocumentOrThrow=CD;function ID(){return mo("document")}var to=lt.getDocument=ID;function ND(){return Sa("navigator")}lt.getNavigatorOrThrow=ND;function SD(){return mo("navigator")}var $g=lt.getNavigator=SD;function TD(){return Sa("location")}lt.getLocationOrThrow=TD;function xD(){return mo("location")}var o_=lt.getLocation=xD;function OD(){return Sa("crypto")}lt.getCryptoOrThrow=OD;function DD(){return mo("crypto")}lt.getCrypto=DD;function RD(){return Sa("localStorage")}lt.getLocalStorageOrThrow=RD;function kD(){return mo("localStorage")}lt.getLocalStorage=kD;var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});var a_=Bg.getWindowMetadata=void 0;const Xw=lt;function PD(){let t,e;try{t=Xw.getDocumentOrThrow(),e=Xw.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),f=[];for(let h=0;h<d.length;h++){const p=d[h],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let b=e.protocol+"//"+e.host;if(y.indexOf("/")===0)b+=y;else{const C=e.pathname.split("/");C.pop();const E=C.join("/");b+=E+"/"+y}f.push(b)}else if(y.indexOf("//")===0){const b=e.protocol+y;f.push(b)}else f.push(y)}}return f}function r(...d){const f=t.getElementsByTagName("meta");for(let h=0;h<f.length;h++){const p=f[h],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}a_=Bg.getWindowMetadata=PD;function jc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function wp(t){return jc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const c_="2.31.0";let qa={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${c_}`},Gd=class yp extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof yp?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof yp&&n.cause.docsPath||n.docsPath,i=(a=qa.getDocsUrl)==null?void 0:a.call(qa,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...qa.version?[`Version: ${qa.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=c_}walk(e){return l_(this,e)}};function l_(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?l_(t.cause,e):e?null:t}let u_=class extends Gd{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function Ta(t,{dir:e,size:n=32}={}){return typeof t=="string"?MD(t,{dir:e,size:n}):LD(t,{dir:e,size:n})}function MD(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new u_({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function LD(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new u_({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let UD=class extends Gd{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},$D=class extends Gd{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function xa(t,{size:e}){if(wp(t)>e)throw new $D({givenSize:wp(t),maxSize:e})}function bp(t,e={}){const{signed:n}=e;e.size&&xa(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function BD(t,e={}){return Number(bp(t,e))}const jD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vp(t,e={}){return typeof t=="number"||typeof t=="bigint"?h_(t,e):typeof t=="string"?WD(t,e):typeof t=="boolean"?FD(t,e):d_(t,e)}function FD(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(xa(n,{size:e.size}),Ta(n,{size:e.size})):n}function d_(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=jD[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(xa(r,{size:e.size}),Ta(r,{dir:"right",size:e.size})):r}function h_(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new UD({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ta(a,{size:r}):a}const zD=new TextEncoder;function WD(t,e={}){const n=zD.encode(t);return d_(n,e)}const HD=new TextEncoder;function qD(t,e={}){return typeof t=="number"||typeof t=="bigint"?GD(t,e):typeof t=="boolean"?VD(t,e):jc(t)?f_(t,e):p_(t,e)}function VD(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(xa(n,{size:e.size}),Ta(n,{size:e.size})):n}const is={zero:48,nine:57,A:65,F:70,a:97,f:102};function ey(t){if(t>=is.zero&&t<=is.nine)return t-is.zero;if(t>=is.A&&t<=is.F)return t-(is.A-10);if(t>=is.a&&t<=is.f)return t-(is.a-10)}function f_(t,e={}){let n=t;e.size&&(xa(n,{size:e.size}),n=Ta(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=ey(r.charCodeAt(a++)),l=ey(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Gd(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function GD(t,e){const n=h_(t,e);return f_(n)}function p_(t,e={}){const n=HD.encode(t);return typeof e.size=="number"?(xa(n,{size:e.size}),Ta(n,{dir:"right",size:e.size})):n}const iu=BigInt(2**32-1),ty=BigInt(32);function KD(t,e=!1){return e?{h:Number(t&iu),l:Number(t>>ty&iu)}:{h:Number(t>>ty&iu)|0,l:Number(t&iu)|0}}function YD(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=KD(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const QD=(t,e,n)=>t<<n|e>>>32-n,ZD=(t,e,n)=>e<<n|t>>>32-n,JD=(t,e,n)=>e<<n-32|t>>>64-n,XD=(t,e,n)=>t<<n-32|e>>>64-n,Co=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function eR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function no(t,...e){if(!eR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fc(t.outputLen),Fc(t.blockLen)}function aa(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function g_(t,e){no(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function nR(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ca(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lr(t,e){return t<<32-e|t>>>e}const rR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sR(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function iR(t){for(let e=0;e<t.length;e++)t[e]=sR(t[e]);return t}const ny=rR?t=>t:iR;function oR(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Kd(t){return typeof t=="string"&&(t=oR(t)),no(t),t}function aR(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];no(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class jg{}function m_(t){const e=r=>t().update(Kd(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cR(t=32){if(Co&&typeof Co.getRandomValues=="function")return Co.getRandomValues(new Uint8Array(t));if(Co&&typeof Co.randomBytes=="function")return Uint8Array.from(Co.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const lR=BigInt(0),Va=BigInt(1),uR=BigInt(2),dR=BigInt(7),hR=BigInt(256),fR=BigInt(113),w_=[],y_=[],b_=[];for(let t=0,e=Va,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],w_.push(2*(5*r+n)),y_.push((t+1)*(t+2)/2%64);let s=lR;for(let i=0;i<7;i++)e=(e<<Va^(e>>dR)*fR)%hR,e&uR&&(s^=Va<<(Va<<BigInt(i))-Va);b_.push(s)}const v_=YD(b_,!0),pR=v_[0],gR=v_[1],ry=(t,e,n)=>n>32?JD(t,e,n):QD(t,e,n),sy=(t,e,n)=>n>32?XD(t,e,n):ZD(t,e,n);function mR(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=ry(l,u,1)^n[a],f=sy(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=y_[o],c=ry(s,i,a),l=sy(s,i,a),u=w_[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=pR[r],t[1]^=gR[r]}ca(n)}class Fg extends jg{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Fc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nR(this.state)}clone(){return this._cloneInto()}keccak(){ny(this.state32),mR(this.state32,this.rounds),ny(this.state32),this.posOut=0,this.pos=0}update(e){aa(this),e=Kd(e),no(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){aa(this,!1),no(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(g_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ca(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Fg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const wR=(t,e,n)=>m_(()=>new Fg(e,t,n)),yR=wR(1,136,256/8);function E_(t,e){const n=e||"hex",r=yR(jc(t,{strict:!1})?qD(t):t);return n==="bytes"?r:vp(r)}let bR=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Vh=new bR(8192);function vR(t,e){if(Vh.has(`${t}.${e}`))return Vh.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=E_(p_(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Vh.set(`${t}.${e}`,i),i}function ER(t){const e=E_(`0x${t.substring(4)}`).substring(26);return vR(`0x${e}`)}async function _R({hash:t,signature:e}){const n=jc(t)?t:vp(t),{secp256k1:r}=await hn(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>ik);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:f}=e,h=Number(f??d),p=iy(h);return new r.Signature(bp(l),bp(u)).addRecoveryBit(p)}const o=jc(e)?e:vp(e);if(wp(o)!==65)throw new Error("invalid signature length");const a=BD(`0x${o.slice(130)}`),c=iy(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function iy(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function AR({hash:t,signature:e}){return ER(await _R({hash:t,signature:e}))}function CR(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function IR(t,e,n){return t&e^~t&n}function NR(t,e,n){return t&e^t&n^e&n}class SR extends jg{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=qh(this.buffer)}update(e){aa(this),e=Kd(e),no(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aa(this),g_(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ca(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;CR(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Ls=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),TR=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Us=new Uint32Array(64);class xR extends SR{constructor(e=32){super(64,e,8,!1),this.A=Ls[0]|0,this.B=Ls[1]|0,this.C=Ls[2]|0,this.D=Ls[3]|0,this.E=Ls[4]|0,this.F=Ls[5]|0,this.G=Ls[6]|0,this.H=Ls[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Us[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Us[d-15],h=Us[d-2],p=Lr(f,7)^Lr(f,18)^f>>>3,g=Lr(h,17)^Lr(h,19)^h>>>10;Us[d]=g+Us[d-7]+p+Us[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Lr(a,6)^Lr(a,11)^Lr(a,25),h=u+f+IR(a,c,l)+TR[d]+Us[d]|0,g=(Lr(r,2)^Lr(r,13)^Lr(r,22))+NR(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ca(Us)}destroy(){this.set(0,0,0,0,0,0,0,0),ca(this.buffer)}}const OR=m_(()=>new xR);class __ extends jg{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,tR(e);const r=Kd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ca(i)}update(e){return aa(this),this.iHash.update(e),this}digestInto(e){aa(this),no(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const A_=(t,e,n)=>new __(t,e).update(n).digest();A_.create=(t,e)=>new __(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zg=BigInt(0),Ep=BigInt(1);function Bl(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Wg(t){if(!Bl(t))throw new Error("Uint8Array expected")}function zc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function ou(t){const e=t.toString(16);return e.length&1?"0"+e:e}function C_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?zg:BigInt("0x"+t)}const I_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",DR=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Wc(t){if(Wg(t),I_)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=DR[t[n]];return e}const os={_0:48,_9:57,A:65,F:70,a:97,f:102};function oy(t){if(t>=os._0&&t<=os._9)return t-os._0;if(t>=os.A&&t<=os.F)return t-(os.A-10);if(t>=os.a&&t<=os.f)return t-(os.a-10)}function ud(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(I_)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=oy(t.charCodeAt(i)),a=oy(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Vi(t){return C_(Wc(t))}function N_(t){return Wg(t),C_(Wc(Uint8Array.from(t).reverse()))}function jl(t,e){return ud(t.toString(16).padStart(e*2,"0"))}function S_(t,e){return jl(t,e).reverse()}function or(t,e,n){let r;if(typeof e=="string")try{r=ud(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Bl(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function dd(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Wg(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Gh=t=>typeof t=="bigint"&&zg<=t;function Hg(t,e,n){return Gh(t)&&Gh(e)&&Gh(n)&&e<=t&&t<n}function ta(t,e,n,r){if(!Hg(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function RR(t){let e;for(e=0;t>zg;t>>=Ep,e+=1);return e}const Yd=t=>(Ep<<BigInt(t))-Ep,Kh=t=>new Uint8Array(t),ay=t=>Uint8Array.from(t);function kR(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Kh(t),s=Kh(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=Kh(0))=>{s=a(ay([0]),d),r=a(),d.length!==0&&(s=a(ay([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return dd(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(l()));)c();return o(),h}}const PR={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bl(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Qd(t,e,n={}){const r=(s,i,o)=>{const a=PR[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function cy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Un=BigInt(0),mn=BigInt(1),$i=BigInt(2),MR=BigInt(3),T_=BigInt(4),x_=BigInt(5),O_=BigInt(8);function Rn(t,e){const n=t%e;return n>=Un?n:e+n}function er(t,e,n){let r=t;for(;e-- >Un;)r*=r,r%=n;return r}function _p(t,e){if(t===Un)throw new Error("invert: expected non-zero number");if(e<=Un)throw new Error("invert: expected positive modulus, got "+e);let n=Rn(t,e),r=e,s=Un,i=mn;for(;n!==Un;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==mn)throw new Error("invert: does not exist");return Rn(s,e)}function D_(t,e){const n=(t.ORDER+mn)/T_,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function LR(t,e){const n=(t.ORDER-x_)/O_,r=t.mul(e,$i),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,$i),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function UR(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-mn,n=0;for(;e%$i===Un;)e/=$i,n++;let r=$i;const s=qg(t);for(;ly(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return D_;let i=s.pow(r,e);const o=(e+mn)/$i;return function(c,l){if(c.is0(l))return l;if(ly(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),f=c.pow(l,e),h=c.pow(l,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let p=1,g=c.sqr(f);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=mn<<BigInt(u-p-1),b=c.pow(d,y);u=p,d=c.sqr(b),f=c.mul(f,d),h=c.mul(h,b)}return h}}function $R(t){return t%T_===MR?D_:t%O_===x_?LR:UR(t)}const BR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jR(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=BR.reduce((r,s)=>(r[s]="function",r),e);return Qd(t,n)}function FR(t,e,n){if(n<Un)throw new Error("invalid exponent, negatives unsupported");if(n===Un)return t.ONE;if(n===mn)return e;let r=t.ONE,s=e;for(;n>Un;)n&mn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=mn;return r}function R_(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function ly(t,e){const n=(t.ORDER-mn)/$i,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function k_(t,e){e!==void 0&&Fc(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function qg(t,e,n=!1,r={}){if(t<=Un)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=k_(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Yd(s),ZERO:Un,ONE:mn,create:c=>Rn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Un<=c&&c<t},is0:c=>c===Un,isOdd:c=>(c&mn)===mn,neg:c=>Rn(-c,t),eql:(c,l)=>c===l,sqr:c=>Rn(c*c,t),add:(c,l)=>Rn(c+l,t),sub:(c,l)=>Rn(c-l,t),mul:(c,l)=>Rn(c*l,t),pow:(c,l)=>FR(a,c,l),div:(c,l)=>Rn(c*_p(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_p(c,t),sqrt:r.sqrt||(c=>(o||(o=$R(t)),o(a,c))),toBytes:c=>n?S_(c,i):jl(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?N_(c):Vi(c)},invertBatch:c=>R_(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function P_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function M_(t){const e=P_(t);return e+Math.ceil(e/2)}function zR(t,e,n=!1){const r=t.length,s=P_(e),i=M_(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?N_(t):Vi(t),a=Rn(o,e-mn)+mn;return n?S_(a,s):jl(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uy=BigInt(0),Ap=BigInt(1);function Yh(t,e){const n=e.negate();return t?n:e}function L_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Qh(t,e){L_(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Yd(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function dy(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ap);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function WR(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function HR(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Zh=new WeakMap,U_=new WeakMap;function Jh(t){return U_.get(t)||1}function qR(t,e){return{constTimeNegate:Yh,hasPrecomputes(n){return Jh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>uy;)r&Ap&&(s=s.add(i)),i=i.double(),r>>=Ap;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Qh(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Qh(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:p}=dy(s,c,a);s=l,d?o=o.add(Yh(h,r[p])):i=i.add(Yh(f,r[u]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Qh(n,e);for(let a=0;a<o.windows&&s!==uy;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=dy(s,a,o);if(s=c,!u){const f=r[l];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=Zh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Zh.set(r,s(i))),i},wNAFCached(n,r,s){const i=Jh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Jh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){L_(r,e),U_.set(n,r),Zh.delete(n)}}}function VR(t,e,n,r){WR(n,t),HR(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=RR(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Yd(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],b=Number(y>>BigInt(h)&l);u[b]=u[b].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(f=f.add(p),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function $_(t){return jR(t.Fp),Qd(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...k_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hy(t){t.lowS!==void 0&&zc("lowS",t.lowS),t.prehash!==void 0&&zc("prehash",t.prehash)}function GR(t){const e=$_(t);Qd(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class KR extends Error{constructor(e=""){super(e)}}const gs={Err:KR,_tlv:{encode:(t,e)=>{const{Err:n}=gs;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=ou(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?ou(s.length/2|128):"";return ou(t)+i+s+e},decode(t,e){const{Err:n}=gs;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gs;if(t<bs)throw new e("integer: negative integers are not allowed");let n=ou(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Vi(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gs,s=or("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gs,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Xh(t,e){return Wc(jl(t,e))}const bs=BigInt(0),$t=BigInt(1);BigInt(2);const ef=BigInt(3),YR=BigInt(4);function QR(t){const e=GR(t),{Fp:n}=e,r=qg(e.n,e.nBitLength),s=e.toBytes||((E,S,O)=>{const P=S.toAffine();return dd(Uint8Array.from([4]),n.toBytes(P.x),n.toBytes(P.y))}),i=e.fromBytes||(E=>{const S=E.subarray(1),O=n.fromBytes(S.subarray(0,n.BYTES)),P=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:O,y:P}});function o(E){const{a:S,b:O}=e,P=n.sqr(E),$=n.mul(P,E);return n.add(n.add($,n.mul(E,S)),O)}function a(E,S){const O=n.sqr(S),P=o(E);return n.eql(O,P)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,ef),YR),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(E){return Hg(E,$t,e.n)}function d(E){const{allowedPrivateKeyLengths:S,nByteLength:O,wrapPrivateKey:P,n:$}=e;if(S&&typeof E!="bigint"){if(Bl(E)&&(E=Wc(E)),typeof E!="string"||!S.includes(E.length))throw new Error("invalid private key");E=E.padStart(O*2,"0")}let U;try{U=typeof E=="bigint"?E:Vi(or("private key",E,O))}catch{throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof E)}return P&&(U=Rn(U,$)),ta("private key",U,$t,$),U}function f(E){if(!(E instanceof g))throw new Error("ProjectivePoint expected")}const h=cy((E,S)=>{const{px:O,py:P,pz:$}=E;if(n.eql($,n.ONE))return{x:O,y:P};const U=E.is0();S==null&&(S=U?n.ONE:n.inv($));const T=n.mul(O,S),M=n.mul(P,S),R=n.mul($,S);if(U)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:T,y:M}}),p=cy(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=E.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not FE");if(!a(S,O))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(S,O,P){if(S==null||!n.isValid(S))throw new Error("x required");if(O==null||!n.isValid(O)||n.is0(O))throw new Error("y required");if(P==null||!n.isValid(P))throw new Error("z required");this.px=S,this.py=O,this.pz=P,Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof g)throw new Error("projective point not allowed");const $=U=>n.eql(U,n.ZERO);return $(O)&&$(P)?g.ZERO:new g(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){const O=R_(n,S.map(P=>P.pz));return S.map((P,$)=>P.toAffine(O[$])).map(g.fromAffine)}static fromHex(S){const O=g.fromAffine(i(or("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){return g.BASE.multiply(d(S))}static msm(S,O){return VR(g,r,S,O)}_setWindowSize(S){C.setWindowSize(this,S)}assertValidity(){p(this)}hasEvenY(){const{y:S}=this.toAffine();if(n.isOdd)return!n.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){f(S);const{px:O,py:P,pz:$}=this,{px:U,py:T,pz:M}=S,R=n.eql(n.mul(O,M),n.mul(U,$)),k=n.eql(n.mul(P,M),n.mul(T,$));return R&&k}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=e,P=n.mul(O,ef),{px:$,py:U,pz:T}=this;let M=n.ZERO,R=n.ZERO,k=n.ZERO,j=n.mul($,$),D=n.mul(U,U),m=n.mul(T,T),w=n.mul($,U);return w=n.add(w,w),k=n.mul($,T),k=n.add(k,k),M=n.mul(S,k),R=n.mul(P,m),R=n.add(M,R),M=n.sub(D,R),R=n.add(D,R),R=n.mul(M,R),M=n.mul(w,M),k=n.mul(P,k),m=n.mul(S,m),w=n.sub(j,m),w=n.mul(S,w),w=n.add(w,k),k=n.add(j,j),j=n.add(k,j),j=n.add(j,m),j=n.mul(j,w),R=n.add(R,j),m=n.mul(U,T),m=n.add(m,m),j=n.mul(m,w),M=n.sub(M,j),k=n.mul(m,D),k=n.add(k,k),k=n.add(k,k),new g(M,R,k)}add(S){f(S);const{px:O,py:P,pz:$}=this,{px:U,py:T,pz:M}=S;let R=n.ZERO,k=n.ZERO,j=n.ZERO;const D=e.a,m=n.mul(e.b,ef);let w=n.mul(O,U),_=n.mul(P,T),A=n.mul($,M),I=n.add(O,P),x=n.add(U,T);I=n.mul(I,x),x=n.add(w,_),I=n.sub(I,x),x=n.add(O,$);let L=n.add(U,M);return x=n.mul(x,L),L=n.add(w,A),x=n.sub(x,L),L=n.add(P,$),R=n.add(T,M),L=n.mul(L,R),R=n.add(_,A),L=n.sub(L,R),j=n.mul(D,x),R=n.mul(m,A),j=n.add(R,j),R=n.sub(_,j),j=n.add(_,j),k=n.mul(R,j),_=n.add(w,w),_=n.add(_,w),A=n.mul(D,A),x=n.mul(m,x),_=n.add(_,A),A=n.sub(w,A),A=n.mul(D,A),x=n.add(x,A),w=n.mul(_,x),k=n.add(k,w),w=n.mul(L,x),R=n.mul(I,R),R=n.sub(R,w),w=n.mul(I,_),j=n.mul(L,j),j=n.add(j,w),new g(R,k,j)}subtract(S){return this.add(S.negate())}is0(){return this.equals(g.ZERO)}wNAF(S){return C.wNAFCached(this,S,g.normalizeZ)}multiplyUnsafe(S){const{endo:O,n:P}=e;ta("scalar",S,bs,P);const $=g.ZERO;if(S===bs)return $;if(this.is0()||S===$t)return this;if(!O||C.hasPrecomputes(this))return C.wNAFCachedUnsafe(this,S,g.normalizeZ);let{k1neg:U,k1:T,k2neg:M,k2:R}=O.splitScalar(S),k=$,j=$,D=this;for(;T>bs||R>bs;)T&$t&&(k=k.add(D)),R&$t&&(j=j.add(D)),D=D.double(),T>>=$t,R>>=$t;return U&&(k=k.negate()),M&&(j=j.negate()),j=new g(n.mul(j.px,O.beta),j.py,j.pz),k.add(j)}multiply(S){const{endo:O,n:P}=e;ta("scalar",S,$t,P);let $,U;if(O){const{k1neg:T,k1:M,k2neg:R,k2:k}=O.splitScalar(S);let{p:j,f:D}=this.wNAF(M),{p:m,f:w}=this.wNAF(k);j=C.constTimeNegate(T,j),m=C.constTimeNegate(R,m),m=new g(n.mul(m.px,O.beta),m.py,m.pz),$=j.add(m),U=D.add(w)}else{const{p:T,f:M}=this.wNAF(S);$=T,U=M}return g.normalizeZ([$,U])[0]}multiplyAndAddUnsafe(S,O,P){const $=g.BASE,U=(M,R)=>R===bs||R===$t||!M.equals($)?M.multiplyUnsafe(R):M.multiply(R),T=U(this,O).add(U(S,P));return T.is0()?void 0:T}toAffine(S){return h(this,S)}isTorsionFree(){const{h:S,isTorsionFree:O}=e;if(S===$t)return!0;if(O)return O(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:S,clearCofactor:O}=e;return S===$t?this:O?O(g,this):this.multiplyUnsafe(e.h)}toRawBytes(S=!0){return zc("isCompressed",S),this.assertValidity(),s(g,this,S)}toHex(S=!0){return zc("isCompressed",S),Wc(this.toRawBytes(S))}}g.BASE=new g(e.Gx,e.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:b}=e,C=qR(g,y?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function ZR(t){const e=$_(t);return Qd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function JR(t){const e=ZR(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(m){return Rn(m,r)}function l(m){return _p(m,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=QR({...e,toBytes(m,w,_){const A=w.toAffine(),I=n.toBytes(A.x),x=dd;return zc("isCompressed",_),_?x(Uint8Array.from([w.hasEvenY()?2:3]),I):x(Uint8Array.from([4]),I,n.toBytes(A.y))},fromBytes(m){const w=m.length,_=m[0],A=m.subarray(1);if(w===o&&(_===2||_===3)){const I=Vi(A);if(!Hg(I,$t,n.ORDER))throw new Error("Point is not on curve");const x=f(I);let L;try{L=n.sqrt(x)}catch(q){const z=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+z)}const F=(L&$t)===$t;return(_&1)===1!==F&&(L=n.neg(L)),{x:I,y:L}}else if(w===a&&_===4){const I=n.fromBytes(A.subarray(0,n.BYTES)),x=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:I,y:x}}else{const I=o,x=a;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+x+", got "+w)}}});function p(m){const w=r>>$t;return m>w}function g(m){return p(m)?c(-m):m}const y=(m,w,_)=>Vi(m.slice(w,_));class b{constructor(w,_,A){ta("r",w,$t,r),ta("s",_,$t,r),this.r=w,this.s=_,A!=null&&(this.recovery=A),Object.freeze(this)}static fromCompact(w){const _=s;return w=or("compactSignature",w,_*2),new b(y(w,0,_),y(w,_,2*_))}static fromDER(w){const{r:_,s:A}=gs.toSig(or("DER",w));return new b(_,A)}assertValidity(){}addRecoveryBit(w){return new b(this.r,this.s,w)}recoverPublicKey(w){const{r:_,s:A,recovery:I}=this,x=$(or("msgHash",w));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const L=I===2||I===3?_+e.n:_;if(L>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const F=I&1?"03":"02",V=u.fromHex(F+Xh(L,n.BYTES)),q=l(L),z=c(-x*q),J=c(A*q),me=u.BASE.multiplyAndAddUnsafe(V,z,J);if(!me)throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return ud(this.toDERHex())}toDERHex(){return gs.hexFromSig(this)}toCompactRawBytes(){return ud(this.toCompactHex())}toCompactHex(){const w=s;return Xh(this.r,w)+Xh(this.s,w)}}const C={isValidPrivateKey(m){try{return d(m),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const m=M_(e.n);return zR(e.randomBytes(m),e.n)},precompute(m=8,w=u.BASE){return w._setWindowSize(m),w.multiply(BigInt(3)),w}};function E(m,w=!0){return u.fromPrivateKey(m).toRawBytes(w)}function S(m){if(typeof m=="bigint")return!1;if(m instanceof u)return!0;const _=or("key",m).length,A=n.BYTES,I=A+1,x=2*A+1;if(!(e.allowedPrivateKeyLengths||s===I))return _===I||_===x}function O(m,w,_=!0){if(S(m)===!0)throw new Error("first arg must be private key");if(S(w)===!1)throw new Error("second arg must be public key");return u.fromHex(w).multiply(d(m)).toRawBytes(_)}const P=e.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const w=Vi(m),_=m.length*8-i;return _>0?w>>BigInt(_):w},$=e.bits2int_modN||function(m){return c(P(m))},U=Yd(i);function T(m){return ta("num < 2^"+i,m,bs,U),jl(m,s)}function M(m,w,_=R){if(["recovered","canonical"].some(pe=>pe in _))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:I}=e;let{lowS:x,prehash:L,extraEntropy:F}=_;x==null&&(x=!0),m=or("msgHash",m),hy(_),L&&(m=or("prehashed msgHash",A(m)));const V=$(m),q=d(w),z=[T(q),T(V)];if(F!=null&&F!==!1){const pe=F===!0?I(n.BYTES):F;z.push(or("extraEntropy",pe))}const J=dd(...z),me=V;function Ie(pe){const xe=P(pe);if(!h(xe))return;const Ze=l(xe),xt=u.BASE.multiply(xe).toAffine(),Wt=c(xt.x);if(Wt===bs)return;const Jn=c(Ze*c(me+Wt*q));if(Jn===bs)return;let es=(xt.x===Wt?0:2)|Number(xt.y&$t),Os=Jn;return x&&p(Jn)&&(Os=g(Jn),es^=1),new b(Wt,Os,es)}return{seed:J,k2sig:Ie}}const R={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function j(m,w,_=R){const{seed:A,k2sig:I}=M(m,w,_),x=e;return kR(x.hash.outputLen,x.nByteLength,x.hmac)(A,I)}u.BASE._setWindowSize(8);function D(m,w,_,A=k){var es;const I=m;w=or("msgHash",w),_=or("publicKey",_);const{lowS:x,prehash:L,format:F}=A;if(hy(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");const V=typeof I=="string"||Bl(I),q=!V&&!F&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!V&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,J;try{if(q&&(z=new b(I.r,I.s)),V){try{F!=="compact"&&(z=b.fromDER(I))}catch(Os){if(!(Os instanceof gs.Err))throw Os}!z&&F!=="der"&&(z=b.fromCompact(I))}J=u.fromHex(_)}catch{return!1}if(!z||x&&z.hasHighS())return!1;L&&(w=e.hash(w));const{r:me,s:Ie}=z,pe=$(w),xe=l(Ie),Ze=c(pe*xe),xt=c(me*xe),Wt=(es=u.BASE.multiplyAndAddUnsafe(J,Ze,xt))==null?void 0:es.toAffine();return Wt?c(Wt.x)===me:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:O,sign:j,verify:D,ProjectivePoint:u,Signature:b,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function XR(t){return{hash:t,hmac:(e,...n)=>A_(t,e,aR(...n)),randomBytes:cR}}function ek(t,e){const n=r=>JR({...t,...XR(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),fy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tk=BigInt(0),nk=BigInt(1),Cp=BigInt(2),py=(t,e)=>(t+e/Cp)/e;function rk(t){const e=B_,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=er(u,n,e)*u%e,f=er(d,n,e)*u%e,h=er(f,Cp,e)*l%e,p=er(h,s,e)*h%e,g=er(p,i,e)*p%e,y=er(g,a,e)*g%e,b=er(y,c,e)*y%e,C=er(b,a,e)*g%e,E=er(C,n,e)*u%e,S=er(E,o,e)*p%e,O=er(S,r,e)*l%e,P=er(O,Cp,e);if(!Ip.eql(Ip.sqr(P),t))throw new Error("Cannot find square root");return P}const Ip=qg(B_,void 0,void 0,{sqrt:rk}),sk=ek({a:tk,b:BigInt(7),Fp:Ip,n:fy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=fy,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-nk*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=py(i*t,e),c=py(-r*t,e);let l=Rn(t-a*n-c*s,e),u=Rn(-a*r-c*i,e);const d=l>o,f=u>o;if(d&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:f,k2:u}}}},OR),ik=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:sk},Symbol.toStringTag,{value:"Module"}));function ok(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const p=(h-f)*i+1>>>0,g=new Uint8Array(p);for(;f!==h;){let C=l[f],E=0;for(let S=p-1;(C!==0||E<d)&&S!==-1;S--,E++)C+=256*g[S]>>>0,g[S]=C%n>>>0,C=C/n>>>0;if(C!==0)throw new Error("Non-zero carry");d=E,f++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let b=r.repeat(u);for(;y<p;++y)b+=t.charAt(g[y]);return b}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===r;)d++,u++;const h=(l.length-u)*s+1>>>0,p=new Uint8Array(h);for(;u<l.length;){const C=l.charCodeAt(u);if(C>255)return;let E=e[C];if(E===255)return;let S=0;for(let O=h-1;(E!==0||S<f)&&O!==-1;O--,S++)E+=n*p[O]>>>0,p[O]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");f=S,u++}let g=h-f;for(;g!==h&&p[g]===0;)g++;const y=new Uint8Array(d+(h-g));let b=d;for(;g!==h;)y[b++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var ak="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Oa=ok(ak);function ck(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function lk(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const uk=new TextEncoder,dk=50;function hk(t,e,n){uk.encodeInto(t,e.subarray(n))}function fk(t,e,n){t.length>dk?hk(t,e,n):lk(t,e,n)}const pk=4096;function j_(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=pk&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const gk=new TextDecoder,mk=200;function wk(t,e,n){const r=t.subarray(e,e+n);return gk.decode(r)}function yk(t,e,n){return n>mk?wk(t,e,n):j_(t,e,n)}class au{constructor(e,n){this.type=e,this.data=n}}class Vn extends Error{constructor(e){super(e);const n=Object.create(Vn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Vn.name})}}const Ga=4294967295;function bk(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function F_(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function z_(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function vk(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Ek=-1,_k=4294967296-1,Ak=17179869184-1;function Ck({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Ak)if(e===0&&t<=_k){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),F_(r,4,t),n}}function Ik(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Nk(t){if(t instanceof Date){const e=Ik(t);return Ck(e)}else return null}function Sk(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=z_(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Vn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Tk(t){const e=Sk(t);return new Date(e.sec*1e3+e.nsec/1e6)}const xk={type:Ek,encode:Nk,decode:Tk};class hd{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(xk)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new au(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new au(o,i)}}}return e instanceof au?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new au(n,e)}}hd.defaultCodec=new hd;function Ok(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Np(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Ok(t)?new Uint8Array(t):Uint8Array.from(t)}const Dk=100,Rk=2048;let kk=class W_{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??hd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??Dk,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Rk,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new W_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=ck(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),fk(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Np(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),bk(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),F_(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Pk(t,e){return new kk(e).encodeSharedRef(t)}function tf(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Mk=16,Lk=16;class Uk{constructor(e=Mk,n=Lk){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=j_(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Sp="array",Ec="map_key",H_="map_value",$k=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Vn("The type of key must be string or number but "+typeof t)};class Bk{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Sp,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Ec,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Sp){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Ec||e.type===H_){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Ka=-1,Vg=new DataView(new ArrayBuffer(0)),jk=new Uint8Array(Vg.buffer);try{Vg.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const gy=new RangeError("Insufficient data"),Fk=new Uk;let zk=class q_{constructor(e){this.totalPos=0,this.pos=0,this.view=Vg,this.bytes=jk,this.headByte=Ka,this.stack=new Bk,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??hd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Ga,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Ga,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Ga,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Ga,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Ga,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Fk,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??$k}clone(){return new q_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ka,this.stack.reset()}setBuffer(e){const n=Np(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ka&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=Np(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${tf(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Vn(`Unrecognized type byte: ${tf(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Sp)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Ec){if(n==="__proto__")throw new Vn("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=H_;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Ec;continue e}}return n}}readHeadByte(){return this.headByte===Ka&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ka}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Vn(`Unrecognized array type byte: ${tf(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Vn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Vn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Vn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw gy;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=yk(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Ec:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Vn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw gy;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Vn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=vk(this.view,this.pos);return this.pos+=8,e}readI64(){const e=z_(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Wk(t,e){return new zk(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function V_(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function fd(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Gg(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Tp(t){if(!Array.isArray(t))throw new Error("array expected")}function pd(t,e){if(!V_(!0,e))throw new Error(`${t}: array of strings expected`)}function qk(t,e){if(!V_(!1,e))throw new Error(`${t}: array of numbers expected`)}function Vk(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Gk(t){const e=typeof t=="string"?t.split(""):t,n=e.length;pd("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Tp(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Tp(s),s.map(i=>{fd("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Kk(t=""){return fd("join",t),{encode:e=>(pd("join.decode",e),e.join(t)),decode:e=>(fd("join.decode",e),e.split(t))}}function Yk(t,e="="){return Gg(t),fd("padding",e),{encode(n){for(pd("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){pd("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const G_=(t,e)=>e===0?t:G_(e,t%e),gd=(t,e)=>t+(e-G_(t,e)),nf=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function my(t,e,n,r){if(Tp(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(gd(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${gd(e,n)}`);let s=0,i=0;const o=nf[e],a=nf[n]-1,c=[];for(const l of t){if(Gg(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=nf[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Qk(t,e=!1){if(Gg(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(gd(8,t)>32||gd(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Hk(n))throw new Error("radix2.encode input should be Uint8Array");return my(Array.from(n),8,t,!e)},decode:n=>(qk("radix2.decode",n),Uint8Array.from(my(n,t,8,e)))}}const Zk=Vk(Qk(5),Gk("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Yk(5),Kk(""));function Kg(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function K_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kg(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _c(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=K_(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Kg(n)}function Jk(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,C=p.length;b!==C&&p[b]===0;)b++,g++;for(var E=(C-b)*u+1>>>0,S=new Uint8Array(E);b!==C;){for(var O=p[b],P=0,$=E-1;(O!==0||P<y)&&$!==-1;$--,P++)O+=256*S[$]>>>0,S[$]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");y=P,b++}for(var U=E-y;U!==E&&S[U]===0;)U++;for(var T=c.repeat(g);U<E;++U)T+=t.charAt(S[U]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var C=(p.length-g)*l+1>>>0,E=new Uint8Array(C);p[g];){var S=n[p.charCodeAt(g)];if(S===255)return;for(var O=0,P=C-1;(S!==0||O<b)&&P!==-1;P--,O++)S+=a*E[P]>>>0,E[P]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=O,g++}if(p[g]!==" "){for(var $=C-b;$!==C&&E[$]===0;)$++;for(var U=new Uint8Array(y+(C-$)),T=y;$!==C;)U[T++]=E[$++];return U}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var Xk=Jk,eP=Xk;const tP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nP=t=>new TextEncoder().encode(t),rP=t=>new TextDecoder().decode(t);class sP{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class iP{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Y_(this,e)}}class oP{constructor(e){this.decoders=e}or(e){return Y_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Y_=(t,e)=>new oP({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class aP{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new sP(e,n,r),this.decoder=new iP(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Zd=({name:t,prefix:e,encode:n,decode:r})=>new aP(t,e,n,r),Fl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=eP(n,e);return Zd({prefix:t,name:e,encode:r,decode:i=>tP(s(i))})},cP=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lP=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Jt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Zd({prefix:e,name:t,encode(s){return lP(s,r,n)},decode(s){return cP(s,r,n,t)}}),uP=Zd({prefix:"\0",name:"identity",encode:t=>rP(t),decode:t=>nP(t)}),dP=Object.freeze(Object.defineProperty({__proto__:null,identity:uP},Symbol.toStringTag,{value:"Module"})),hP=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),fP=Object.freeze(Object.defineProperty({__proto__:null,base2:hP},Symbol.toStringTag,{value:"Module"})),pP=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),gP=Object.freeze(Object.defineProperty({__proto__:null,base8:pP},Symbol.toStringTag,{value:"Module"})),mP=Fl({prefix:"9",name:"base10",alphabet:"0123456789"}),wP=Object.freeze(Object.defineProperty({__proto__:null,base10:mP},Symbol.toStringTag,{value:"Module"})),yP=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bP=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),vP=Object.freeze(Object.defineProperty({__proto__:null,base16:yP,base16upper:bP},Symbol.toStringTag,{value:"Module"})),EP=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_P=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AP=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CP=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),IP=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NP=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),SP=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),TP=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xP=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),OP=Object.freeze(Object.defineProperty({__proto__:null,base32:EP,base32hex:IP,base32hexpad:SP,base32hexpadupper:TP,base32hexupper:NP,base32pad:AP,base32padupper:CP,base32upper:_P,base32z:xP},Symbol.toStringTag,{value:"Module"})),DP=Fl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),RP=Fl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),kP=Object.freeze(Object.defineProperty({__proto__:null,base36:DP,base36upper:RP},Symbol.toStringTag,{value:"Module"})),PP=Fl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MP=Fl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),LP=Object.freeze(Object.defineProperty({__proto__:null,base58btc:PP,base58flickr:MP},Symbol.toStringTag,{value:"Module"})),UP=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$P=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),BP=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jP=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),FP=Object.freeze(Object.defineProperty({__proto__:null,base64:UP,base64pad:$P,base64url:BP,base64urlpad:jP},Symbol.toStringTag,{value:"Module"})),Q_=Array.from(""),zP=Q_.reduce((t,e,n)=>(t[n]=e,t),[]),WP=Q_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function HP(t){return t.reduce((e,n)=>(e+=zP[n],e),"")}function qP(t){const e=[];for(const n of t){const r=WP[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const VP=Zd({prefix:"",name:"base256emoji",encode:HP,decode:qP}),GP=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:VP},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const wy={...dP,...fP,...gP,...wP,...vP,...OP,...kP,...LP,...FP,...GP};function Z_(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const yy=Z_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),rf=Z_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=K_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),J_={utf8:yy,"utf-8":yy,hex:wy.base16,latin1:rf,ascii:rf,binary:rf,...wy};function dr(t,e="utf8"){const n=J_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kg(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function jn(t,e="utf8"){const n=J_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const KP={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},YP="Input must be an string, Buffer or Uint8Array";function QP(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(YP);return e}function ZP(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function cu(t){return(4294967296+t).toString(16).substring(1)}function JP(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=cu(e[s]).toUpperCase(),r+=" ",r+=cu(e[s+1]).toUpperCase();else if(n===64)r+=cu(e[s+1]).toUpperCase(),r+=cu(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function XP(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var X_={normalizeInput:QP,toHex:ZP,debugPrint:JP,testSpeed:XP};const Hu=X_;function lu(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function by(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function eA(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function $s(t,e,n,r,s,i){const o=fc[s],a=fc[s+1],c=fc[i],l=fc[i+1];lu(De,t,e),by(De,t,o,a);let u=De[r]^De[t],d=De[r+1]^De[t+1];De[r]=d,De[r+1]=u,lu(De,n,r),u=De[e]^De[n],d=De[e+1]^De[n+1],De[e]=u>>>24^d<<8,De[e+1]=d>>>24^u<<8,lu(De,t,e),by(De,t,c,l),u=De[r]^De[t],d=De[r+1]^De[t+1],De[r]=u>>>16^d<<16,De[r+1]=d>>>16^u<<16,lu(De,n,r),u=De[e]^De[n],d=De[e+1]^De[n+1],De[e]=d>>>31^u<<1,De[e+1]=u>>>31^d<<1}const tA=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),eM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],en=new Uint8Array(eM.map(function(t){return t*2})),De=new Uint32Array(32),fc=new Uint32Array(32);function nA(t,e){let n=0;for(n=0;n<16;n++)De[n]=t.h[n],De[n+16]=tA[n];for(De[24]=De[24]^t.t,De[25]=De[25]^t.t/4294967296,e&&(De[28]=~De[28],De[29]=~De[29]),n=0;n<32;n++)fc[n]=eA(t.b,4*n);for(n=0;n<12;n++)$s(0,8,16,24,en[n*16+0],en[n*16+1]),$s(2,10,18,26,en[n*16+2],en[n*16+3]),$s(4,12,20,28,en[n*16+4],en[n*16+5]),$s(6,14,22,30,en[n*16+6],en[n*16+7]),$s(0,10,20,30,en[n*16+8],en[n*16+9]),$s(2,12,22,24,en[n*16+10],en[n*16+11]),$s(4,14,16,26,en[n*16+12],en[n*16+13]),$s(6,8,18,28,en[n*16+14],en[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^De[n]^De[n+16]}const Bs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function rA(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Bs.fill(0),Bs[0]=t,e&&(Bs[1]=e.length),Bs[2]=1,Bs[3]=1,n&&Bs.set(n,32),r&&Bs.set(r,48);for(let i=0;i<16;i++)s.h[i]=tA[i]^eA(Bs,i*4);return e&&(Yg(s,e),s.c=128),s}function Yg(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,nA(t,!1),t.c=0),t.b[t.c++]=e[n]}function sA(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;nA(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function iA(t,e,n,r,s){n=n||64,t=Hu.normalizeInput(t),r&&(r=Hu.normalizeInput(r)),s&&(s=Hu.normalizeInput(s));const i=rA(n,e,r,s);return Yg(i,t),sA(i)}function tM(t,e,n,r,s){const i=iA(t,e,n,r,s);return Hu.toHex(i)}var nM={blake2b:iA,blake2bHex:tM,blake2bInit:rA,blake2bUpdate:Yg,blake2bFinal:sA};const oA=X_;function rM(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function js(t,e,n,r,s,i){Ge[t]=Ge[t]+Ge[e]+s,Ge[r]=uu(Ge[r]^Ge[t],16),Ge[n]=Ge[n]+Ge[r],Ge[e]=uu(Ge[e]^Ge[n],12),Ge[t]=Ge[t]+Ge[e]+i,Ge[r]=uu(Ge[r]^Ge[t],8),Ge[n]=Ge[n]+Ge[r],Ge[e]=uu(Ge[e]^Ge[n],7)}function uu(t,e){return t>>>e^t<<32-e}const aA=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ge=new Uint32Array(16),Ht=new Uint32Array(16);function cA(t,e){let n=0;for(n=0;n<8;n++)Ge[n]=t.h[n],Ge[n+8]=aA[n];for(Ge[12]^=t.t,Ge[13]^=t.t/4294967296,e&&(Ge[14]=~Ge[14]),n=0;n<16;n++)Ht[n]=rM(t.b,4*n);for(n=0;n<10;n++)js(0,4,8,12,Ht[tn[n*16+0]],Ht[tn[n*16+1]]),js(1,5,9,13,Ht[tn[n*16+2]],Ht[tn[n*16+3]]),js(2,6,10,14,Ht[tn[n*16+4]],Ht[tn[n*16+5]]),js(3,7,11,15,Ht[tn[n*16+6]],Ht[tn[n*16+7]]),js(0,5,10,15,Ht[tn[n*16+8]],Ht[tn[n*16+9]]),js(1,6,11,12,Ht[tn[n*16+10]],Ht[tn[n*16+11]]),js(2,7,8,13,Ht[tn[n*16+12]],Ht[tn[n*16+13]]),js(3,4,9,14,Ht[tn[n*16+14]],Ht[tn[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Ge[n]^Ge[n+8]}function lA(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(aA),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(Qg(r,e),r.c=64),r}function Qg(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,cA(t,!1),t.c=0),t.b[t.c++]=e[n]}function uA(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;cA(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function dA(t,e,n){n=n||32,t=oA.normalizeInput(t);const r=lA(n,e);return Qg(r,t),uA(r)}function sM(t,e,n){const r=dA(t,e,n);return oA.toHex(r)}var iM={blake2s:dA,blake2sHex:sM,blake2sInit:lA,blake2sUpdate:Qg,blake2sFinal:uA};const Ya=nM,Qa=iM;var oM={blake2b:Ya.blake2b,blake2bHex:Ya.blake2bHex,blake2bInit:Ya.blake2bInit,blake2bUpdate:Ya.blake2bUpdate,blake2bFinal:Ya.blake2bFinal,blake2s:Qa.blake2s,blake2sHex:Qa.blake2sHex,blake2sInit:Qa.blake2sInit,blake2sUpdate:Qa.blake2sUpdate,blake2sFinal:Qa.blake2sFinal},aM={};const cM=":";function Gi(t){const[e,n]=t.split(cM);return{namespace:e,reference:n}}function hA(t,e){return t.includes(":")?[t]:e.chains||[]}var lM=Object.defineProperty,uM=Object.defineProperties,dM=Object.getOwnPropertyDescriptors,vy=Object.getOwnPropertySymbols,hM=Object.prototype.hasOwnProperty,fM=Object.prototype.propertyIsEnumerable,xp=(t,e,n)=>e in t?lM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ey=(t,e)=>{for(var n in e||(e={}))hM.call(e,n)&&xp(t,n,e[n]);if(vy)for(var n of vy(e))fM.call(e,n)&&xp(t,n,e[n]);return t},pM=(t,e)=>uM(t,dM(e)),_y=(t,e,n)=>xp(t,typeof e!="symbol"?e+"":e,n);const gM="ReactNative",Yn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},mM="js";function md(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function wi(){return!to()&&!!$g()&&navigator.product===gM}function wM(){return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function yM(){return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Da(){return!md()&&!!$g()&&!!to()}function zl(){return wi()?Yn.reactNative:md()?Yn.node:Da()?Yn.browser:Yn.unknown}function Ay(){var t;try{return wi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function bM(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function vM(t){var e,n;const r=fA();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),pM(Ey(Ey({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function fA(){return a_()||{name:"",description:"",url:"",icons:[""]}}function EM(){if(zl()===Yn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=yD();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function _M(){var t;const e=zl();return e===Yn.browser?[e,((t=o_())==null?void 0:t.host)||"unknown"].join(":"):e}function pA(t,e,n){const r=EM(),s=_M();return[[t,e].join("-"),[mM,n].join("-"),r,s].join("/")}function AM({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=pA(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=bM(l[1]||"",d);return l[0]+"?"+f}function Bi(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Op(t){return Object.fromEntries(t.entries())}function Dp(t){return new Map(Object.entries(t))}function Ri(t=ee.FIVE_MINUTES,e){const n=ee.toMiliseconds(t||ee.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function qr(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function gA(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function CM(t){return gA("topic",t)}function IM(t){return gA("id",t)}function mA(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Rt(t,e){return ee.fromMiliseconds(Date.now()+ee.toMiliseconds(t))}function Ys(t){return Date.now()>=ee.toMiliseconds(t)}function Je(t,e){return`${t}${e?`:${e}`:""}`}function Kr(t=[],e=[]){return[...new Set([...t,...e])]}async function NM({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=SM(i,t,e),a=zl();if(a===Yn.browser){if(!((r=to())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}TM(o)}else a===Yn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function SM(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${RM(r,!0)}`}else s=`${s}/wc?${r}`;return s}function TM(t){let e="_self";DM()?e="_top":(OM()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function xM(t,e){let n="";try{if(Da()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Cy(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Iy(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Zg(){return typeof process<"u"&&aM.IS_VITEST==="true"}function OM(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function DM(){try{return window.self!==window.top}catch{return!1}}function RM(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function wA(t){return Buffer.from(t,"base64").toString("utf-8")}function kM(t){return new Promise(e=>setTimeout(e,t))}let PM=class{constructor({limit:e}){_y(this,"limit"),_y(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const du=BigInt(2**32-1),Ny=BigInt(32);function yA(t,e=!1){return e?{h:Number(t&du),l:Number(t>>Ny&du)}:{h:Number(t>>Ny&du)|0,l:Number(t&du)|0}}function bA(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=yA(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Sy=(t,e,n)=>t>>>n,Ty=(t,e,n)=>t<<32-n|e>>>n,Qs=(t,e,n)=>t>>>n|e<<32-n,Zs=(t,e,n)=>t<<32-n|e>>>n,pc=(t,e,n)=>t<<64-n|e>>>n-32,gc=(t,e,n)=>t>>>n-32|e<<64-n,MM=(t,e)=>e,LM=(t,e)=>t,UM=(t,e,n)=>t<<n|e>>>32-n,$M=(t,e,n)=>e<<n|t>>>32-n,BM=(t,e,n)=>e<<n-32|t>>>64-n,jM=(t,e,n)=>t<<n-32|e>>>64-n;function _r(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Jg=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Xg=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,FM=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),zM=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,WM=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),HM=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Io=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function em(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ss(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function hr(t,...e){if(!em(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tm(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ss(t.outputLen),Ss(t.blockLen)}function hi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nm(t,e){hr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Hc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function fr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function sf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ur(t,e){return t<<32-e|t>>>e}const vA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function EA(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const fs=vA?t=>t:t=>EA(t);function qM(t){for(let e=0;e<t.length;e++)t[e]=EA(t[e]);return t}const Js=vA?t=>t:qM,_A=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",VM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qc(t){if(hr(t),_A)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=VM[t[n]];return e}const as={_0:48,_9:57,A:65,F:70,a:97,f:102};function xy(t){if(t>=as._0&&t<=as._9)return t-as._0;if(t>=as.A&&t<=as.F)return t-(as.A-10);if(t>=as.a&&t<=as.f)return t-(as.a-10)}function rm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(_A)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=xy(t.charCodeAt(i)),a=xy(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function GM(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Sr(t){return typeof t=="string"&&(t=GM(t)),hr(t),t}function ji(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];hr(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Jd=class{};function Wl(t){const e=r=>t().update(Sr(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function KM(t){const e=(r,s)=>t(s).update(Sr(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Ra(t=32){if(Io&&typeof Io.getRandomValues=="function")return Io.getRandomValues(new Uint8Array(t));if(Io&&typeof Io.randomBytes=="function")return Uint8Array.from(Io.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const YM=BigInt(0),Za=BigInt(1),QM=BigInt(2),ZM=BigInt(7),JM=BigInt(256),XM=BigInt(113),AA=[],CA=[],IA=[];for(let t=0,e=Za,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],AA.push(2*(5*r+n)),CA.push((t+1)*(t+2)/2%64);let s=YM;for(let i=0;i<7;i++)e=(e<<Za^(e>>ZM)*XM)%JM,e&QM&&(s^=Za<<(Za<<BigInt(i))-Za);IA.push(s)}const NA=bA(IA,!0),e3=NA[0],t3=NA[1],Oy=(t,e,n)=>n>32?BM(t,e,n):UM(t,e,n),Dy=(t,e,n)=>n>32?jM(t,e,n):$M(t,e,n);function n3(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Oy(l,u,1)^n[a],f=Dy(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=CA[o],c=Oy(s,i,a),l=Dy(s,i,a),u=AA[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=e3[r],t[1]^=t3[r]}fr(n)}let r3=class SA extends Jd{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Ss(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Hc(this.state)}clone(){return this._cloneInto()}keccak(){Js(this.state32),n3(this.state32,this.rounds),Js(this.state32),this.posOut=0,this.pos=0}update(e){hi(this),e=Sr(e),hr(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){hi(this,!1),hr(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ss(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nm(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,fr(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new SA(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const s3=(t,e,n)=>Wl(()=>new r3(e,t,n)),i3=s3(1,136,256/8);function o3(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function a3(t,e,n){return t&e^~t&n}function c3(t,e,n){return t&e^t&n^e&n}let TA=class extends Jd{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=sf(this.buffer)}update(e){hi(this),e=Sr(e),hr(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=sf(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hi(this),nm(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,fr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;o3(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=sf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Fs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),rn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),l3=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),zs=new Uint32Array(64);let u3=class extends TA{constructor(e=32){super(64,e,8,!1),this.A=Fs[0]|0,this.B=Fs[1]|0,this.C=Fs[2]|0,this.D=Fs[3]|0,this.E=Fs[4]|0,this.F=Fs[5]|0,this.G=Fs[6]|0,this.H=Fs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)zs[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=zs[d-15],h=zs[d-2],p=Ur(f,7)^Ur(f,18)^f>>>3,g=Ur(h,17)^Ur(h,19)^h>>>10;zs[d]=g+zs[d-7]+p+zs[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Ur(a,6)^Ur(a,11)^Ur(a,25),h=u+f+a3(a,c,l)+l3[d]+zs[d]|0,p=(Ur(r,2)^Ur(r,13)^Ur(r,22))+c3(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){fr(zs)}destroy(){this.set(0,0,0,0,0,0,0,0),fr(this.buffer)}};const xA=bA(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),d3=xA[0],h3=xA[1],Ws=new Uint32Array(80),Hs=new Uint32Array(80);let sm=class extends TA{constructor(e=64){super(128,e,16,!1),this.Ah=rn[0]|0,this.Al=rn[1]|0,this.Bh=rn[2]|0,this.Bl=rn[3]|0,this.Ch=rn[4]|0,this.Cl=rn[5]|0,this.Dh=rn[6]|0,this.Dl=rn[7]|0,this.Eh=rn[8]|0,this.El=rn[9]|0,this.Fh=rn[10]|0,this.Fl=rn[11]|0,this.Gh=rn[12]|0,this.Gl=rn[13]|0,this.Hh=rn[14]|0,this.Hl=rn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let E=0;E<16;E++,n+=4)Ws[E]=e.getUint32(n),Hs[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const S=Ws[E-15]|0,O=Hs[E-15]|0,P=Qs(S,O,1)^Qs(S,O,8)^Sy(S,O,7),$=Zs(S,O,1)^Zs(S,O,8)^Ty(S,O,7),U=Ws[E-2]|0,T=Hs[E-2]|0,M=Qs(U,T,19)^pc(U,T,61)^Sy(U,T,6),R=Zs(U,T,19)^gc(U,T,61)^Ty(U,T,6),k=FM($,R,Hs[E-7],Hs[E-16]),j=zM(k,P,M,Ws[E-7],Ws[E-16]);Ws[E]=j|0,Hs[E]=k|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:y,Hh:b,Hl:C}=this;for(let E=0;E<80;E++){const S=Qs(d,f,14)^Qs(d,f,18)^pc(d,f,41),O=Zs(d,f,14)^Zs(d,f,18)^gc(d,f,41),P=d&h^~d&g,$=f&p^~f&y,U=WM(C,O,$,h3[E],Hs[E]),T=HM(U,b,S,P,d3[E],Ws[E]),M=U|0,R=Qs(r,s,28)^pc(r,s,34)^pc(r,s,39),k=Zs(r,s,28)^gc(r,s,34)^gc(r,s,39),j=r&i^r&a^i&a,D=s&o^s&c^o&c;b=g|0,C=y|0,g=h|0,y=p|0,h=d|0,p=f|0,{h:d,l:f}=_r(l|0,u|0,T|0,M|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const m=Jg(M,k,D);r=Xg(m,T,R,j),s=m|0}({h:r,l:s}=_r(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=_r(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=_r(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=_r(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=_r(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=_r(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:y}=_r(this.Gh|0,this.Gl|0,g|0,y|0),{h:b,l:C}=_r(this.Hh|0,this.Hl|0,b|0,C|0),this.set(r,s,i,o,a,c,l,u,d,f,h,p,g,y,b,C)}roundClean(){fr(Ws,Hs)}destroy(){fr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},f3=class extends sm{constructor(){super(48),this.Ah=nn[0]|0,this.Al=nn[1]|0,this.Bh=nn[2]|0,this.Bl=nn[3]|0,this.Ch=nn[4]|0,this.Cl=nn[5]|0,this.Dh=nn[6]|0,this.Dl=nn[7]|0,this.Eh=nn[8]|0,this.El=nn[9]|0,this.Fh=nn[10]|0,this.Fl=nn[11]|0,this.Gh=nn[12]|0,this.Gl=nn[13]|0,this.Hh=nn[14]|0,this.Hl=nn[15]|0}};const sn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class p3 extends sm{constructor(){super(32),this.Ah=sn[0]|0,this.Al=sn[1]|0,this.Bh=sn[2]|0,this.Bl=sn[3]|0,this.Ch=sn[4]|0,this.Cl=sn[5]|0,this.Dh=sn[6]|0,this.Dl=sn[7]|0,this.Eh=sn[8]|0,this.El=sn[9]|0,this.Fh=sn[10]|0,this.Fl=sn[11]|0,this.Gh=sn[12]|0,this.Gl=sn[13]|0,this.Hh=sn[14]|0,this.Hl=sn[15]|0}}const Xd=Wl(()=>new u3),g3=Wl(()=>new sm),m3=Wl(()=>new f3),w3=Wl(()=>new p3),y3=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Dt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),se=new Uint32Array(32);function qs(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=se[2*t],l=se[2*t+1],u=se[2*e],d=se[2*e+1],f=se[2*n],h=se[2*n+1],p=se[2*r],g=se[2*r+1],y=Jg(c,u,o);l=Xg(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:MM(g,p),Dl:LM(g)},{h,l:f}=_r(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Qs(d,u,24),Bl:Zs(d,u,24)},se[2*t]=c,se[2*t+1]=l,se[2*e]=u,se[2*e+1]=d,se[2*n]=f,se[2*n+1]=h,se[2*r]=p,se[2*r+1]=g}function Vs(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=se[2*t],l=se[2*t+1],u=se[2*e],d=se[2*e+1],f=se[2*n],h=se[2*n+1],p=se[2*r],g=se[2*r+1],y=Jg(c,u,o);l=Xg(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Qs(g,p,16),Dl:Zs(g,p,16)},{h,l:f}=_r(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:pc(d,u,63),Bl:gc(d,u,63)},se[2*t]=c,se[2*t+1]=l,se[2*e]=u,se[2*e+1]=d,se[2*n]=f,se[2*n+1]=h,se[2*r]=p,se[2*r+1]=g}function b3(t,e={},n,r,s){if(Ss(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class v3 extends Jd{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ss(e),Ss(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Hc(this.buffer)}update(e){hi(this),e=Sr(e),hr(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Js(s),this.compress(s,0,!1),Js(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Js(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);Js(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){hi(this),nm(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,fr(this.buffer.subarray(n)),Js(r),this.compress(r,0,!0),Js(r);const s=Hc(e);this.get().forEach((i,o)=>s[o]=fs(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class E3 extends v3{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Dt[0]|0,this.v0h=Dt[1]|0,this.v1l=Dt[2]|0,this.v1h=Dt[3]|0,this.v2l=Dt[4]|0,this.v2h=Dt[5]|0,this.v3l=Dt[6]|0,this.v3h=Dt[7]|0,this.v4l=Dt[8]|0,this.v4h=Dt[9]|0,this.v5l=Dt[10]|0,this.v5h=Dt[11]|0,this.v6l=Dt[12]|0,this.v6h=Dt[13]|0,this.v7l=Dt[14]|0,this.v7h=Dt[15]|0,b3(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Sr(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Sr(i);const a=Hc(i);this.v4l^=fs(a[0]),this.v4h^=fs(a[1]),this.v5l^=fs(a[2]),this.v5h^=fs(a[3])}if(s!==void 0){s=Sr(s);const a=Hc(s);this.v6l^=fs(a[0]),this.v6h^=fs(a[1]),this.v7l^=fs(a[2]),this.v7h^=fs(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:f,v6l:h,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>se[l]=c),se.set(Dt,16);let{h:s,l:i}=yA(BigInt(this.length));se[24]=Dt[8]^i,se[25]=Dt[9]^s,r&&(se[28]=~se[28],se[29]=~se[29]);let o=0;const a=y3;for(let c=0;c<12;c++)qs(0,4,8,12,e,n+2*a[o++]),Vs(0,4,8,12,e,n+2*a[o++]),qs(1,5,9,13,e,n+2*a[o++]),Vs(1,5,9,13,e,n+2*a[o++]),qs(2,6,10,14,e,n+2*a[o++]),Vs(2,6,10,14,e,n+2*a[o++]),qs(3,7,11,15,e,n+2*a[o++]),Vs(3,7,11,15,e,n+2*a[o++]),qs(0,5,10,15,e,n+2*a[o++]),Vs(0,5,10,15,e,n+2*a[o++]),qs(1,6,11,12,e,n+2*a[o++]),Vs(1,6,11,12,e,n+2*a[o++]),qs(2,7,8,13,e,n+2*a[o++]),Vs(2,7,8,13,e,n+2*a[o++]),qs(3,4,9,14,e,n+2*a[o++]),Vs(3,4,9,14,e,n+2*a[o++]);this.v0l^=se[0]^se[16],this.v0h^=se[1]^se[17],this.v1l^=se[2]^se[18],this.v1h^=se[3]^se[19],this.v2l^=se[4]^se[20],this.v2h^=se[5]^se[21],this.v3l^=se[6]^se[22],this.v3h^=se[7]^se[23],this.v4l^=se[8]^se[24],this.v4h^=se[9]^se[25],this.v5l^=se[10]^se[26],this.v5h^=se[11]^se[27],this.v6l^=se[12]^se[28],this.v6h^=se[13]^se[29],this.v7l^=se[14]^se[30],this.v7h^=se[15]^se[31],fr(se)}destroy(){this.destroyed=!0,fr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _3=KM(t=>new E3(t)),A3="https://rpc.walletconnect.org/v1";function OA(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(i3(n)).toString("hex")}async function C3(t,e,n,r,s,i){switch(n.t){case"eip191":return await I3(t,e,n.s);case"eip1271":return await N3(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function I3(t,e,n){return(await AR({hash:OA(e),signature:n})).toLowerCase()===t.toLowerCase()}async function N3(t,e,n,r,s,i){const o=Gi(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:OA(e)).substring(2),f=a+d+c+u+l,h=await fetch(`${i||A3}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:S3(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function S3(){return Date.now()+Math.floor(Math.random()*1e3)}function T3(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Oa.encode(i)}function x3(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=_3(r,{dkLen:32});return Oa.encode(s)}function Ry(t){const e=new Uint8Array(Xd(O3(t)));return Oa.encode(e)}function O3(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function ky(t){const e=Buffer.from(t,"base64"),n=Wk(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Pk(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=w3(i);return Zk.encode(o).replace(/=+$/,"")}function of(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function D3(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(of(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(of(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(of(r.length)),s.push(r);const i=Buffer.concat(s),o=Xd(i);return Buffer.from(o).toString("hex").toUpperCase()}var R3=Object.defineProperty,k3=Object.defineProperties,P3=Object.getOwnPropertyDescriptors,Py=Object.getOwnPropertySymbols,M3=Object.prototype.hasOwnProperty,L3=Object.prototype.propertyIsEnumerable,My=(t,e,n)=>e in t?R3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U3=(t,e)=>{for(var n in e||(e={}))M3.call(e,n)&&My(t,n,e[n]);if(Py)for(var n of Py(e))L3.call(e,n)&&My(t,n,e[n]);return t},$3=(t,e)=>k3(t,P3(e));const B3="did:pkh:",im=t=>t==null?void 0:t.split(":"),j3=t=>{const e=t&&im(t);if(e)return t.includes(B3)?e[3]:e[1]},Rp=t=>{const e=t&&im(t);if(e)return e[2]+":"+e[3]},wd=t=>{const e=t&&im(t);if(e)return e.pop()};async function Ly(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=DA(s,s.iss),o=wd(s.iss);return await C3(o,i,r,Rp(s.iss),n)}const DA=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=wd(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${j3(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,h=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=qu(t.resources);if(p){const g=Vc(p);s=Y3(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,f,h].filter(g=>g!=null).join(`
`)};function F3(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function z3(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ro(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function W3(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:H3(e,n,r)}}}function H3(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function RA(t){return ro(t),`urn:recap:${F3(t).replace(/=/g,"")}`}function Vc(t){const e=z3(t.replace("urn:recap:",""));return ro(e),e}function q3(t,e,n){const r=W3(t,e,n);return RA(r)}function V3(t){return t&&t.includes("urn:recap:")}function G3(t,e){const n=Vc(t),r=Vc(e),s=K3(n,r);return RA(s)}function K3(t,e){ro(t),ro(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=$3(U3({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Y3(t="",e){ro(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Uy(t){var e;const n=Vc(t);ro(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function $y(t){const e=Vc(t);ro(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function qu(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return V3(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function kA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kp(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function af(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function kn(t,...e){if(!kA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function By(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Q3(t,e){kn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function oi(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function la(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Z3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const J3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function X3(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Pp(t){if(typeof t=="string")t=X3(t);else if(kA(t))t=Mp(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function eL(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function tL(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const nL=(t,e)=>{function n(r,...s){if(kn(r),!J3)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?kn(l):kn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&kn(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");kn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,kn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(kn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function jy(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!sL(e))throw new Error("invalid output, must be aligned");return e}function Fy(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function rL(t,e,n){kp(n);const r=new Uint8Array(16),s=Z3(r);return Fy(s,0,BigInt(e),n),Fy(s,8,BigInt(t),n),r}function sL(t){return t.byteOffset%4===0}function Mp(t){return Uint8Array.from(t)}const PA=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),iL=PA("expand 16-byte k"),oL=PA("expand 32-byte k"),aL=oi(iL),cL=oi(oL);function qe(t,e){return t<<e|t>>>32-e}function Lp(t){return t.byteOffset%4===0}const hu=64,lL=16,MA=2**32-1,zy=new Uint32Array;function uL(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(hu),u=oi(l),d=Lp(s)&&Lp(i),f=d?oi(s):zy,h=d?oi(i):zy;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=MA)throw new Error("arx: counter overflow");const g=Math.min(hu,c-p);if(d&&g===hu){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,C;b<lL;b++)C=y+b,h[C]=f[C]^u[b];p+=hu;continue}for(let y=0,b;y<g;y++)b=p+y,i[b]=s[b]^l[y];p+=g}}function dL(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=eL({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return af(s),af(o),kp(i),kp(n),(a,c,l,u,d=0)=>{kn(a),kn(c),kn(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),kn(u),af(d),d<0||d>=MA)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let p=a.length,g,y;if(p===32)h.push(g=Mp(a)),y=cL;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=aL,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Lp(c)||h.push(c=Mp(c));const b=oi(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,b,oi(c.subarray(0,16)),b),c=c.subarray(16)}const C=16-s;if(C!==c.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){const S=new Uint8Array(12);S.set(c,i?0:12-c.length),c=S,h.push(c)}const E=oi(c);return uL(t,y,b,E,l,u,d,o),la(...h),u}}const qt=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class hL{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Pp(e),kn(e,32);const n=qt(e,0),r=qt(e,2),s=qt(e,4),i=qt(e,6),o=qt(e,8),a=qt(e,10),c=qt(e,12),l=qt(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=qt(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],p=o[7],g=o[8],y=o[9],b=qt(e,n+0),C=qt(e,n+2),E=qt(e,n+4),S=qt(e,n+6),O=qt(e,n+8),P=qt(e,n+10),$=qt(e,n+12),U=qt(e,n+14);let T=i[0]+(b&8191),M=i[1]+((b>>>13|C<<3)&8191),R=i[2]+((C>>>10|E<<6)&8191),k=i[3]+((E>>>7|S<<9)&8191),j=i[4]+((S>>>4|O<<12)&8191),D=i[5]+(O>>>1&8191),m=i[6]+((O>>>14|P<<2)&8191),w=i[7]+((P>>>11|$<<5)&8191),_=i[8]+(($>>>8|U<<8)&8191),A=i[9]+(U>>>5|s),I=0,x=I+T*a+M*(5*y)+R*(5*g)+k*(5*p)+j*(5*h);I=x>>>13,x&=8191,x+=D*(5*f)+m*(5*d)+w*(5*u)+_*(5*l)+A*(5*c),I+=x>>>13,x&=8191;let L=I+T*c+M*a+R*(5*y)+k*(5*g)+j*(5*p);I=L>>>13,L&=8191,L+=D*(5*h)+m*(5*f)+w*(5*d)+_*(5*u)+A*(5*l),I+=L>>>13,L&=8191;let F=I+T*l+M*c+R*a+k*(5*y)+j*(5*g);I=F>>>13,F&=8191,F+=D*(5*p)+m*(5*h)+w*(5*f)+_*(5*d)+A*(5*u),I+=F>>>13,F&=8191;let V=I+T*u+M*l+R*c+k*a+j*(5*y);I=V>>>13,V&=8191,V+=D*(5*g)+m*(5*p)+w*(5*h)+_*(5*f)+A*(5*d),I+=V>>>13,V&=8191;let q=I+T*d+M*u+R*l+k*c+j*a;I=q>>>13,q&=8191,q+=D*(5*y)+m*(5*g)+w*(5*p)+_*(5*h)+A*(5*f),I+=q>>>13,q&=8191;let z=I+T*f+M*d+R*u+k*l+j*c;I=z>>>13,z&=8191,z+=D*a+m*(5*y)+w*(5*g)+_*(5*p)+A*(5*h),I+=z>>>13,z&=8191;let J=I+T*h+M*f+R*d+k*u+j*l;I=J>>>13,J&=8191,J+=D*c+m*a+w*(5*y)+_*(5*g)+A*(5*p),I+=J>>>13,J&=8191;let me=I+T*p+M*h+R*f+k*d+j*u;I=me>>>13,me&=8191,me+=D*l+m*c+w*a+_*(5*y)+A*(5*g),I+=me>>>13,me&=8191;let Ie=I+T*g+M*p+R*h+k*f+j*d;I=Ie>>>13,Ie&=8191,Ie+=D*u+m*l+w*c+_*a+A*(5*y),I+=Ie>>>13,Ie&=8191;let pe=I+T*y+M*g+R*p+k*h+j*f;I=pe>>>13,pe&=8191,pe+=D*d+m*u+w*l+_*c+A*a,I+=pe>>>13,pe&=8191,I=(I<<2)+I|0,I=I+x|0,x=I&8191,I=I>>>13,L+=I,i[0]=x,i[1]=L,i[2]=F,i[3]=V,i[4]=q,i[5]=z,i[6]=J,i[7]=me,i[8]=Ie,i[9]=pe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;la(r)}update(e){By(this),e=Pp(e),kn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){la(this.h,this.r,this.buffer,this.pad)}digestInto(e){By(this),Q3(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function fL(t){const e=(r,s)=>t(s).update(Pp(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const pL=fL(t=>new hL(t));function gL(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],f=e[2],h=e[3],p=e[4],g=e[5],y=e[6],b=e[7],C=s,E=n[0],S=n[1],O=n[2],P=o,$=a,U=c,T=l,M=u,R=d,k=f,j=h,D=p,m=g,w=y,_=b,A=C,I=E,x=S,L=O;for(let V=0;V<i;V+=2)P=P+M|0,A=qe(A^P,16),D=D+A|0,M=qe(M^D,12),P=P+M|0,A=qe(A^P,8),D=D+A|0,M=qe(M^D,7),$=$+R|0,I=qe(I^$,16),m=m+I|0,R=qe(R^m,12),$=$+R|0,I=qe(I^$,8),m=m+I|0,R=qe(R^m,7),U=U+k|0,x=qe(x^U,16),w=w+x|0,k=qe(k^w,12),U=U+k|0,x=qe(x^U,8),w=w+x|0,k=qe(k^w,7),T=T+j|0,L=qe(L^T,16),_=_+L|0,j=qe(j^_,12),T=T+j|0,L=qe(L^T,8),_=_+L|0,j=qe(j^_,7),P=P+R|0,L=qe(L^P,16),w=w+L|0,R=qe(R^w,12),P=P+R|0,L=qe(L^P,8),w=w+L|0,R=qe(R^w,7),$=$+k|0,A=qe(A^$,16),_=_+A|0,k=qe(k^_,12),$=$+k|0,A=qe(A^$,8),_=_+A|0,k=qe(k^_,7),U=U+j|0,I=qe(I^U,16),D=D+I|0,j=qe(j^D,12),U=U+j|0,I=qe(I^U,8),D=D+I|0,j=qe(j^D,7),T=T+M|0,x=qe(x^T,16),m=m+x|0,M=qe(M^m,12),T=T+M|0,x=qe(x^T,8),m=m+x|0,M=qe(M^m,7);let F=0;r[F++]=o+P|0,r[F++]=a+$|0,r[F++]=c+U|0,r[F++]=l+T|0,r[F++]=u+M|0,r[F++]=d+R|0,r[F++]=f+k|0,r[F++]=h+j|0,r[F++]=p+D|0,r[F++]=g+m|0,r[F++]=y+w|0,r[F++]=b+_|0,r[F++]=C+A|0,r[F++]=E+I|0,r[F++]=S+x|0,r[F++]=O+L|0}const mL=dL(gL,{counterRight:!1,counterLength:4,allowShortKeys:!1}),wL=new Uint8Array(16),Wy=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(wL.subarray(n))},yL=new Uint8Array(32);function Hy(t,e,n,r,s){const i=t(e,n,yL),o=pL.create(i);s&&Wy(o,s),Wy(o,r);const a=rL(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return la(i,a),c}const bL=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=jy(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Hy(t,e,n,a,r);return i.set(c,o),la(c),i},decrypt(s,i){i=jy(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Hy(t,e,n,o,r);if(!tL(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),la(c),i}}),LA=nL({blockSize:64,nonceLength:12,tagLength:16},bL(mL));let UA=class extends Jd{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,tm(e);const r=Sr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),fr(i)}update(e){return hi(this),this.iHash.update(e),this}digestInto(e){hi(this),hr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const eh=(t,e,n)=>new UA(t,e).update(n).digest();eh.create=(t,e)=>new UA(t,e);function vL(t,e,n){return tm(t),n===void 0&&(n=new Uint8Array(t.outputLen)),eh(t,Sr(n),Sr(e))}const cf=Uint8Array.from([0]),qy=Uint8Array.of();function EL(t,e,n,r=32){tm(t),Ss(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=qy);const o=new Uint8Array(i*s),a=eh.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)cf[0]=u+1,c.update(u===0?qy:l).update(n).update(cf).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),fr(l,cf),o.slice(0,r)}const _L=(t,e,n,r,s)=>EL(t,vL(t,e,n),r,s),th=Xd,om=BigInt(0),Up=BigInt(1);function yd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function fu(t){const e=t.toString(16);return e.length&1?"0"+e:e}function $A(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?om:BigInt("0x"+t)}function nh(t){return $A(qc(t))}function bd(t){return hr(t),$A(qc(Uint8Array.from(t).reverse()))}function am(t,e){return rm(t.toString(16).padStart(e*2,"0"))}function cm(t,e){return am(t,e).reverse()}function Dn(t,e,n){let r;if(typeof e=="string")try{r=rm(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(em(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const lf=t=>typeof t=="bigint"&&om<=t;function AL(t,e,n){return lf(t)&&lf(e)&&lf(n)&&e<=t&&t<n}function $p(t,e,n,r){if(!AL(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function CL(t){let e;for(e=0;t>om;t>>=Up,e+=1);return e}const rh=t=>(Up<<BigInt(t))-Up;function IL(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=l();const p=i.slice();h.push(p),f+=i.length}return ji(...h)};return(f,h)=>{c(),u(f);let p;for(;!(p=h(d()));)u();return c(),p}}function sh(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Vy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const $n=BigInt(0),wn=BigInt(1),Fi=BigInt(2),NL=BigInt(3),BA=BigInt(4),jA=BigInt(5),FA=BigInt(8);function lr(t,e){const n=t%e;return n>=$n?n:e+n}function Er(t,e,n){let r=t;for(;e-- >$n;)r*=r,r%=n;return r}function Gy(t,e){if(t===$n)throw new Error("invert: expected non-zero number");if(e<=$n)throw new Error("invert: expected positive modulus, got "+e);let n=lr(t,e),r=e,s=$n,i=wn;for(;n!==$n;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==wn)throw new Error("invert: does not exist");return lr(s,e)}function zA(t,e){const n=(t.ORDER+wn)/BA,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function SL(t,e){const n=(t.ORDER-jA)/FA,r=t.mul(e,Fi),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Fi),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function TL(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-wn,n=0;for(;e%Fi===$n;)e/=Fi,n++;let r=Fi;const s=ka(t);for(;Ky(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return zA;let i=s.pow(r,e);const o=(e+wn)/Fi;return function(a,c){if(a.is0(c))return c;if(Ky(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===l)throw new Error("Cannot find square root");const g=wn<<BigInt(l-h-1),y=a.pow(u,g);l=h,u=a.sqr(y),d=a.mul(d,u),f=a.mul(f,y)}return f}}function xL(t){return t%BA===NL?zA:t%FA===jA?SL:TL(t)}const OL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function DL(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=OL.reduce((r,s)=>(r[s]="function",r),e);return sh(t,n),t}function RL(t,e,n){if(n<$n)throw new Error("invalid exponent, negatives unsupported");if(n===$n)return t.ONE;if(n===wn)return e;let r=t.ONE,s=e;for(;n>$n;)n&wn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=wn;return r}function WA(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Ky(t,e){const n=(t.ORDER-wn)/Fi,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function kL(t,e){e!==void 0&&Ss(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ka(t,e,n=!1,r={}){if(t<=$n)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=kL(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:rh(o),ZERO:$n,ONE:wn,create:u=>lr(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return $n<=u&&u<t},is0:u=>u===$n,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&wn)===wn,neg:u=>lr(-u,t),eql:(u,d)=>u===d,sqr:u=>lr(u*u,t),add:(u,d)=>lr(u+d,t),sub:(u,d)=>lr(u-d,t),mul:(u,d)=>lr(u*d,t),pow:(u,d)=>RL(l,u,d),div:(u,d)=>lr(u*Gy(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Gy(u,t),sqrt:i||(u=>(c||(c=xL(t)),c(l,u))),toBytes:u=>n?cm(u,a):am(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?bd(u):nh(u)},invertBatch:u=>WA(l,u),cmov:(u,d,f)=>f?d:u});return Object.freeze(l)}function HA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function qA(t){const e=HA(t);return e+Math.ceil(e/2)}function PL(t,e,n=!1){const r=t.length,s=HA(e),i=qA(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?bd(t):nh(t),a=lr(o,e-wn)+wn;return n?cm(a,s):am(a,s)}const ua=BigInt(0),zi=BigInt(1);function Ac(t,e){const n=e.negate();return t?n:e}function ML(t,e,n){const r=i=>i.pz,s=WA(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function VA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function uf(t,e){VA(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=rh(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Yy(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=zi);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function LL(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function UL(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const df=new WeakMap,GA=new WeakMap;function hf(t){return GA.get(t)||1}function Qy(t){if(t!==ua)throw new Error("invalid wNAF")}function $L(t,e){return{constTimeNegate:Ac,hasPrecomputes(n){return hf(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ua;)r&zi&&(s=s.add(i)),i=i.double(),r>>=zi;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=uf(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=uf(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:p}=Yy(s,c,a);s=l,d?o=o.add(Ac(h,r[p])):i=i.add(Ac(f,r[u]))}return Qy(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=uf(n,e);for(let a=0;a<o.windows&&s!==ua;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Yy(s,a,o);if(s=c,!u){const f=r[l];i=i.add(d?f.negate():f)}}return Qy(s),i},getPrecomputes(n,r,s){let i=df.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),df.set(r,i))),i},wNAFCached(n,r,s){const i=hf(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=hf(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VA(r,e),GA.set(n,r),df.delete(n)}}}function BL(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>ua||r>ua;)n&zi&&(i=i.add(s)),r&zi&&(o=o.add(s)),s=s.double(),n>>=zi,r>>=zi;return{p1:i,p2:o}}function jL(t,e,n,r){LL(n,t),UL(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=CL(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=rh(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],b=Number(y>>BigInt(h)&l);u[b]=u[b].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(f=f.add(p),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function Zy(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return DL(e),e}else return ka(t)}function FL(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>ua))throw new Error(`CURVE.${o} must be positive bigint`)}const r=Zy(e.p,n.Fp),s=Zy(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ja=BigInt(0),No=BigInt(1),pu=BigInt(2);function zL(t){return sh(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function WL(t){const e=zL(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Ra,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?pu**BigInt(254):pu**BigInt(447),p=a?BigInt(8)*pu**BigInt(251)-No:BigInt(4)*pu**BigInt(445)-No,g=h+p+No,y=T=>lr(T,n),b=C(d);function C(T){return cm(y(T),u)}function E(T){const M=Dn("u coordinate",T,u);return a&&(M[31]&=127),y(bd(M))}function S(T){return bd(s(Dn("scalar",T,u)))}function O(T,M){const R=U(E(M),S(T));if(R===Ja)throw new Error("invalid private or public key received");return C(R)}function P(T){return O(T,b)}function $(T,M,R){const k=y(T*(M-R));return M=y(M-k),R=y(R+k),{x_2:M,x_3:R}}function U(T,M){$p("u",T,Ja,n),$p("scalar",M,h,g);const R=M,k=T;let j=No,D=Ja,m=T,w=No,_=Ja;for(let I=BigInt(l-1);I>=Ja;I--){const x=R>>I&No;_^=x,{x_2:j,x_3:m}=$(_,j,m),{x_2:D,x_3:w}=$(_,D,w),_=x;const L=j+D,F=y(L*L),V=j-D,q=y(V*V),z=F-q,J=m+w,me=m-w,Ie=y(me*L),pe=y(J*V),xe=Ie+pe,Ze=Ie-pe;m=y(xe*xe),w=y(k*y(Ze*Ze)),j=y(F*q),D=y(z*(F+y(f*z)))}({x_2:j,x_3:m}=$(_,j,m)),{x_2:D,x_3:w}=$(_,D,w);const A=i(D);return y(j*A)}return{scalarMult:O,scalarMultBase:P,getSharedSecret:(T,M)=>O(T,M),getPublicKey:T=>P(T),utils:{randomPrivateKey:()=>c(u)},GuBytes:b.slice()}}BigInt(0);const HL=BigInt(1),Jy=BigInt(2),qL=BigInt(3),VL=BigInt(5);BigInt(8);const KA={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function GL(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=KA.p,o=t*t%i*t%i,a=Er(o,Jy,i)*o%i,c=Er(a,HL,i)*t%i,l=Er(c,VL,i)*c%i,u=Er(l,e,i)*l%i,d=Er(u,n,i)*u%i,f=Er(d,r,i)*d%i,h=Er(f,s,i)*f%i,p=Er(h,s,i)*f%i,g=Er(p,e,i)*l%i;return{pow_p_5_8:Er(g,Jy,i)*t%i,b2:o}}function KL(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Bp=(()=>{const t=KA.p;return WL({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=GL(e);return lr(Er(n,qL,t)*r,t)},adjustScalarBytes:KL})})();function Xy(t){t.lowS!==void 0&&yd("lowS",t.lowS),t.prehash!==void 0&&yd("prehash",t.prehash)}class YL extends Error{constructor(e=""){super(e)}}const ms={Err:YL,_tlv:{encode:(t,e)=>{const{Err:n}=ms;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=fu(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?fu(s.length/2|128):"";return fu(t)+i+s+e},decode(t,e){const{Err:n}=ms;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ms;if(t<Cc)throw new e("integer: negative integers are not allowed");let n=fu(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ms;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nh(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ms,s=Dn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ms,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Cc=BigInt(0),Ic=BigInt(1),QL=BigInt(2),gu=BigInt(3),ZL=BigInt(4);function JL(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function YA(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Dn("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function XL(t,e={}){const{Fp:n,Fn:r}=FL("weierstrass",t,e),{h:s,n:i}=t;sh(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(U,T,M){const{x:R,y:k}=T.toAffine(),j=n.toBytes(R);if(yd("isCompressed",M),M){a();const D=!n.isOdd(k);return ji(QA(D),j)}else return ji(Uint8Array.of(4),j,n.toBytes(k))}function l(U){hr(U);const T=n.BYTES,M=T+1,R=2*T+1,k=U.length,j=U[0],D=U.subarray(1);if(k===M&&(j===2||j===3)){const m=n.fromBytes(D);if(!n.isValid(m))throw new Error("bad point: is not on curve, wrong x");const w=f(m);let _;try{_=n.sqrt(w)}catch(I){const x=I instanceof Error?": "+I.message:"";throw new Error("bad point: is not on curve, sqrt error"+x)}a();const A=n.isOdd(_);return(j&1)===1!==A&&(_=n.neg(_)),{x:m,y:_}}else if(k===R&&j===4){const m=n.fromBytes(D.subarray(T*0,T*1)),w=n.fromBytes(D.subarray(T*1,T*2));if(!h(m,w))throw new Error("bad point: is not on curve");return{x:m,y:w}}else throw new Error(`bad point: got length ${k}, expected compressed=${M} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,f=JL(n,t.a,t.b);function h(U,T){const M=n.sqr(T),R=f(U);return n.eql(M,R)}if(!h(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,gu),ZL),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(U,T,M=!1){if(!n.isValid(T)||M&&n.is0(T))throw new Error(`bad point coordinate ${U}`);return T}function b(U){if(!(U instanceof O))throw new Error("ProjectivePoint expected")}const C=Vy((U,T)=>{const{px:M,py:R,pz:k}=U;if(n.eql(k,n.ONE))return{x:M,y:R};const j=U.is0();T==null&&(T=j?n.ONE:n.inv(k));const D=n.mul(M,T),m=n.mul(R,T),w=n.mul(k,T);if(j)return{x:n.ZERO,y:n.ZERO};if(!n.eql(w,n.ONE))throw new Error("invZ was invalid");return{x:D,y:m}}),E=Vy(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:T,y:M}=U.toAffine();if(!n.isValid(T)||!n.isValid(M))throw new Error("bad point: x or y not field elements");if(!h(T,M))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function S(U,T,M,R,k){return M=new O(n.mul(M.px,U),M.py,M.pz),T=Ac(R,T),M=Ac(k,M),T.add(M)}class O{constructor(T,M,R){this.px=y("x",T),this.py=y("y",M,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(T){const{x:M,y:R}=T||{};if(!T||!n.isValid(M)||!n.isValid(R))throw new Error("invalid affine point");if(T instanceof O)throw new Error("projective point not allowed");return n.is0(M)&&n.is0(R)?O.ZERO:new O(M,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){return ML(O,"pz",T)}static fromBytes(T){return hr(T),O.fromHex(T)}static fromHex(T){const M=O.fromAffine(d(Dn("pointHex",T)));return M.assertValidity(),M}static fromPrivateKey(T){const M=YA(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return O.BASE.multiply(M(T))}static msm(T,M){return jL(O,r,T,M)}precompute(T=8,M=!0){return $.setWindowSize(this,T),M||this.multiply(gu),this}_setWindowSize(T){this.precompute(T)}assertValidity(){E(this)}hasEvenY(){const{y:T}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(T)}equals(T){b(T);const{px:M,py:R,pz:k}=this,{px:j,py:D,pz:m}=T,w=n.eql(n.mul(M,m),n.mul(j,k)),_=n.eql(n.mul(R,m),n.mul(D,k));return w&&_}negate(){return new O(this.px,n.neg(this.py),this.pz)}double(){const{a:T,b:M}=t,R=n.mul(M,gu),{px:k,py:j,pz:D}=this;let m=n.ZERO,w=n.ZERO,_=n.ZERO,A=n.mul(k,k),I=n.mul(j,j),x=n.mul(D,D),L=n.mul(k,j);return L=n.add(L,L),_=n.mul(k,D),_=n.add(_,_),m=n.mul(T,_),w=n.mul(R,x),w=n.add(m,w),m=n.sub(I,w),w=n.add(I,w),w=n.mul(m,w),m=n.mul(L,m),_=n.mul(R,_),x=n.mul(T,x),L=n.sub(A,x),L=n.mul(T,L),L=n.add(L,_),_=n.add(A,A),A=n.add(_,A),A=n.add(A,x),A=n.mul(A,L),w=n.add(w,A),x=n.mul(j,D),x=n.add(x,x),A=n.mul(x,L),m=n.sub(m,A),_=n.mul(x,I),_=n.add(_,_),_=n.add(_,_),new O(m,w,_)}add(T){b(T);const{px:M,py:R,pz:k}=this,{px:j,py:D,pz:m}=T;let w=n.ZERO,_=n.ZERO,A=n.ZERO;const I=t.a,x=n.mul(t.b,gu);let L=n.mul(M,j),F=n.mul(R,D),V=n.mul(k,m),q=n.add(M,R),z=n.add(j,D);q=n.mul(q,z),z=n.add(L,F),q=n.sub(q,z),z=n.add(M,k);let J=n.add(j,m);return z=n.mul(z,J),J=n.add(L,V),z=n.sub(z,J),J=n.add(R,k),w=n.add(D,m),J=n.mul(J,w),w=n.add(F,V),J=n.sub(J,w),A=n.mul(I,z),w=n.mul(x,V),A=n.add(w,A),w=n.sub(F,A),A=n.add(F,A),_=n.mul(w,A),F=n.add(L,L),F=n.add(F,L),V=n.mul(I,V),z=n.mul(x,z),F=n.add(F,V),V=n.sub(L,V),V=n.mul(I,V),z=n.add(z,V),L=n.mul(F,z),_=n.add(_,L),L=n.mul(J,z),w=n.mul(q,w),w=n.sub(w,L),L=n.mul(q,F),A=n.mul(J,A),A=n.add(A,L),new O(w,_,A)}subtract(T){return this.add(T.negate())}is0(){return this.equals(O.ZERO)}multiply(T){const{endo:M}=e;if(!r.isValidNot0(T))throw new Error("invalid scalar: out of range");let R,k;const j=D=>$.wNAFCached(this,D,O.normalizeZ);if(M){const{k1neg:D,k1:m,k2neg:w,k2:_}=M.splitScalar(T),{p:A,f:I}=j(m),{p:x,f:L}=j(_);k=I.add(L),R=S(M.beta,A,x,D,w)}else{const{p:D,f:m}=j(T);R=D,k=m}return O.normalizeZ([R,k])[0]}multiplyUnsafe(T){const{endo:M}=e,R=this;if(!r.isValid(T))throw new Error("invalid scalar: out of range");if(T===Cc||R.is0())return O.ZERO;if(T===Ic)return R;if($.hasPrecomputes(this))return this.multiply(T);if(M){const{k1neg:k,k1:j,k2neg:D,k2:m}=M.splitScalar(T),{p1:w,p2:_}=BL(O,R,j,m);return S(M.beta,w,_,k,D)}else return $.wNAFCachedUnsafe(R,T)}multiplyAndAddUnsafe(T,M,R){const k=this.multiplyUnsafe(M).add(T.multiplyUnsafe(R));return k.is0()?void 0:k}toAffine(T){return C(this,T)}isTorsionFree(){const{isTorsionFree:T}=e;return s===Ic?!0:T?T(O,this):$.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:T}=e;return s===Ic?this:T?T(O,this):this.multiplyUnsafe(s)}toBytes(T=!0){return yd("isCompressed",T),this.assertValidity(),u(O,this,T)}toRawBytes(T=!0){return this.toBytes(T)}toHex(T=!0){return qc(this.toBytes(T))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}O.BASE=new O(t.Gx,t.Gy,n.ONE),O.ZERO=new O(n.ZERO,n.ONE,n.ZERO),O.Fp=n,O.Fn=r;const P=r.BITS,$=$L(O,e.endo?Math.ceil(P/2):P);return O}function QA(t){return Uint8Array.of(t?2:3)}function eU(t,e,n={}){sh(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Ra,s=e.hmac||((R,...k)=>eh(e.hash,R,ji(...k))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const k=a>>Ic;return R>k}function u(R){return l(R)?o.neg(R):R}function d(R,k){if(!o.isValidNot0(k))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class f{constructor(k,j,D){d("r",k),d("s",j),this.r=k,this.s=j,D!=null&&(this.recovery=D),Object.freeze(this)}static fromCompact(k){const j=o.BYTES,D=Dn("compactSignature",k,j*2);return new f(o.fromBytes(D.subarray(0,j)),o.fromBytes(D.subarray(j,j*2)))}static fromDER(k){const{r:j,s:D}=ms.toSig(Dn("DER",k));return new f(j,D)}assertValidity(){}addRecoveryBit(k){return new f(this.r,this.s,k)}recoverPublicKey(k){const j=i.ORDER,{r:D,s:m,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*QL<j&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=w===2||w===3?D+a:D;if(!i.isValid(_))throw new Error("recovery id 2 or 3 invalid");const A=i.toBytes(_),I=t.fromHex(ji(QA((w&1)===0),A)),x=o.inv(_),L=E(Dn("msgHash",k)),F=o.create(-L*x),V=o.create(m*x),q=t.BASE.multiplyUnsafe(F).add(I.multiplyUnsafe(V));if(q.is0())throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes(k){if(k==="compact")return ji(o.toBytes(this.r),o.toBytes(this.s));if(k==="der")return rm(ms.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return qc(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return qc(this.toBytes("compact"))}}const h=YA(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return h(R),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const R=a;return PL(r(qA(R)),R)},precompute(R=8,k=t.BASE){return k.precompute(R,!1)}};function g(R,k=!0){return t.fromPrivateKey(R).toBytes(k)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const k=Dn("key",R).length,j=i.BYTES,D=j+1,m=2*j+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===D))return k===D||k===m}function b(R,k,j=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(k)===!1)throw new Error("second arg must be public key");return t.fromHex(k).multiply(h(R)).toBytes(j)}const C=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const k=nh(R),j=R.length*8-c;return j>0?k>>BigInt(j):k},E=e.bits2int_modN||function(R){return o.create(C(R))},S=rh(c);function O(R){return $p("num < 2^"+c,R,Cc,S),o.toBytes(R)}function P(R,k,j=$){if(["recovered","canonical"].some(q=>q in j))throw new Error("sign() legacy options not supported");const{hash:D}=e;let{lowS:m,prehash:w,extraEntropy:_}=j;m==null&&(m=!0),R=Dn("msgHash",R),Xy(j),w&&(R=Dn("prehashed msgHash",D(R)));const A=E(R),I=h(k),x=[O(I),O(A)];if(_!=null&&_!==!1){const q=_===!0?r(i.BYTES):_;x.push(Dn("extraEntropy",q))}const L=ji(...x),F=A;function V(q){const z=C(q);if(!o.isValidNot0(z))return;const J=o.inv(z),me=t.BASE.multiply(z).toAffine(),Ie=o.create(me.x);if(Ie===Cc)return;const pe=o.create(J*o.create(F+Ie*I));if(pe===Cc)return;let xe=(me.x===Ie?0:2)|Number(me.y&Ic),Ze=pe;return m&&l(pe)&&(Ze=u(pe),xe^=1),new f(Ie,Ze,xe)}return{seed:L,k2sig:V}}const $={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function T(R,k,j=$){const{seed:D,k2sig:m}=P(R,k,j);return IL(e.hash.outputLen,o.BYTES,s)(D,m)}t.BASE.precompute(8);function M(R,k,j,D=U){const m=R;k=Dn("msgHash",k),j=Dn("publicKey",j),Xy(D);const{lowS:w,prehash:_,format:A}=D;if("strict"in D)throw new Error("options.strict was renamed to lowS");if(A!==void 0&&!["compact","der","js"].includes(A))throw new Error('format must be "compact", "der" or "js"');const I=typeof m=="string"||em(m),x=!I&&!A&&typeof m=="object"&&m!==null&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!I&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let L,F;try{if(x)if(A===void 0||A==="js")L=new f(m.r,m.s);else throw new Error("invalid format");if(I){try{A!=="compact"&&(L=f.fromDER(m))}catch(xe){if(!(xe instanceof ms.Err))throw xe}!L&&A!=="der"&&(L=f.fromCompact(m))}F=t.fromHex(j)}catch{return!1}if(!L||w&&L.hasHighS())return!1;_&&(k=e.hash(k));const{r:V,s:q}=L,z=E(k),J=o.inv(q),me=o.create(z*J),Ie=o.create(V*J),pe=t.BASE.multiplyUnsafe(me).add(F.multiplyUnsafe(Ie));return pe.is0()?!1:o.create(pe.x)===V}return Object.freeze({getPublicKey:g,getSharedSecret:b,sign:T,verify:M,utils:p,Point:t,Signature:f})}function tU(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=ka(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function nU(t){const{CURVE:e,curveOpts:n}=tU(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function rU(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function sU(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=nU(t),s=XL(e,n),i=eU(s,r,n);return rU(t,i)}function jp(t,e){const n=r=>sU({...t,hash:r});return{...n(e),create:n}}const ZA={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},JA={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},XA={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},iU=ka(ZA.p),oU=ka(JA.p),aU=ka(XA.p),cU=jp({...ZA,Fp:iU,lowS:!1},Xd);jp({...JA,Fp:oU,lowS:!1},m3),jp({...XA,Fp:aU,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},g3);const lU=cU,eC="base10",yn="base16",Pn="base64pad",ti="base64url",Hl="utf8",tC=0,_s=1,ql=2,uU=0,e0=1,Nc=12,lm=32;function dU(){const t=Bp.utils.randomPrivateKey(),e=Bp.getPublicKey(t);return{privateKey:jn(t,yn),publicKey:jn(e,yn)}}function Fp(){const t=Ra(lm);return jn(t,yn)}function hU(t,e){const n=Bp.getSharedSecret(dr(t,yn),dr(e,yn)),r=_L(th,n,void 0,void 0,lm);return jn(r,yn)}function Vu(t){const e=th(dr(t,yn));return jn(e,yn)}function ar(t){const e=th(dr(t,Hl));return jn(e,yn)}function nC(t){return dr(`${t}`,eC)}function so(t){return Number(jn(t,eC))}function rC(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function sC(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function fU(t){const e=nC(typeof t.type<"u"?t.type:tC);if(so(e)===_s&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?dr(t.senderPublicKey,yn):void 0,r=typeof t.iv<"u"?dr(t.iv,yn):Ra(Nc),s=dr(t.symKey,yn),i=LA(s,r).encrypt(dr(t.message,Hl)),o=iC({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ti?rC(o):o}function pU(t){const e=dr(t.symKey,yn),{sealed:n,iv:r}=Gc({encoded:t.encoded,encoding:t.encoding}),s=LA(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return jn(s,Hl)}function gU(t,e){const n=nC(ql),r=Ra(Nc),s=dr(t,Hl),i=iC({type:n,sealed:s,iv:r});return e===ti?rC(i):i}function mU(t,e){const{sealed:n}=Gc({encoded:t,encoding:e});return jn(n,Hl)}function iC(t){if(so(t.type)===ql)return jn(_c([t.type,t.sealed]),Pn);if(so(t.type)===_s){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return jn(_c([t.type,t.senderPublicKey,t.iv,t.sealed]),Pn)}return jn(_c([t.type,t.iv,t.sealed]),Pn)}function Gc(t){const e=(t.encoding||Pn)===ti?sC(t.encoded):t.encoded,n=dr(e,Pn),r=n.slice(uU,e0),s=e0;if(so(r)===_s){const c=s+lm,l=c+Nc,u=n.slice(s,c),d=n.slice(c,l),f=n.slice(l);return{type:r,sealed:f,iv:d,senderPublicKey:u}}if(so(r)===ql){const c=n.slice(s),l=Ra(Nc);return{type:r,sealed:c,iv:l}}const i=s+Nc,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function wU(t,e){const n=Gc({encoded:t,encoding:e==null?void 0:e.encoding});return oC({type:so(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?jn(n.senderPublicKey,yn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function oC(t){const e=(t==null?void 0:t.type)||tC;if(e===_s){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function t0(t){return t.type===_s&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function n0(t){return t.type===ql}function yU(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return _c([new Uint8Array([4]),e,n])}function bU(t,e){const[n,r,s]=t.split("."),i=Buffer.from(sC(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=th(c),u=yU(e);if(!lU.verify(_c([o,a]),l,u))throw new Error("Invalid signature");return mp(t).payload}const vU="irn";function vd(t){return(t==null?void 0:t.relay)||{protocol:vU}}function Yo(t){const e=KP[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function EU(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function r0(t){if(!t.includes("wc:")){const l=wA(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:_U(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:EU(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function _U(t){return t.startsWith("//")?t.substring(2):t}function AU(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function s0(t){const e=new URLSearchParams,n=AU(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function mu(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var CU=Object.defineProperty,IU=Object.defineProperties,NU=Object.getOwnPropertyDescriptors,i0=Object.getOwnPropertySymbols,SU=Object.prototype.hasOwnProperty,TU=Object.prototype.propertyIsEnumerable,o0=(t,e,n)=>e in t?CU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xU=(t,e)=>{for(var n in e||(e={}))SU.call(e,n)&&o0(t,n,e[n]);if(i0)for(var n of i0(e))TU.call(e,n)&&o0(t,n,e[n]);return t},OU=(t,e)=>IU(t,NU(e));function Pa(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function DU(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Pa(n.accounts))}),e}function RU(t,e){const n=[];return Object.values(t).forEach(r=>{Pa(r.accounts).includes(e)&&n.push(...r.methods)}),n}function kU(t,e){const n=[];return Object.values(t).forEach(r=>{Pa(r.accounts).includes(e)&&n.push(...r.events)}),n}function ih(t){return t.includes(":")}function Qo(t){return ih(t)?t.split(":")[0]:t}function a0(t){var e,n,r;const s={};if(!Yr(t))return s;for(const[i,o]of Object.entries(t)){const a=ih(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Qo(i);s[u]=OU(xU({},s[u]),{chains:Kr(a,(e=s[u])==null?void 0:e.chains),methods:Kr(c,(n=s[u])==null?void 0:n.methods),events:Kr(l,(r=s[u])==null?void 0:r.events)})}return s}function PU(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function c0(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=PU(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Kr(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function MU(t,e){var n,r,s,i,o,a;const c=a0(t),l=a0(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const f of d)u[f]={chains:Kr((n=c[f])==null?void 0:n.chains,(r=l[f])==null?void 0:r.chains),methods:Kr((s=c[f])==null?void 0:s.methods,(i=l[f])==null?void 0:i.methods),events:Kr((o=c[f])==null?void 0:o.events,(a=l[f])==null?void 0:a.events)};return u}const LU={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},UU={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function te(t,e){const{message:n,code:r}=UU[t];return{message:e?`${n} ${e}`:n,code:r}}function dt(t,e){const{message:n,code:r}=LU[t];return{message:e?`${n} ${e}`:n,code:r}}function As(t,e){return!!Array.isArray(t)}function Yr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Mt(t){return typeof t>"u"}function Nt(t,e){return e&&Mt(t)?!0:typeof t=="string"&&!!t.trim().length}function um(t,e){return e&&Mt(t)?!0:typeof t=="number"&&!isNaN(t)}function $U(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Bi(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Pa(a),d=n[o];(!Bi(hA(o,d),u)||!Bi(d.methods,c)||!Bi(d.events,l))&&(i=!1)}),i):!1}function Ed(t){return Nt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function BU(t){if(Nt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Ed(n)}}return!1}function jU(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Nt(t,!1)){if(e(t))return!0;const n=wA(t);return e(n)}}catch{}return!1}function FU(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function zU(t){return t==null?void 0:t.topic}function WU(t,e){let n=null;return Nt(t==null?void 0:t.publicKey,!1)||(n=te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function l0(t){let e=!0;return As(t)?t.length&&(e=t.every(n=>Nt(n,!1))):e=!1,e}function HU(t,e,n){let r=null;return As(e)&&e.length?e.forEach(s=>{r||Ed(s)||(r=dt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Ed(t)||(r=dt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function qU(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=HU(s,hA(s,i),`${e} ${n}`);o&&(r=o)}),r}function VU(t,e){let n=null;return As(t)?t.forEach(r=>{n||BU(r)||(n=dt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=dt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function GU(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=VU(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function KU(t,e){let n=null;return l0(t==null?void 0:t.methods)?l0(t==null?void 0:t.events)||(n=dt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=dt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function aC(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=KU(r,`${e}, namespace`);s&&(n=s)}),n}function YU(t,e,n){let r=null;if(t&&Yr(t)){const s=aC(t,e);s&&(r=s);const i=qU(t,e,n);i&&(r=i)}else r=te("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function ff(t,e){let n=null;if(t&&Yr(t)){const r=aC(t,e);r&&(n=r);const s=GU(t,e);s&&(n=s)}else n=te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function cC(t){return Nt(t.protocol,!0)}function QU(t,e){let n=!1;return t?t&&As(t)&&t.length&&t.forEach(r=>{n=cC(r)}):n=!0,n}function ZU(t){return typeof t=="number"}function xn(t){return typeof t<"u"&&typeof t!==null}function JU(t){return!(!t||typeof t!="object"||!t.code||!um(t.code,!1)||!t.message||!Nt(t.message,!1))}function XU(t){return!(Mt(t)||!Nt(t.method,!1))}function e4(t){return!(Mt(t)||Mt(t.result)&&Mt(t.error)||!um(t.id,!1)||!Nt(t.jsonrpc,!1))}function t4(t){return!(Mt(t)||!Nt(t.name,!1))}function u0(t,e){return!(!Ed(e)||!DU(t).includes(e))}function n4(t,e,n){return Nt(n,!1)?RU(t,e).includes(n):!1}function r4(t,e,n){return Nt(n,!1)?kU(t,e).includes(n):!1}function d0(t,e,n){let r=null;const s=s4(t),i=i4(e),o=Object.keys(s),a=Object.keys(i),c=h0(Object.keys(t)),l=h0(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=te("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Bi(o,a)||(r=te("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=Pa(e[d].accounts);f.includes(d)||(r=te("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(Bi(s[d].methods,i[d].methods)?Bi(s[d].events,i[d].events)||(r=te("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=te("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function s4(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function h0(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function i4(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Pa(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function o4(t,e){return um(t,!1)&&t<=e.max&&t>=e.min}function f0(){const t=zl();return new Promise(e=>{switch(t){case Yn.browser:e(a4());break;case Yn.reactNative:e(c4());break;case Yn.node:e(l4());break;default:e(!0)}})}function a4(){return Da()&&(navigator==null?void 0:navigator.onLine)}async function c4(){if(wi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function l4(){return!0}function u4(t){switch(zl()){case Yn.browser:d4(t);break;case Yn.reactNative:h4(t);break}}function d4(t){!wi()&&Da()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function h4(t){wi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function f4(){var t;return Da()&&to()?((t=to())==null?void 0:t.visibilityState)==="visible":!0}const pf={};class Xa{static get(e){return pf[e]}static set(e,n){pf[e]=n}static delete(e){delete pf[e]}}function p4(t){const e=Oa.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function g4({publicKey:t,signature:e,payload:n}){var r;const s=zp(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=y4(n.address),a=n.era==="00"?new Uint8Array([0]):zp(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${w4(n.tip)}`),d=v4(u),f=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),h=b4(f.length+1);return new Uint8Array([...h,i,...f])}function m4(t){const e=zp(t),n=oM.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function zp(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function w4(t){return t.startsWith("0x")?t.slice(2):t}function y4(t){const e=Oa.decode(t)[0];return e===42?0:e===60?2:1}function b4(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function v4(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function E4(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=p4(t.transaction.address),r=g4({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return m4(s)}const _4="PARSE_ERROR",A4="INVALID_REQUEST",C4="METHOD_NOT_FOUND",I4="INVALID_PARAMS",lC="INTERNAL_ERROR",dm="SERVER_ERROR",N4=[-32700,-32600,-32601,-32602,-32603],Sc={[_4]:{code:-32700,message:"Parse error"},[A4]:{code:-32600,message:"Invalid Request"},[C4]:{code:-32601,message:"Method not found"},[I4]:{code:-32602,message:"Invalid params"},[lC]:{code:-32603,message:"Internal error"},[dm]:{code:-32e3,message:"Server error"}},uC=dm;function S4(t){return N4.includes(t)}function p0(t){return Object.keys(Sc).includes(t)?Sc[t]:Sc[uC]}function T4(t){const e=Object.values(Sc).find(n=>n.code===t);return e||Sc[uC]}function dC(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var hC={},cs={},g0;function x4(){if(g0)return cs;g0=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.isBrowserCryptoAvailable=cs.getSubtleCrypto=cs.getBrowerCrypto=void 0;function t(){return(Mn===null||Mn===void 0?void 0:Mn.crypto)||(Mn===null||Mn===void 0?void 0:Mn.msCrypto)||{}}cs.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}cs.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return cs.isBrowserCryptoAvailable=n,cs}var ls={},m0;function O4(){if(m0)return ls;m0=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.isBrowser=ls.isNode=ls.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ls.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ls.isNode=e;function n(){return!t()&&!e()}return ls.isBrowser=n,ls}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pl;e.__exportStar(x4(),t),e.__exportStar(O4(),t)})(hC);function zr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ii(t=6){return BigInt(zr(t))}function Hr(t,e,n){return{id:n||zr(),jsonrpc:"2.0",method:t,params:e}}function Kc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function oh(t,e,n){return{id:t,jsonrpc:"2.0",error:D4(e)}}function D4(t,e){return typeof t>"u"?p0(lC):(typeof t=="string"&&(t=Object.assign(Object.assign({},p0(dm)),{message:t})),S4(t.code)&&(t=T4(t.code)),t)}let R4=class{},k4=class extends R4{constructor(){super()}},P4=class extends k4{constructor(e){super()}};const M4="^https?:",L4="^wss?:";function U4(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function fC(t,e){const n=U4(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function w0(t){return fC(t,M4)}function y0(t){return fC(t,L4)}function $4(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function pC(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function hm(t){return pC(t)&&"method"in t}function ah(t){return pC(t)&&(Wr(t)||cr(t))}function Wr(t){return"result"in t}function cr(t){return"error"in t}let mr=class extends P4{constructor(e){super(e),this.events=new gr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Hr(e.method,e.params||[],e.id||ii().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{cr(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ah(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const B4=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),j4=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",b0=t=>t.split("?")[0],v0=10,F4=B4();let z4=class{constructor(e){if(this.url=e,this.events=new gr.EventEmitter,this.registering=!1,!y0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ns(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!y0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=hC.isReactNative()?void 0:{rejectUnauthorized:!$4(e)},i=new F4(e,[],s);j4()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=oh(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return dC(e,b0(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>v0&&this.events.setMaxListeners(v0)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${b0(this.url)}`));return this.events.emit("register_error",n),n}};var W4={};const gC="wc",mC=2,Wp="core",Qr=`${gC}@2:${Wp}:`,H4={logger:"error"},q4={database:":memory:"},V4="crypto",E0="client_ed25519_seed",G4=ee.ONE_DAY,K4="keychain",Y4="0.3",Q4="messages",Z4="0.3",J4=ee.SIX_HOURS,X4="publisher",wC="irn",e5="error",yC="wss://relay.walletconnect.org",t5="relayer",vt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},n5="_subscription",tr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},r5=.1,Hp="2.21.7",ut={link_mode:"link_mode",relay:"relay"},Gu={inbound:"inbound",outbound:"outbound"},s5="0.3",i5="WALLETCONNECT_CLIENT_ID",_0="WALLETCONNECT_LINK_MODE_APPS",qn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},o5="subscription",a5="0.3",c5="pairing",l5="0.3",ec={wc_pairingDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:ee.ONE_DAY,prompt:!1,tag:0}}},Pi={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},u5="history",d5="0.3",h5="expirer",ir={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},f5="0.3",p5="verify-api",g5="https://verify.walletconnect.com",bC="https://verify.walletconnect.org",Tc=bC,m5=`${Tc}/v3`,w5=[g5,bC],y5="echo",b5="https://echo.walletconnect.com",jr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ps={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Gs={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},tc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ai={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},nc={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},v5=.1,E5="event-client",_5=86400,A5="https://pulse.walletconnect.org/batch";function C5(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,b=0,C=p.length;b!==C&&p[b]===0;)b++,g++;for(var E=(C-b)*u+1>>>0,S=new Uint8Array(E);b!==C;){for(var O=p[b],P=0,$=E-1;(O!==0||P<y)&&$!==-1;$--,P++)O+=256*S[$]>>>0,S[$]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");y=P,b++}for(var U=E-y;U!==E&&S[U]===0;)U++;for(var T=c.repeat(g);U<E;++U)T+=t.charAt(S[U]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,b=0;p[g]===c;)y++,g++;for(var C=(p.length-g)*l+1>>>0,E=new Uint8Array(C);p[g];){var S=n[p.charCodeAt(g)];if(S===255)return;for(var O=0,P=C-1;(S!==0||O<b)&&P!==-1;P--,O++)S+=a*E[P]>>>0,E[P]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");b=O,g++}if(p[g]!==" "){for(var $=C-b;$!==C&&E[$]===0;)$++;for(var U=new Uint8Array(y+(C-$)),T=y;$!==C;)U[T++]=E[$++];return U}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var I5=C5,N5=I5;const vC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},S5=t=>new TextEncoder().encode(t),T5=t=>new TextDecoder().decode(t);class x5{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class O5{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return EC(this,e)}}class D5{constructor(e){this.decoders=e}or(e){return EC(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const EC=(t,e)=>new D5({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class R5{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new x5(e,n,r),this.decoder=new O5(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ch=({name:t,prefix:e,encode:n,decode:r})=>new R5(t,e,n,r),Vl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=N5(n,e);return ch({prefix:t,name:e,encode:r,decode:i=>vC(s(i))})},k5=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},P5=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Xt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ch({prefix:e,name:t,encode(s){return P5(s,r,n)},decode(s){return k5(s,r,n,t)}}),M5=ch({prefix:"\0",name:"identity",encode:t=>T5(t),decode:t=>S5(t)});var L5=Object.freeze({__proto__:null,identity:M5});const U5=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $5=Object.freeze({__proto__:null,base2:U5});const B5=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var j5=Object.freeze({__proto__:null,base8:B5});const F5=Vl({prefix:"9",name:"base10",alphabet:"0123456789"});var z5=Object.freeze({__proto__:null,base10:F5});const W5=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),H5=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var q5=Object.freeze({__proto__:null,base16:W5,base16upper:H5});const V5=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),G5=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),K5=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Y5=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Q5=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Z5=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J5=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),X5=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),e$=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var t$=Object.freeze({__proto__:null,base32:V5,base32upper:G5,base32pad:K5,base32padupper:Y5,base32hex:Q5,base32hexupper:Z5,base32hexpad:J5,base32hexpadupper:X5,base32z:e$});const n$=Vl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),r$=Vl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var s$=Object.freeze({__proto__:null,base36:n$,base36upper:r$});const i$=Vl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o$=Vl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var a$=Object.freeze({__proto__:null,base58btc:i$,base58flickr:o$});const c$=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),l$=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),u$=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),d$=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var h$=Object.freeze({__proto__:null,base64:c$,base64pad:l$,base64url:u$,base64urlpad:d$});const _C=Array.from(""),f$=_C.reduce((t,e,n)=>(t[n]=e,t),[]),p$=_C.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function g$(t){return t.reduce((e,n)=>(e+=f$[n],e),"")}function m$(t){const e=[];for(const n of t){const r=p$[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const w$=ch({prefix:"",name:"base256emoji",encode:g$,decode:m$});var y$=Object.freeze({__proto__:null,base256emoji:w$}),b$=AC,A0=128,v$=-128,E$=Math.pow(2,31);function AC(t,e,n){e=e||[],n=n||0;for(var r=n;t>=E$;)e[n++]=t&255|A0,t/=128;for(;t&v$;)e[n++]=t&255|A0,t>>>=7;return e[n]=t|0,AC.bytes=n-r+1,e}var _$=qp,A$=128,C0=127;function qp(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw qp.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&C0)<<s:(o&C0)*Math.pow(2,s),s+=7}while(o>=A$);return qp.bytes=i-r,n}var C$=Math.pow(2,7),I$=Math.pow(2,14),N$=Math.pow(2,21),S$=Math.pow(2,28),T$=Math.pow(2,35),x$=Math.pow(2,42),O$=Math.pow(2,49),D$=Math.pow(2,56),R$=Math.pow(2,63),k$=function(t){return t<C$?1:t<I$?2:t<N$?3:t<S$?4:t<T$?5:t<x$?6:t<O$?7:t<D$?8:t<R$?9:10},P$={encode:b$,decode:_$,encodingLength:k$},CC=P$;const I0=(t,e,n=0)=>(CC.encode(t,e,n),e),N0=t=>CC.encodingLength(t),Vp=(t,e)=>{const n=e.byteLength,r=N0(t),s=r+N0(n),i=new Uint8Array(s+n);return I0(t,i,0),I0(n,i,r),i.set(e,s),new M$(t,n,e,i)};class M${constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const IC=({name:t,code:e,encode:n})=>new L$(t,e,n);class L${constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Vp(this.code,n):n.then(r=>Vp(this.code,r))}else throw Error("Unknown type, must be binary type")}}const NC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),U$=IC({name:"sha2-256",code:18,encode:NC("SHA-256")}),$$=IC({name:"sha2-512",code:19,encode:NC("SHA-512")});var B$=Object.freeze({__proto__:null,sha256:U$,sha512:$$});const SC=0,j$="identity",TC=vC,F$=t=>Vp(SC,TC(t)),z$={code:SC,name:j$,encode:TC,digest:F$};var W$=Object.freeze({__proto__:null,identity:z$});new TextEncoder,new TextDecoder;const S0={...L5,...$5,...j5,...z5,...q5,...t$,...s$,...a$,...h$,...y$};({...B$,...W$});function xC(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function H$(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xC(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function OC(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const T0=OC("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),gf=OC("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=H$(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),q$={utf8:T0,"utf-8":T0,hex:S0.base16,latin1:gf,ascii:gf,binary:gf,...S0};function V$(t,e="utf8"){const n=q$[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xC(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var G$=Object.defineProperty,K$=(t,e,n)=>e in t?G$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$r=(t,e,n)=>K$(t,typeof e!="symbol"?e+"":e,n);class Y${constructor(e,n){this.core=e,this.logger=n,$r(this,"keychain",new Map),$r(this,"name",K4),$r(this,"version",Y4),$r(this,"initialized",!1),$r(this,"storagePrefix",Qr),$r(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),$r(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),$r(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),$r(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=te("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),$r(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=un(n,this.name)}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Op(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Dp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Q$=Object.defineProperty,Z$=(t,e,n)=>e in t?Q$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>Z$(t,typeof e!="symbol"?e+"":e,n);class J${constructor(e,n,r){this.core=e,this.logger=n,Vt(this,"name",V4),Vt(this,"keychain"),Vt(this,"randomSessionIdentifier",Fp()),Vt(this,"initialized",!1),Vt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Vt(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Vt(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Yw(s);return i_(i.publicKey)}),Vt(this,"generateKeyPair",()=>{this.isInitialized();const s=dU();return this.setPrivateKey(s.publicKey,s.privateKey)}),Vt(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Yw(i),a=this.randomSessionIdentifier;return await lD(a,s,G4,o)}),Vt(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=hU(a,i);return this.setSymKey(c,o)}),Vt(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Vu(s);return await this.keychain.set(o,s),o}),Vt(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Vt(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Vt(this,"encode",async(s,i,o)=>{this.isInitialized();const a=oC(o),c=Ns(i);if(n0(a))return gU(c,o==null?void 0:o.encoding);if(t0(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return fU({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Vt(this,"decode",async(s,i,o)=>{this.isInitialized();const a=wU(i,o);if(n0(a)){const c=mU(i,o==null?void 0:o.encoding);return eo(c)}if(t0(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=pU({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return eo(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Vt(this,"getPayloadType",(s,i=Pn)=>{const o=Gc({encoded:s,encoding:i});return so(o.type)}),Vt(this,"getPayloadSenderPublicKey",(s,i=Pn)=>{const o=Gc({encoded:s,encoding:i});return o.senderPublicKey?jn(o.senderPublicKey,yn):void 0}),this.core=e,this.logger=un(n,this.name),this.keychain=r||new Y$(this.core,this.logger)}get context(){return Fn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(E0)}catch{e=Fp(),await this.keychain.set(E0,e)}return V$(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var X$=Object.defineProperty,e8=Object.defineProperties,t8=Object.getOwnPropertyDescriptors,x0=Object.getOwnPropertySymbols,n8=Object.prototype.hasOwnProperty,r8=Object.prototype.propertyIsEnumerable,Gp=(t,e,n)=>e in t?X$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s8=(t,e)=>{for(var n in e||(e={}))n8.call(e,n)&&Gp(t,n,e[n]);if(x0)for(var n of x0(e))r8.call(e,n)&&Gp(t,n,e[n]);return t},i8=(t,e)=>e8(t,t8(e)),Hn=(t,e,n)=>Gp(t,typeof e!="symbol"?e+"":e,n);class o8 extends ax{constructor(e,n){super(e,n),this.logger=e,this.core=n,Hn(this,"messages",new Map),Hn(this,"messagesWithoutClientAck",new Map),Hn(this,"name",Q4),Hn(this,"version",Z4),Hn(this,"initialized",!1),Hn(this,"storagePrefix",Qr),Hn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Hn(this,"set",async(r,s,i)=>{this.isInitialized();const o=ar(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Gu.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,i8(s8({},c),{[o]:s}))}return await this.persist(),o}),Hn(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Hn(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Hn(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=ar(s);return typeof i[o]<"u"}),Hn(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=ar(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Hn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=un(e,this.name),this.core=n}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Op(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Op(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Dp(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Dp(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a8=Object.defineProperty,c8=Object.defineProperties,l8=Object.getOwnPropertyDescriptors,O0=Object.getOwnPropertySymbols,u8=Object.prototype.hasOwnProperty,d8=Object.prototype.propertyIsEnumerable,Kp=(t,e,n)=>e in t?a8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,So=(t,e)=>{for(var n in e||(e={}))u8.call(e,n)&&Kp(t,n,e[n]);if(O0)for(var n of O0(e))d8.call(e,n)&&Kp(t,n,e[n]);return t},D0=(t,e)=>c8(t,l8(e)),nr=(t,e,n)=>Kp(t,typeof e!="symbol"?e+"":e,n);class h8 extends cx{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,nr(this,"events",new gr.EventEmitter),nr(this,"name",X4),nr(this,"queue",new Map),nr(this,"publishTimeout",ee.toMiliseconds(ee.ONE_MINUTE)),nr(this,"initialPublishTimeout",ee.toMiliseconds(ee.ONE_SECOND*15)),nr(this,"needsTransportRestart",!1),nr(this,"publish",async(r,s,i)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=(i==null?void 0:i.ttl)||J4,f=(i==null?void 0:i.prompt)||!1,h=(i==null?void 0:i.tag)||0,p=(i==null?void 0:i.id)||ii().toString(),g=Yo(vd().protocol),y={id:p,method:(i==null?void 0:i.publishMethod)||g.publish,params:So({topic:r,message:s,ttl:d,prompt:f,tag:h,attestation:i==null?void 0:i.attestation},(i==null?void 0:i.tvf)&&{tvf:i.tvf})},b=`Failed to publish payload, please try again. id:${p} tag:${h}`;try{Mt((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),Mt((c=y.params)==null?void 0:c.tag)&&((l=y.params)==null||delete l.tag);const C=new Promise(async E=>{const S=({id:P})=>{var $;(($=y.id)==null?void 0:$.toString())===P.toString()&&(this.removeRequestFromQueue(P),this.relayer.events.removeListener(vt.publish,S),E())};this.relayer.events.on(vt.publish,S);const O=qr(new Promise((P,$)=>{this.rpcPublish(y,i).then(P).catch(U=>{this.logger.warn(U,U==null?void 0:U.message),$(U)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${h}`);try{await O,this.events.removeListener(vt.publish,S)}catch(P){this.queue.set(p,{request:y,opts:i,attempt:1}),this.logger.warn(P,P==null?void 0:P.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:s,opts:i}}),await qr(C,this.publishTimeout,b)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),(u=i==null?void 0:i.internal)!=null&&u.throwOnFailedPublish)throw C}finally{this.queue.delete(p)}}),nr(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:f,publishMethod:h,prompt:p,tag:g,ttl:y=ee.FIVE_MINUTES}=u,b=u.id||ii().toString(),C=Yo(vd().protocol),E=h||C.publish,S={id:b,method:E,params:So(D0(So({},l),{ttl:y,prompt:p,tag:g,attestation:d}),f)},O=`Failed to publish custom payload, please try again. id:${b} tag:${g}`;try{Mt((s=S.params)==null?void 0:s.prompt)&&((i=S.params)==null||delete i.prompt),Mt((o=S.params)==null?void 0:o.tag)&&((a=S.params)==null||delete a.tag);const P=new Promise(async $=>{const U=({id:M})=>{var R;((R=S.id)==null?void 0:R.toString())===M.toString()&&(this.removeRequestFromQueue(M),this.relayer.events.removeListener(vt.publish,U),$())};this.relayer.events.on(vt.publish,U);const T=qr(new Promise((M,R)=>{this.rpcPublish(S,u).then(M).catch(k=>{this.logger.warn(k,k==null?void 0:k.message),R(k)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${E} id:${b} tag:${g}`);try{await T,this.events.removeListener(vt.publish,U)}catch(M){this.queue.set(b,{request:S,opts:u,attempt:1}),this.logger.warn(M,M==null?void 0:M.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,payload:l,opts:u}}),await qr(P,this.publishTimeout,O)}catch(P){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(P),(c=u==null?void 0:u.internal)!=null&&c.throwOnFailedPublish)throw P}finally{this.queue.delete(b)}}),nr(this,"on",(r,s)=>{this.events.on(r,s)}),nr(this,"once",(r,s)=>{this.events.once(r,s)}),nr(this,"off",(r,s)=>{this.events.off(r,s)}),nr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=un(n,this.name),this.registerEventListeners()}get context(){return Fn(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(vt.publish,So(So({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,D0(So({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(po.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(vt.connection_stalled);return}this.checkQueue()}),this.relayer.on(vt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var f8=Object.defineProperty,p8=(t,e,n)=>e in t?f8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,To=(t,e,n)=>p8(t,typeof e!="symbol"?e+"":e,n);class g8{constructor(){To(this,"map",new Map),To(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),To(this,"get",e=>this.map.get(e)||[]),To(this,"exists",(e,n)=>this.get(e).includes(n)),To(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),To(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var m8=Object.defineProperty,w8=Object.defineProperties,y8=Object.getOwnPropertyDescriptors,R0=Object.getOwnPropertySymbols,b8=Object.prototype.hasOwnProperty,v8=Object.prototype.propertyIsEnumerable,Yp=(t,e,n)=>e in t?m8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rc=(t,e)=>{for(var n in e||(e={}))b8.call(e,n)&&Yp(t,n,e[n]);if(R0)for(var n of R0(e))v8.call(e,n)&&Yp(t,n,e[n]);return t},mf=(t,e)=>w8(t,y8(e)),at=(t,e,n)=>Yp(t,typeof e!="symbol"?e+"":e,n);class E8 extends dx{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,at(this,"subscriptions",new Map),at(this,"topicMap",new g8),at(this,"events",new gr.EventEmitter),at(this,"name",o5),at(this,"version",a5),at(this,"pending",new Map),at(this,"cached",[]),at(this,"initialized",!1),at(this,"storagePrefix",Qr),at(this,"subscribeTimeout",ee.toMiliseconds(ee.ONE_MINUTE)),at(this,"initialSubscribeTimeout",ee.toMiliseconds(ee.ONE_SECOND*15)),at(this,"clientId"),at(this,"batchSubscribeTopicsLimit",500),at(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),at(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=vd(s),a={topic:r,relay:o,transportType:s==null?void 0:s.transportType};(i=s==null?void 0:s.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),at(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),at(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),at(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),at(this,"on",(r,s)=>{this.events.on(r,s)}),at(this,"once",(r,s)=>{this.events.once(r,s)}),at(this,"off",(r,s)=>{this.events.off(r,s)}),at(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),at(this,"start",async()=>{await this.onConnect()}),at(this,"stop",async()=>{await this.onDisconnect()}),at(this,"restart",async()=>{await this.restore(),await this.onRestart()}),at(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),at(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(po.pulse,async()=>{await this.checkPending()}),this.events.on(qn.created,async r=>{const s=qn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(qn.deleted,async r=>{const s=qn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=un(n,this.name),this.clientId=""}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=vd(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=dt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r==null?void 0:r.internal)!=null&&s.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===ut.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:Yo(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===ut.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},ee.toMiliseconds(ee.ONE_SECOND)),o;const l=new Promise(async d=>{const f=h=>{h.topic===e&&(this.events.removeListener(qn.created,f),d(h.id))};this.events.on(qn.created,f);try{const h=await qr(new Promise((p,g)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y==null?void 0:y.message),g(y)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(qn.created,f),d(h)}catch{}}),u=await qr(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(vt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Yo(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await qr(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(vt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Yo(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await qr(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(vt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Yo(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,mf(rc({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,rc({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,rc({},n)),this.topicMap.set(n.topic,e),this.events.emit(qn.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(qn.deleted,mf(rc({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(qn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(qn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>mf(rc({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await kM(ee.toMiliseconds(ee.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ar(e+await this.getClientId())}}var _8=Object.defineProperty,k0=Object.getOwnPropertySymbols,A8=Object.prototype.hasOwnProperty,C8=Object.prototype.propertyIsEnumerable,Qp=(t,e,n)=>e in t?_8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P0=(t,e)=>{for(var n in e||(e={}))A8.call(e,n)&&Qp(t,n,e[n]);if(k0)for(var n of k0(e))C8.call(e,n)&&Qp(t,n,e[n]);return t},Ve=(t,e,n)=>Qp(t,typeof e!="symbol"?e+"":e,n);class I8 extends lx{constructor(e){super(e),Ve(this,"protocol","wc"),Ve(this,"version",2),Ve(this,"core"),Ve(this,"logger"),Ve(this,"events",new gr.EventEmitter),Ve(this,"provider"),Ve(this,"messages"),Ve(this,"subscriber"),Ve(this,"publisher"),Ve(this,"name",t5),Ve(this,"transportExplicitlyClosed",!1),Ve(this,"initialized",!1),Ve(this,"connectionAttemptInProgress",!1),Ve(this,"relayUrl"),Ve(this,"projectId"),Ve(this,"packageName"),Ve(this,"bundleId"),Ve(this,"hasExperiencedNetworkDisruption",!1),Ve(this,"pingTimeout"),Ve(this,"heartBeatTimeout",ee.toMiliseconds(ee.THIRTY_SECONDS+ee.FIVE_SECONDS)),Ve(this,"reconnectTimeout"),Ve(this,"connectPromise"),Ve(this,"reconnectInProgress",!1),Ve(this,"requestsInFlight",[]),Ve(this,"connectTimeout",ee.toMiliseconds(ee.ONE_SECOND*15)),Ve(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||ii().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ve(this,"resetPingTimeout",()=>{md()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ve(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ve(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(vt.connect)}),Ve(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ve(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(vt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ve(this,"registerProviderListeners",()=>{this.provider.on(tr.payload,this.onPayloadHandler),this.provider.on(tr.connect,this.onConnectHandler),this.provider.on(tr.disconnect,this.onDisconnectHandler),this.provider.on(tr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?un(e.logger,this.name):Ll(Ia({level:e.logger||e5})),this.messages=new o8(this.logger,e.core),this.subscriber=new E8(this,this.logger),this.publisher=new h8(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||yC,wM()?this.packageName=Ay():yM()&&(this.bundleId=Ay()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Fn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:ut.relay},Gu.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(qn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(qn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,P0({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await qr(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await f0())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Rt(ee.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(vt.message,e),await this.recordMessageEvent(e,Gu.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(tr.disconnect,i),await qr(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(tr.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(tr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(tr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ee.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(md())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new mr(new z4(AM({sdkVersion:Hp,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),hm(e)){if(!e.method.endsWith(n5))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:ut.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(P0({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ah(e)&&this.events.emit(vt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Gu.inbound),this.events.emit(vt.message,e))}async acknowledgePayload(e){const n=Kc(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(tr.payload,this.onPayloadHandler),this.provider.off(tr.connect,this.onConnectHandler),this.provider.off(tr.disconnect,this.onDisconnectHandler),this.provider.off(tr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await f0();u4(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(po.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&f4())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(vt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ee.toMiliseconds(r5)))))}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function N8(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function M0(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function L0(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const S8="[object RegExp]",T8="[object String]",x8="[object Number]",O8="[object Boolean]",U0="[object Arguments]",D8="[object Symbol]",R8="[object Date]",k8="[object Map]",P8="[object Set]",M8="[object Array]",L8="[object Function]",U8="[object ArrayBuffer]",wf="[object Object]",$8="[object Error]",B8="[object DataView]",j8="[object Uint8Array]",F8="[object Uint8ClampedArray]",z8="[object Uint16Array]",W8="[object Uint32Array]",H8="[object BigUint64Array]",q8="[object Int8Array]",V8="[object Int16Array]",G8="[object Int32Array]",K8="[object BigInt64Array]",Y8="[object Float32Array]",Q8="[object Float64Array]";function Z8(){}function $0(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function J8(t,e,n){return mc(t,e,void 0,void 0,void 0,void 0,n)}function mc(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return xc(t,e,i,o)}return xc(t,e,i,o)}function xc(t,e,n,r){if(Object.is(t,e))return!0;let s=L0(t),i=L0(e);if(s===U0&&(s=wf),i===U0&&(i=wf),s!==i)return!1;switch(s){case T8:return t.toString()===e.toString();case x8:{const c=t.valueOf(),l=e.valueOf();return N8(c,l)}case O8:case R8:case D8:return Object.is(t.valueOf(),e.valueOf());case S8:return t.source===e.source&&t.flags===e.flags;case L8:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case k8:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!mc(l,e.get(c),c,t,e,n,r))return!1;return!0}case P8:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>mc(d,h,void 0,t,e,n,r));if(f===-1)return!1;l.splice(f,1)}return!0}case M8:case j8:case F8:case z8:case W8:case H8:case q8:case V8:case G8:case K8:case Y8:case Q8:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!mc(t[c],e[c],c,t,e,n,r))return!1;return!0}case U8:return t.byteLength!==e.byteLength?!1:xc(new Uint8Array(t),new Uint8Array(e),n,r);case B8:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:xc(new Uint8Array(t),new Uint8Array(e),n,r);case $8:return t.name===e.name&&t.message===e.message;case wf:{if(!(xc(t.constructor,e.constructor,n,r)||$0(t)&&$0(e)))return!1;const c=[...Object.keys(t),...M0(t)],l=[...Object.keys(e),...M0(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!mc(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function X8(t,e){return J8(t,e,Z8)}var e6=Object.defineProperty,B0=Object.getOwnPropertySymbols,t6=Object.prototype.hasOwnProperty,n6=Object.prototype.propertyIsEnumerable,Zp=(t,e,n)=>e in t?e6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j0=(t,e)=>{for(var n in e||(e={}))t6.call(e,n)&&Zp(t,n,e[n]);if(B0)for(var n of B0(e))n6.call(e,n)&&Zp(t,n,e[n]);return t},Nn=(t,e,n)=>Zp(t,typeof e!="symbol"?e+"":e,n);class wo extends ux{constructor(e,n,r,s=Qr,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Nn(this,"map",new Map),Nn(this,"version",s5),Nn(this,"cached",[]),Nn(this,"initialized",!1),Nn(this,"getKey"),Nn(this,"storagePrefix",Qr),Nn(this,"recentlyDeleted",[]),Nn(this,"recentlyDeletedLimit",200),Nn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Mt(o)?this.map.set(this.getKey(o),o):FU(o)?this.map.set(o.id,o):zU(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Nn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Nn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Nn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>X8(a[c],o[c]))):this.values)),Nn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=j0(j0({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Nn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=un(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=te("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var r6=Object.defineProperty,s6=(t,e,n)=>e in t?r6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Be=(t,e,n)=>s6(t,typeof e!="symbol"?e+"":e,n);class i6{constructor(e,n){this.core=e,this.logger=n,Be(this,"name",c5),Be(this,"version",l5),Be(this,"events",new zd),Be(this,"pairings"),Be(this,"initialized",!1),Be(this,"storagePrefix",Qr),Be(this,"ignoredPayloadTypes",[_s]),Be(this,"registeredMethods",[]),Be(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Be(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Be(this,"create",async r=>{this.isInitialized();const s=Fp(),i=await this.core.crypto.setSymKey(s),o=Rt(ee.FIVE_MINUTES),a={protocol:wC},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=s0({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Pi.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:i,uri:l}}),Be(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[jr.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=r0(r.uri);s.props.properties.topic=i,s.addTrace(jr.pairing_uri_validation_success),s.addTrace(jr.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(jr.existing_pairing),u.active)throw s.setError(ps.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(jr.pairing_not_expired)}const d=c||Rt(ee.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(jr.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Pi.create,f),s.addTrace(jr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(jr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ps.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(ps.subscribe_pairing_topic_failure),h}return s.addTrace(jr.subscribe_pairing_topic_success),f}),Be(this,"activate",async({topic:r})=>{this.isInitialized();const s=Rt(ee.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Be(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Ri();this.events.once(Je("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Be(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Be(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Be(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Be(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",dt("USER_DISCONNECTED")),await this.deletePairing(s))}),Be(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return s0({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Be(this,"sendRequest",async(r,s,i)=>{const o=Hr(s,i),a=await this.core.crypto.encode(r,o),c=ec[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Be(this,"sendResult",async(r,s,i)=>{const o=Kc(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=ec[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Be(this,"sendError",async(r,s,i)=>{const o=oh(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=ec[c]?ec[c].res:ec.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Be(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,dt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Be(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Ys(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Be(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Be(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Be(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Pi.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Be(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Wr(s)?this.events.emit(Je("pairing_ping",i),{}):cr(s)&&this.events.emit(Je("pairing_ping",i),{error:s.error})},500)}),Be(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Pi.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Be(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=dt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Be(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(dt("WC_METHOD_UNSUPPORTED",r))}),Be(this,"isValidPair",(r,s)=>{var i;if(!xn(r)){const{message:a}=te("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(ps.malformed_pairing_uri),new Error(a)}if(!jU(r.uri)){const{message:a}=te("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(ps.malformed_pairing_uri),new Error(a)}const o=r0(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ps.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=te("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ps.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ee.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(ps.pairing_expired);const{message:a}=te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Be(this,"isValidPing",async r=>{if(!xn(r)){const{message:i}=te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Be(this,"isValidDisconnect",async r=>{if(!xn(r)){const{message:i}=te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Be(this,"isValidPairingTopic",async r=>{if(!Nt(r,!1)){const{message:s}=te("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Ys(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=te("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=un(n,this.name),this.pairings=new wo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Fn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(vt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==ut.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);hm(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):ah(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ir.expired,async e=>{const{topic:n}=mA(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Pi.expire,{topic:n}))})}}var o6=Object.defineProperty,a6=(t,e,n)=>e in t?o6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e,n)=>a6(t,typeof e!="symbol"?e+"":e,n);class c6 extends ox{constructor(e,n){super(e,n),this.core=e,this.logger=n,Gt(this,"records",new Map),Gt(this,"events",new gr.EventEmitter),Gt(this,"name",u5),Gt(this,"version",d5),Gt(this,"cached",[]),Gt(this,"initialized",!1),Gt(this,"storagePrefix",Qr),Gt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Gt(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Rt(ee.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vr.created,o)}),Gt(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=cr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(vr.updated,s))}),Gt(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Gt(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(vr.deleted,i)}}),this.persist()}),Gt(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Gt(this,"on",(r,s)=>{this.events.on(r,s)}),Gt(this,"once",(r,s)=>{this.events.once(r,s)}),Gt(this,"off",(r,s)=>{this.events.off(r,s)}),Gt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=un(n,this.name)}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Hr(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vr.created,e=>{const n=vr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vr.updated,e=>{const n=vr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vr.deleted,e=>{const n=vr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(po.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ee.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(vr.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var l6=Object.defineProperty,u6=(t,e,n)=>e in t?l6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,on=(t,e,n)=>u6(t,typeof e!="symbol"?e+"":e,n);class d6 extends hx{constructor(e,n){super(e,n),this.core=e,this.logger=n,on(this,"expirations",new Map),on(this,"events",new gr.EventEmitter),on(this,"name",h5),on(this,"version",f5),on(this,"cached",[]),on(this,"initialized",!1),on(this,"storagePrefix",Qr),on(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),on(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),on(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ir.created,{target:i,expiration:o})}),on(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),on(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ir.deleted,{target:s,expiration:i})}}),on(this,"on",(r,s)=>{this.events.on(r,s)}),on(this,"once",(r,s)=>{this.events.once(r,s)}),on(this,"off",(r,s)=>{this.events.off(r,s)}),on(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=un(n,this.name)}get context(){return Fn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return CM(e);if(typeof e=="number")return IM(e);const{message:n}=te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ir.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ee.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ir.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(po.pulse,()=>this.checkExpirations()),this.events.on(ir.created,e=>{const n=ir.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ir.expired,e=>{const n=ir.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ir.deleted,e=>{const n=ir.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var h6=Object.defineProperty,f6=(t,e,n)=>e in t?h6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,At=(t,e,n)=>f6(t,typeof e!="symbol"?e+"":e,n);class p6 extends fx{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,At(this,"name",p5),At(this,"abortController"),At(this,"isDevEnv"),At(this,"verifyUrlV3",m5),At(this,"storagePrefix",Qr),At(this,"version",mC),At(this,"publicKey"),At(this,"fetchPromise"),At(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ee.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),At(this,"register",async s=>{if(!Da()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=to(),u=this.startAbortTimer(ee.ONE_SECOND*5),d=await new Promise((f,h)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const C=JSON.parse(b.data);if(C.type==="verify_attestation"){if(mp(C.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),f(C.attestation===null?"":C.attestation)}}catch(C){this.logger.warn(C)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),At(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(mp(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),At(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(ee.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),At(this,"getVerifyUrl",s=>{let i=s||Tc;return w5.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Tc}`),i=Tc),i}),At(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ee.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),At(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),At(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),At(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),At(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),At(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),At(this,"validateAttestation",(s,i)=>{const o=bU(s,i.publicKey),a={hasExpired:ee.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=un(n,this.name),this.abortController=new AbortController,this.isDevEnv=Zg(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Fn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ee.toMiliseconds(e))}}var g6=Object.defineProperty,m6=(t,e,n)=>e in t?g6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F0=(t,e,n)=>m6(t,typeof e!="symbol"?e+"":e,n);class w6 extends px{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,F0(this,"context",y5),F0(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${b5}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=un(n,this.context)}}var y6=Object.defineProperty,z0=Object.getOwnPropertySymbols,b6=Object.prototype.hasOwnProperty,v6=Object.prototype.propertyIsEnumerable,Jp=(t,e,n)=>e in t?y6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sc=(t,e)=>{for(var n in e||(e={}))b6.call(e,n)&&Jp(t,n,e[n]);if(z0)for(var n of z0(e))v6.call(e,n)&&Jp(t,n,e[n]);return t},Lt=(t,e,n)=>Jp(t,typeof e!="symbol"?e+"":e,n);class E6 extends gx{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Lt(this,"context",E5),Lt(this,"storagePrefix",Qr),Lt(this,"storageVersion",v5),Lt(this,"events",new Map),Lt(this,"shouldPersist",!1),Lt(this,"init",async()=>{if(!Zg())try{const s={eventId:Iy(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:pA(this.core.relayer.protocol,this.core.relayer.version,Hp)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Lt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Iy(),u=this.core.projectId||"",d=Date.now(),f=sc({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),Lt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return sc(sc({},a),this.setMethods(a.eventId))}),Lt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Lt(this,"setEventListeners",()=>{this.core.heartbeat.on(po.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ee.fromMiliseconds(Date.now())-ee.fromMiliseconds(s.timestamp)>_5&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Lt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Lt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Lt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Lt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Lt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,sc(sc({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Lt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Lt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${A5}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Hp}${i}`,{method:"POST",body:JSON.stringify(s)})}),Lt(this,"getAppDomain",()=>fA().url),this.logger=un(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var _6=Object.defineProperty,W0=Object.getOwnPropertySymbols,A6=Object.prototype.hasOwnProperty,C6=Object.prototype.propertyIsEnumerable,Xp=(t,e,n)=>e in t?_6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H0=(t,e)=>{for(var n in e||(e={}))A6.call(e,n)&&Xp(t,n,e[n]);if(W0)for(var n of W0(e))C6.call(e,n)&&Xp(t,n,e[n]);return t},ct=(t,e,n)=>Xp(t,typeof e!="symbol"?e+"":e,n);let I6=class DC extends nx{constructor(e){var n;super(e),ct(this,"protocol",gC),ct(this,"version",mC),ct(this,"name",Wp),ct(this,"relayUrl"),ct(this,"projectId"),ct(this,"customStoragePrefix"),ct(this,"events",new gr.EventEmitter),ct(this,"logger"),ct(this,"heartbeat"),ct(this,"relayer"),ct(this,"crypto"),ct(this,"storage"),ct(this,"history"),ct(this,"expirer"),ct(this,"pairing"),ct(this,"verify"),ct(this,"echoClient"),ct(this,"linkModeSupportedApps"),ct(this,"eventClient"),ct(this,"initialized",!1),ct(this,"logChunkController"),ct(this,"on",(a,c)=>this.events.on(a,c)),ct(this,"once",(a,c)=>this.events.once(a,c)),ct(this,"off",(a,c)=>this.events.off(a,c)),ct(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),ct(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:ut.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||yC,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Ia({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:H4.logger,name:Wp}),{logger:i,chunkLoggerController:o}=Og({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=un(i,this.name),this.heartbeat=new HS,this.crypto=new J$(this,this.logger,e==null?void 0:e.keychain),this.history=new c6(this,this.logger),this.expirer=new d6(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new NT(H0(H0({},q4),e==null?void 0:e.storageOptions)),this.relayer=new I8({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new i6(this,this.logger),this.verify=new p6(this,this.logger,this.storage),this.echoClient=new w6(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new E6(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new DC(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(i5,r),n}get context(){return Fn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(_0,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(_0)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&W4.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const N6=I6,RC="wc",kC=2,PC="client",fm=`${RC}@${kC}:${PC}:`,yf={name:PC,logger:"error"},q0="WALLETCONNECT_DEEPLINK_CHOICE",S6="proposal",V0="Proposal expired",T6="session",xo=ee.SEVEN_DAYS,x6="engine",Kt={wc_sessionPropose:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ee.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ee.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1119}}},bf={min:ee.FIVE_MINUTES,max:ee.SEVEN_DAYS},Br={idle:"IDLE",active:"ACTIVE"},O6={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},D6="request",R6=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],k6="wc",P6="auth",M6="authKeys",L6="pairingTopics",U6="requests",lh=`${k6}@${1.5}:${P6}:`,Ku=`${lh}:PUB_KEY`;var $6=Object.defineProperty,B6=Object.defineProperties,j6=Object.getOwnPropertyDescriptors,G0=Object.getOwnPropertySymbols,F6=Object.prototype.hasOwnProperty,z6=Object.prototype.propertyIsEnumerable,eg=(t,e,n)=>e in t?$6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e)=>{for(var n in e||(e={}))F6.call(e,n)&&eg(t,n,e[n]);if(G0)for(var n of G0(e))z6.call(e,n)&&eg(t,n,e[n]);return t},an=(t,e)=>B6(t,j6(e)),Y=(t,e,n)=>eg(t,typeof e!="symbol"?e+"":e,n);class W6 extends bx{constructor(e){super(e),Y(this,"name",x6),Y(this,"events",new zd),Y(this,"initialized",!1),Y(this,"requestQueue",{state:Br.idle,queue:[]}),Y(this,"sessionRequestQueue",{state:Br.idle,queue:[]}),Y(this,"emittedSessionRequests",new PM({limit:500})),Y(this,"requestQueueDelay",ee.ONE_SECOND),Y(this,"expectedPairingMethodMap",new Map),Y(this,"recentlyDeletedMap",new Map),Y(this,"recentlyDeletedLimit",200),Y(this,"relayMessageCache",[]),Y(this,"pendingSessions",new Map),Y(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Kt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ee.toMiliseconds(this.requestQueueDelay)))}),Y(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=an(tt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=MU(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,f=!1;try{if(u){const P=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),P}if(!u||!f){const{topic:P,uri:$}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=P,d=$}if(!u){const{message:P}=te("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(P)}const h=await this.client.core.crypto.generateKeyPair(),p=Kt.wc_sessionPropose.req.ttl||ee.FIVE_MINUTES,g=Rt(p),y=an(tt(tt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:wC}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:zr()}),b=Je("session_connect",y.id),{reject:C,resolve:E,done:S}=Ri(p,V0),O=({id:P})=>{P===y.id&&(this.client.events.off("proposal_expire",O),this.pendingSessions.delete(y.id),this.events.emit(b,{error:{message:V0,code:0}}))};return this.client.events.on("proposal_expire",O),this.events.once(b,({error:P,session:$})=>{this.client.events.off("proposal_expire",O),P?C(P):$&&E($)}),await this.sendProposeSession({proposal:y,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:y.id}}}),await this.setProposal(y.id,y),{uri:d,approval:S}}),Y(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Y(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Gs.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(T){throw o.setError(tc.no_internet_connection),T}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(T){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(tc.proposal_not_found),T}try{await this.isValidApprove(n)}catch(T){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(tc.session_approve_namespace_validation_failure),T}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:b}=h;let C=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});C||(C=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Gs.session_approve_started,properties:{topic:p,trace:[Gs.session_approve_started,Gs.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),S=g.publicKey,O=await this.client.core.crypto.generateSharedKey(E,S),P=tt(tt(tt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:Rt(xo)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),$=ut.relay;C.addTrace(Gs.subscribing_session_topic);try{await this.client.core.relayer.subscribe(O,{transportType:$,internal:{skipSubscribe:!0}})}catch(T){throw C.setError(tc.subscribe_session_topic_failure),T}C.addTrace(Gs.subscribe_session_topic_success);const U=an(tt({},P),{topic:O,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:p,acknowledged:!1,self:P.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:ut.relay});await this.client.session.set(O,U),C.addTrace(Gs.store_session);try{await this.sendApproveSession({sessionTopic:O,proposal:h,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:E},sessionSettleRequest:P,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),C.addTrace(Gs.session_approve_publish_success)}catch(T){throw this.client.logger.error(T),this.client.session.delete(O,dt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(O),T}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(O,Rt(xo)),{topic:O,acknowledged:()=>Promise.resolve(this.client.session.get(O))}}),Y(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Kt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),Y(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Ri(),c=zr(),l=ii().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Je("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),Y(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=zr(),{done:i,resolve:o,reject:a}=Ri();return this.events.once(Je("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Rt(xo)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Y(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Kt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===ut.relay&&await this.confirmOnlineStateOrThrow();const c=zr(),l=ii().toString(),{done:u,resolve:d,reject:f}=Ri(o,"Request expired. Please try again.");this.events.once(Je("session_request",c),({error:y,result:b})=>{y?f(y):d(b)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:{request:an(tt({},s),{expiryTimestamp:Rt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:an(tt({},s),{expiryTimestamp:Rt(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const C=await xM(this.client.core.storage,q0);await NM({id:c,topic:i,wcDeepLink:C})}y()}),u()]).then(y=>y[2])}),Y(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===ut.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Wr(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):cr(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Y(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=zr(),i=ii().toString(),{done:o,resolve:a,reject:c}=Ri();this.events.once(Je("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Y(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=ii().toString(),a=zr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Y(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:dt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Y(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>$U(r,n)))),Y(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Y(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?ut.link_mode:ut.relay;o===ut.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:p,methods:g=[],expiry:y}=n,b=[...n.resources||[]],{topic:C,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:C,uri:E}});const S=await this.client.core.crypto.generateKeyPair(),O=Vu(S);if(await Promise.all([this.client.auth.authKeys.set(Ku,{responseTopic:O,publicKey:S}),this.client.auth.pairingTopics.set(O,{topic:O,pairingTopic:C})]),await this.client.core.relayer.subscribe(O,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${C}`),g.length>0){const{namespace:I}=Gi(a[0]);let x=q3(I,"request",g);qu(b)&&(x=G3(x,b.pop())),b.push(x)}const P=y&&y>Kt.wc_sessionAuthenticate.req.ttl?y:Kt.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:p,resources:b},requester:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:Rt(P)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},T={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:C,proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:Rt(Kt.wc_sessionPropose.req.ttl),id:zr()},{done:M,resolve:R,reject:k}=Ri(P,"Request expired"),j=zr(),D=Je("session_connect",T.id),m=Je("session_request",j),w=async({error:I,session:x})=>{this.events.off(m,_),I?k(I):x&&R({session:x})},_=async I=>{var x,L,F;if(await this.deletePendingAuthRequest(j,{message:"fulfilled",code:0}),I.error){const pe=dt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===pe.code?void 0:(this.events.off(D,w),k(I.error.message))}await this.deleteProposal(T.id),this.events.off(D,w);const{cacaos:V,responder:q}=I.result,z=[],J=[];for(const pe of V){await Ly({cacao:pe,projectId:this.client.core.projectId})||(this.client.logger.error(pe,"Signature verification failed"),k(dt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:xe}=pe,Ze=qu(xe.resources),xt=[Rp(xe.iss)],Wt=wd(xe.iss);if(Ze){const Jn=Uy(Ze),es=$y(Ze);z.push(...Jn),xt.push(...es)}for(const Jn of xt)J.push(`${Jn}:${Wt}`)}const me=await this.client.core.crypto.generateSharedKey(S,q.publicKey);let Ie;z.length>0&&(Ie={topic:me,acknowledged:!0,self:{publicKey:S,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:Rt(xo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:C,namespaces:c0([...new Set(z)],[...new Set(J)]),transportType:o},await this.client.core.relayer.subscribe(me,{transportType:o}),await this.client.session.set(me,Ie),C&&await this.client.core.pairing.updateMetadata({topic:C,metadata:q.metadata}),Ie=this.client.session.get(me)),(x=this.client.metadata.redirect)!=null&&x.linkMode&&(L=q.metadata.redirect)!=null&&L.linkMode&&(F=q.metadata.redirect)!=null&&F.universal&&r&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(me,{transportType:ut.link_mode})),R({auths:V,session:Ie})};this.events.once(D,w),this.events.once(m,_);let A;try{if(i){const I=Hr("wc_sessionAuthenticate",$,j);this.client.core.history.set(C,I);const x=await this.client.core.crypto.encode("",I,{type:ql,encoding:ti});A=mu(r,C,x)}else await Promise.all([this.sendRequest({topic:C,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:j}),this.sendRequest({topic:C,method:"wc_sessionPropose",params:T,expiry:Kt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:T.id})])}catch(I){throw this.events.off(D,w),this.events.off(m,_),I}return await this.setProposal(T.id,T),await this.setAuthRequest(j,{request:an(tt({},$),{verifyContext:{}}),pairingTopic:C,transportType:o}),{uri:A??E,response:M}}),Y(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Ai.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(nc.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(nc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||ut.relay;a===ut.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Vu(c),d={type:_s,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const y of s){if(!await Ly({cacao:y,projectId:this.client.core.projectId})){i.setError(nc.invalid_cacao);const O=dt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:O,encodeOpts:d}),new Error(O.message)}i.addTrace(Ai.cacaos_verified);const{p:b}=y,C=qu(b.resources),E=[Rp(b.iss)],S=wd(b.iss);if(C){const O=Uy(C),P=$y(C);f.push(...O),E.push(...P)}for(const O of E)h.push(`${O}:${S}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Ai.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Rt(xo),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:c0([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(Ai.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(nc.subscribe_authenticated_session_topic_failure),y}i.addTrace(Ai.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Ai.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ai.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(nc.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Y(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===ut.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Vu(o),l={type:_s,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Kt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),Y(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return DA(r,s)}),Y(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Y(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Y(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,dt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(q0).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,dt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Br.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Y(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(tc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,dt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Y(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Br.idle,this.client.events.emit("session_request_expire",{id:n}))}),Y(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Y(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Y(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Rt(Kt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Y(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=ut.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Y(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Rt(Kt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Y(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:f={}}=n,h=Hr(s,i,c);let p;const g=!!u;try{const C=g?ti:Pn;p=await this.client.core.crypto.encode(r,h,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),C}let y;if(R6.includes(s)){const C=ar(JSON.stringify(h)),E=ar(p);y=await this.client.core.verify.register({id:E,decryptedId:C})}const b=tt(tt({},Kt[s].req),f);if(b.attestation=y,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(r,h),g){const C=mu(u,r,p);await global.Linking.openURL(C,this.client.name)}else b.tvf=an(tt({},d),{correlationId:h.id}),l?(b.internal=an(tt({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,b)):this.client.core.relayer.publish(r,p,b).catch(C=>this.client.logger.error(C));return h.id}),Y(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=Hr("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:Pn}),a=ar(JSON.stringify(i)),c=ar(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:an(tt({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),Y(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=Kc(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:Pn}),u=Hr("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(r,u,{encoding:Pn});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:an(tt({},a),{publishMethod:"wc_approveSession"})})}),Y(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Kc(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ti:Pn;u=await this.client.core.crypto.encode(s,l,an(tt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let f,h;try{f=await this.client.core.history.get(s,r);const p=f.request;try{h=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=mu(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=Kt[p].res;g.tvf=an(tt({},h),{correlationId:r}),o?(g.internal=an(tt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),Y(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=oh(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?ti:Pn;u=await this.client.core.crypto.encode(s,l,an(tt({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=mu(c,s,u);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,p=a||Kt[h].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),Y(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Ys(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ys(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Y(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Y(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Y(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Br.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Br.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Br.idle}),Y(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Y(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Y(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=te("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Y(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Y(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(ps.proposal_listener_not_found)),this.isValidConnect(tt({},s.params));const u=a.expiryTimestamp||Rt(Kt.wc_sessionPropose.req.ttl),d=tt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:ar(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(jr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Kt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Y(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Wr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(cr(r)){await this.deleteProposal(i);const o=Je("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Y(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(h.proposalId),g=an(tt(tt(tt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:ut.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Je("session_connect",h.proposalId),{session:g}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Wr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Je("session_approve",s),{})):cr(r)&&(await this.client.session.delete(n,dt("USER_DISCONNECTED")),this.events.emit(Je("session_approve",s),{error:r.error}))}),Y(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Xa.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:dt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(tt({topic:n},s));try{Xa.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Xa.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Y(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Je("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wr(r)?this.events.emit(Je("session_update",s),{}):cr(r)&&this.events.emit(Je("session_update",s),{error:r.error})}),Y(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Rt(xo)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Y(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Je("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wr(r)?this.events.emit(Je("session_extend",s),{}):cr(r)&&this.events.emit(Je("session_extend",s),{error:r.error})}),Y(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Y(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Je("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Wr(r)?this.events.emit(Je("session_ping",s),{}):cr(r)&&this.events.emit(Je("session_ping",s),{error:r.error})},500)}),Y(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(vt.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:dt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Y(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:f}=a;try{await this.isValidRequest(tt({topic:o},f));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:ar(JSON.stringify(Hr("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),g={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),u===ut.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),Y(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Je("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Wr(r)?this.events.emit(Je("session_request",s),{result:r.result}):cr(r)&&this.events.emit(Je("session_request",s),{error:r.error})}),Y(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Xa.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(tt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Xa.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Wr(r)?this.events.emit(Je("session_request",s),{result:r.result}):cr(r)&&this.events.emit(Je("session_request",s),{error:r.error})}),Y(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:ar(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:c}),c===ut.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),h={type:_s,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:h,rpcOpts:Kt.wc_sessionAuthenticate.autoReject,appLink:f})}}),Y(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Y(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Br.idle,this.processSessionRequestQueue()},ee.toMiliseconds(this.requestQueueDelay))}),Y(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Je("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Je("session_request",i.request.id),{error:r})})}),Y(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Br.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Y(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Br.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),Y(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Hr("wc_sessionPropose",an(tt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),Y(this,"isValidConnect",async n=>{if(!xn(n)){const{message:l}=te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Mt(r)||await this.isValidPairingTopic(r),!QU(c)){const{message:l}=te("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Mt(s)&&Yr(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Mt(i)&&Yr(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Mt(o)||this.validateSessionProps(o,"sessionProperties"),!Mt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Y(this,"validateNamespaces",(n,r)=>{const s=YU(n,"connect()",r);if(s)throw new Error(s.message)}),Y(this,"isValidApprove",async n=>{if(!xn(n))throw new Error(te("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=ff(s,"approve()");if(l)throw new Error(l.message);const u=d0(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Nt(i,!0)){const{message:d}=te("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Mt(o)||this.validateSessionProps(o,"sessionProperties"),!Mt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Y(this,"isValidReject",async n=>{if(!xn(n)){const{message:i}=te("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!JU(s)){const{message:i}=te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Y(this,"isValidSessionSettleRequest",n=>{if(!xn(n)){const{message:l}=te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!cC(r)){const{message:l}=te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=WU(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ff(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ys(o)){const{message:l}=te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Y(this,"isValidUpdate",async n=>{if(!xn(n)){const{message:c}=te("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=ff(s,"update()");if(o)throw new Error(o.message);const a=d0(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Y(this,"isValidExtend",async n=>{if(!xn(n)){const{message:s}=te("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Y(this,"isValidRequest",async n=>{if(!xn(n)){const{message:c}=te("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!u0(a,i)){const{message:c}=te("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!XU(s)){const{message:c}=te("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!n4(a,i,s.method)){const{message:c}=te("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!o4(o,bf)){const{message:c}=te("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${bf.min} and ${bf.max}`);throw new Error(c)}}),Y(this,"isValidRespond",async n=>{var r;if(!xn(n)){const{message:o}=te("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!e4(i)){const{message:o}=te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Y(this,"isValidPing",async n=>{if(!xn(n)){const{message:s}=te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidEmit",async n=>{if(!xn(n)){const{message:a}=te("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!u0(o,i)){const{message:a}=te("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!t4(s)){const{message:a}=te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!r4(o,i,s.name)){const{message:a}=te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Y(this,"isValidDisconnect",async n=>{if(!xn(n)){const{message:s}=te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Nt(s,!1))throw new Error("uri is required parameter");if(!Nt(i,!1))throw new Error("domain is required parameter");if(!Nt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Gi(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Gi(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Y(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Tc,validation:"UNKNOWN",origin:o.url||""}};try{if(a===ut.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Y(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=te("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Y(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Y(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Y(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=te("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Y(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,f;return!n||r!==ut.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Y(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Y(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Cy(n,"topic")||"",s=decodeURIComponent(Cy(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:ut.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Y(this,"registerLinkModeListeners",async()=>{var n;if(Zg()||wi()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Y(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),Y(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Y(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=O6[i];if(i==="sui_signTransaction")return[x3(r.transactionBytes)];if(i==="near_signTransaction")return[Ry(r)];if(i==="near_signTransactions")return r.map(c=>Ry(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[E4({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return As(r)?r.map(c=>ky(c)):[ky(r)];if(i==="cosmos_signDirect")return[D3(r)];if(typeof r=="string")return[r];const a=r[o.key];if(As(a))return i==="solana_signAllTransactions"?a.map(c=>T3(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(vt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ku)?this.client.auth.authKeys.get(Ku):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===ut.link_mode?ti:Pn});hm(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:ar(r)})):ah(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ir.expired,async e=>{const{topic:n,id:r}=mA(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,te("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,te("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Pi.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Pi.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Nt(e,!1)){const{message:n}=te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Ys(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=te("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Nt(e,!1)){const{message:n}=te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Ys(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=te("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Nt(e,!1)){const{message:n}=te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!ZU(e)){const{message:n}=te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Ys(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=te("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class H6 extends wo{constructor(e,n){super(e,n,S6,fm),this.core=e,this.logger=n}}let q6=class extends wo{constructor(e,n){super(e,n,T6,fm),this.core=e,this.logger=n}};class V6 extends wo{constructor(e,n){super(e,n,D6,fm,r=>r.id),this.core=e,this.logger=n}}class G6 extends wo{constructor(e,n){super(e,n,M6,lh,()=>Ku),this.core=e,this.logger=n}}class K6 extends wo{constructor(e,n){super(e,n,L6,lh),this.core=e,this.logger=n}}class Y6 extends wo{constructor(e,n){super(e,n,U6,lh,r=>r.id),this.core=e,this.logger=n}}var Q6=Object.defineProperty,Z6=(t,e,n)=>e in t?Q6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>Z6(t,typeof e!="symbol"?e+"":e,n);class J6{constructor(e,n){this.core=e,this.logger=n,vf(this,"authKeys"),vf(this,"pairingTopics"),vf(this,"requests"),this.authKeys=new G6(this.core,this.logger),this.pairingTopics=new K6(this.core,this.logger),this.requests=new Y6(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var X6=Object.defineProperty,eB=(t,e,n)=>e in t?X6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,je=(t,e,n)=>eB(t,typeof e!="symbol"?e+"":e,n);let tB=class MC extends yx{constructor(e){super(e),je(this,"protocol",RC),je(this,"version",kC),je(this,"name",yf.name),je(this,"metadata"),je(this,"core"),je(this,"logger"),je(this,"events",new gr.EventEmitter),je(this,"engine"),je(this,"session"),je(this,"proposal"),je(this,"pendingRequest"),je(this,"auth"),je(this,"signConfig"),je(this,"on",(r,s)=>this.events.on(r,s)),je(this,"once",(r,s)=>this.events.once(r,s)),je(this,"off",(r,s)=>this.events.off(r,s)),je(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),je(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),je(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),je(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),je(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),je(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||yf.name,this.metadata=vM(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ll(Ia({level:(e==null?void 0:e.logger)||yf.logger}));this.core=(e==null?void 0:e.core)||new N6(e),this.logger=un(n,this.name),this.session=new q6(this.core,this.logger),this.proposal=new H6(this.core,this.logger),this.pendingRequest=new V6(this.core,this.logger),this.engine=new W6(this),this.auth=new J6(this.core,this.logger)}static async init(e){const n=new MC(e);return await n.initialize(),n}get context(){return Fn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var tg={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Mn<"u"&&Mn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Mn<"u"&&Mn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(m){return m&&DataView.prototype.isPrototypeOf(m)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(m){return m&&u.indexOf(Object.prototype.toString.call(m))>-1};function f(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError('Invalid character in header field name: "'+m+'"');return m.toLowerCase()}function h(m){return typeof m!="string"&&(m=String(m)),m}function p(m){var w={next:function(){var _=m.shift();return{done:_===void 0,value:_}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function g(m){this.map={},m instanceof g?m.forEach(function(w,_){this.append(_,w)},this):Array.isArray(m)?m.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(w){this.append(w,m[w])},this)}g.prototype.append=function(m,w){m=f(m),w=h(w);var _=this.map[m];this.map[m]=_?_+", "+w:w},g.prototype.delete=function(m){delete this.map[f(m)]},g.prototype.get=function(m){return m=f(m),this.has(m)?this.map[m]:null},g.prototype.has=function(m){return this.map.hasOwnProperty(f(m))},g.prototype.set=function(m,w){this.map[f(m)]=h(w)},g.prototype.forEach=function(m,w){for(var _ in this.map)this.map.hasOwnProperty(_)&&m.call(w,this.map[_],_,this)},g.prototype.keys=function(){var m=[];return this.forEach(function(w,_){m.push(_)}),p(m)},g.prototype.values=function(){var m=[];return this.forEach(function(w){m.push(w)}),p(m)},g.prototype.entries=function(){var m=[];return this.forEach(function(w,_){m.push([_,w])}),p(m)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(m){if(!m._noBody){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}}function b(m){return new Promise(function(w,_){m.onload=function(){w(m.result)},m.onerror=function(){_(m.error)}})}function C(m){var w=new FileReader,_=b(w);return w.readAsArrayBuffer(m),_}function E(m){var w=new FileReader,_=b(w),A=/charset=([A-Za-z0-9_-]+)/.exec(m.type),I=A?A[1]:"utf-8";return w.readAsText(m,I),_}function S(m){for(var w=new Uint8Array(m),_=new Array(w.length),A=0;A<w.length;A++)_[A]=String.fromCharCode(w[A]);return _.join("")}function O(m){if(m.slice)return m.slice(0);var w=new Uint8Array(m.byteLength);return w.set(new Uint8Array(m)),w.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:c.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:c.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():c.arrayBuffer&&c.blob&&l(m)?(this._bodyArrayBuffer=O(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||d(m))?this._bodyArrayBuffer=O(m):this._bodyText=m=Object.prototype.toString.call(m):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var m=y(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=y(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(C);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var m=y(this);if(m)return m;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(m){var w=m.toUpperCase();return $.indexOf(w)>-1?w:m}function T(m,w){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var _=w.body;if(m instanceof T){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,w.headers||(this.headers=new g(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!_&&m._bodyInit!=null&&(_=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new g(w.headers)),this.method=U(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in a){var x=new AbortController;return x.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(_),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var A=/([?&])_=[^&]*/;if(A.test(this.url))this.url=this.url.replace(A,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function M(m){var w=new FormData;return m.trim().split("&").forEach(function(_){if(_){var A=_.split("="),I=A.shift().replace(/\+/g," "),x=A.join("=").replace(/\+/g," ");w.append(decodeURIComponent(I),decodeURIComponent(x))}}),w}function R(m){var w=new g,_=m.replace(/\r?\n[\t ]+/g," ");return _.split("\r").map(function(A){return A.indexOf(`
`)===0?A.substr(1,A.length):A}).forEach(function(A){var I=A.split(":"),x=I.shift().trim();if(x){var L=I.join(":").trim();try{w.append(x,L)}catch(F){console.warn("Response "+F.message)}}}),w}P.call(T.prototype);function k(m,w){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new g(w.headers),this.url=w.url||"",this._initBody(m)}P.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},k.error=function(){var m=new k(null,{status:200,statusText:""});return m.ok=!1,m.status=0,m.type="error",m};var j=[301,302,303,307,308];k.redirect=function(m,w){if(j.indexOf(w)===-1)throw new RangeError("Invalid status code");return new k(null,{status:w,headers:{location:m}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,_){this.message=w,this.name=_;var A=Error(w);this.stack=A.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(m,w){return new Promise(function(_,A){var I=new T(m,w);if(I.signal&&I.signal.aborted)return A(new o.DOMException("Aborted","AbortError"));var x=new XMLHttpRequest;function L(){x.abort()}x.onload=function(){var q={statusText:x.statusText,headers:R(x.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(x.status<200||x.status>599)?q.status=200:q.status=x.status,q.url="responseURL"in x?x.responseURL:q.headers.get("X-Request-URL");var z="response"in x?x.response:x.responseText;setTimeout(function(){_(new k(z,q))},0)},x.onerror=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},x.ontimeout=function(){setTimeout(function(){A(new TypeError("Network request timed out"))},0)},x.onabort=function(){setTimeout(function(){A(new o.DOMException("Aborted","AbortError"))},0)};function F(q){try{return q===""&&a.location.href?a.location.href:q}catch{return q}}if(x.open(I.method,F(I.url),!0),I.credentials==="include"?x.withCredentials=!0:I.credentials==="omit"&&(x.withCredentials=!1),"responseType"in x&&(c.blob?x.responseType="blob":c.arrayBuffer&&(x.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof g||a.Headers&&w.headers instanceof a.Headers)){var V=[];Object.getOwnPropertyNames(w.headers).forEach(function(q){V.push(f(q)),x.setRequestHeader(q,h(w.headers[q]))}),I.headers.forEach(function(q,z){V.indexOf(z)===-1&&x.setRequestHeader(z,q)})}else I.headers.forEach(function(q,z){x.setRequestHeader(z,q)});I.signal&&(I.signal.addEventListener("abort",L),x.onreadystatechange=function(){x.readyState===4&&I.signal.removeEventListener("abort",L)}),x.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return D.polyfill=!0,a.fetch||(a.fetch=D,a.Headers=g,a.Request=T,a.Response=k),o.Headers=g,o.Request=T,o.Response=k,o.fetch=D,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(tg,tg.exports);var nB=tg.exports;const K0=Xr(nB);var rB=Object.defineProperty,sB=Object.defineProperties,iB=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,oB=Object.prototype.hasOwnProperty,aB=Object.prototype.propertyIsEnumerable,Q0=(t,e,n)=>e in t?rB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z0=(t,e)=>{for(var n in e||(e={}))oB.call(e,n)&&Q0(t,n,e[n]);if(Y0)for(var n of Y0(e))aB.call(e,n)&&Q0(t,n,e[n]);return t},J0=(t,e)=>sB(t,iB(e));const cB={Accept:"application/json","Content-Type":"application/json"},lB="POST",X0={headers:cB,method:lB},eb=10;let Dr=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new gr.EventEmitter,this.isAvailable=!1,this.registering=!1,!w0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Ns(e),r=await(await K0(this.url,J0(Z0({},X0),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!w0(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Ns({id:1,jsonrpc:"2.0",method:"test",params:[]});await K0(e,J0(Z0({},X0),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=oh(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return dC(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>eb&&this.events.setMaxListeners(eb)}};const tb="error",uB="wss://relay.walletconnect.org",dB="wc",hB="universal_provider",wu=`${dB}@2:${hB}:`,LC="https://rpc.walletconnect.org/v1/",UC="generic",fB=`${LC}bundler`,wr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function pm(t){return t==null||typeof t!="object"&&typeof t!="function"}function $C(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function BC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const pB="[object RegExp]",jC="[object String]",FC="[object Number]",zC="[object Boolean]",WC="[object Arguments]",gB="[object Symbol]",mB="[object Date]",wB="[object Map]",yB="[object Set]",bB="[object Array]",vB="[object ArrayBuffer]",EB="[object Object]",_B="[object DataView]",AB="[object Uint8Array]",CB="[object Uint8ClampedArray]",IB="[object Uint16Array]",NB="[object Uint32Array]",SB="[object Int8Array]",TB="[object Int16Array]",xB="[object Int32Array]",OB="[object Float32Array]",DB="[object Float64Array]";function gm(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function RB(t,e){return Zo(t,void 0,t,new Map,e)}function Zo(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(pm(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Zo(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Zo(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Zo(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(gm(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Zo(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Mi(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Mi(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Mi(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Mi(o,t,n,r,s),o}if(typeof t=="object"&&kB(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Mi(o,t,n,r,s),o}return t}function Mi(t,e,n=t,r,s){const i=[...Object.keys(e),...$C(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Zo(e[a],a,n,r,s))}}function kB(t){switch(BC(t)){case WC:case bB:case vB:case _B:case zC:case mB:case OB:case DB:case SB:case TB:case xB:case wB:case FC:case EB:case pB:case yB:case jC:case gB:case AB:case CB:case IB:case NB:return!0;default:return!1}}function PB(t,e){return RB(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case FC:case jC:case zC:{const o=new t.constructor(t==null?void 0:t.valueOf());return Mi(o,t),o}case WC:{const o={};return Mi(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function nb(t){return PB(t)}function rb(t){return t!==null&&typeof t=="object"&&BC(t)==="[object Arguments]"}function sb(t){return typeof t=="object"&&t!==null}function MB(){}function LB(t){return gm(t)}function UB(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function $B(t){if(pm(t))return t;if(Array.isArray(t)||gm(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function BB(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=ng(s,o,r,new Map)}return s}function ng(t,e,n,r){if(pm(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return $B(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...$C(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(rb(a)&&(a={...a}),rb(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=nb(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];u[h]=c[h]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||sb(c)&&sb(a)?t[o]=ng(c,a,n,r):c==null&&UB(a)?t[o]=ng({},a,n,r):c==null&&LB(a)?t[o]=nb(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function jB(t,...e){return BB(t,...e,MB)}var FB=Object.defineProperty,zB=Object.defineProperties,WB=Object.getOwnPropertyDescriptors,ib=Object.getOwnPropertySymbols,HB=Object.prototype.hasOwnProperty,qB=Object.prototype.propertyIsEnumerable,ob=(t,e,n)=>e in t?FB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yu=(t,e)=>{for(var n in e||(e={}))HB.call(e,n)&&ob(t,n,e[n]);if(ib)for(var n of ib(e))qB.call(e,n)&&ob(t,n,e[n]);return t},VB=(t,e)=>zB(t,WB(e));function Qn(t,e,n){var r;const s=Gi(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${LC}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function yo(t){return t.includes(":")?t.split(":")[1]:t}function HC(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function GB(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function ab(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function bu(t={},e={}){const n=ab(cb(t)),r=ab(cb(e));return jB(n,r)}function cb(t){var e,n,r,s,i;const o={};if(!Yr(t))return o;for(const[a,c]of Object.entries(t)){const l=ih(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=Qo(a);o[h]=VB(yu(yu({},o[h]),c),{chains:Kr(l,(e=o[h])==null?void 0:e.chains),methods:Kr(u,(n=o[h])==null?void 0:n.methods),events:Kr(d,(r=o[h])==null?void 0:r.events)}),(Yr(f)||Yr(((s=o[h])==null?void 0:s.rpcMap)||{}))&&(o[h].rpcMap=yu(yu({},f),(i=o[h])==null?void 0:i.rpcMap))}return o}function lb(t){return t.includes(":")?t.split(":")[2]:t}function ub(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=ih(n)?[n]:r.chains?r.chains:HC(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Ef(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const qC={},Ye=t=>qC[t],_f=(t,e)=>{qC[t]=e};var KB=Object.defineProperty,db=Object.getOwnPropertySymbols,YB=Object.prototype.hasOwnProperty,QB=Object.prototype.propertyIsEnumerable,hb=(t,e,n)=>e in t?KB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fb=(t,e)=>{for(var n in e||(e={}))YB.call(e,n)&&hb(t,n,e[n]);if(db)for(var n of db(e))QB.call(e,n)&&hb(t,n,e[n]);return t};const pb="eip155",ZB=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],JB=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Af=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,gb=t=>Object.keys(t).filter(e=>ZB.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),XB=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Yr(s)&&!Yr(r))return;const o=gb(r);for(const a of n){const c=JB(a);if(!c)continue;i[Af(c)]=o;const l=s==null?void 0:s[`${pb}:${c}`];if(l){const u=l==null?void 0:l[`${pb}:${c}:${e}`];i[Af(c)]=fb(fb({},i[Af(c)]),gb(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var ej=Object.defineProperty,tj=(t,e,n)=>e in t?ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oo=(t,e,n)=>tj(t,typeof e!="symbol"?e+"":e,n);class nj{constructor(e){Oo(this,"name","polkadot"),Oo(this,"client"),Oo(this,"httpProviders"),Oo(this,"events"),Oo(this,"namespace"),Oo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yo(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var rj=Object.defineProperty,sj=Object.defineProperties,ij=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertySymbols,oj=Object.prototype.hasOwnProperty,aj=Object.prototype.propertyIsEnumerable,rg=(t,e,n)=>e in t?rj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wb=(t,e)=>{for(var n in e||(e={}))oj.call(e,n)&&rg(t,n,e[n]);if(mb)for(var n of mb(e))aj.call(e,n)&&rg(t,n,e[n]);return t},yb=(t,e)=>sj(t,ij(e)),Do=(t,e,n)=>rg(t,typeof e!="symbol"?e+"":e,n);class cj{constructor(e){Do(this,"name","eip155"),Do(this,"client"),Do(this,"chainId"),Do(this,"namespace"),Do(this,"httpProviders"),Do(this,"events"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Qn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(yo(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=u==null?void 0:u[d];if(f)return f;let h;try{h=XB(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(h)return h;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:yb(wb({},l.sessionProperties||{}),{capabilities:yb(wb({},u||{}),{[d]:p})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return p}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Hr("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${fB}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var lj=Object.defineProperty,uj=(t,e,n)=>e in t?lj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ro=(t,e,n)=>uj(t,typeof e!="symbol"?e+"":e,n);class dj{constructor(e){Ro(this,"name","solana"),Ro(this,"client"),Ro(this,"httpProviders"),Ro(this,"events"),Ro(this,"namespace"),Ro(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yo(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var hj=Object.defineProperty,fj=(t,e,n)=>e in t?hj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ko=(t,e,n)=>fj(t,typeof e!="symbol"?e+"":e,n);class pj{constructor(e){ko(this,"name","cosmos"),ko(this,"client"),ko(this,"httpProviders"),ko(this,"events"),ko(this,"namespace"),ko(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yo(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var gj=Object.defineProperty,mj=(t,e,n)=>e in t?gj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Po=(t,e,n)=>mj(t,typeof e!="symbol"?e+"":e,n);class wj{constructor(e){Po(this,"name","algorand"),Po(this,"client"),Po(this,"httpProviders"),Po(this,"events"),Po(this,"namespace"),Po(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Qn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new mr(new Dr(r,Ye("disableProviderPing")))}}var yj=Object.defineProperty,bj=(t,e,n)=>e in t?yj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mo=(t,e,n)=>bj(t,typeof e!="symbol"?e+"":e,n);class vj{constructor(e){Mo(this,"name","cip34"),Mo(this,"client"),Mo(this,"httpProviders"),Mo(this,"events"),Mo(this,"namespace"),Mo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=yo(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var Ej=Object.defineProperty,_j=(t,e,n)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lo=(t,e,n)=>_j(t,typeof e!="symbol"?e+"":e,n);class Aj{constructor(e){Lo(this,"name","elrond"),Lo(this,"client"),Lo(this,"httpProviders"),Lo(this,"events"),Lo(this,"namespace"),Lo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yo(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var Cj=Object.defineProperty,Ij=(t,e,n)=>e in t?Cj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uo=(t,e,n)=>Ij(t,typeof e!="symbol"?e+"":e,n);class Nj{constructor(e){Uo(this,"name","multiversx"),Uo(this,"client"),Uo(this,"httpProviders"),Uo(this,"events"),Uo(this,"namespace"),Uo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=yo(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var Sj=Object.defineProperty,Tj=(t,e,n)=>e in t?Sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$o=(t,e,n)=>Tj(t,typeof e!="symbol"?e+"":e,n);class xj{constructor(e){$o(this,"name","near"),$o(this,"client"),$o(this,"httpProviders"),$o(this,"events"),$o(this,"namespace"),$o(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Qn(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace);return typeof r>"u"?void 0:new mr(new Dr(r,Ye("disableProviderPing")))}}var Oj=Object.defineProperty,Dj=(t,e,n)=>e in t?Oj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bo=(t,e,n)=>Dj(t,typeof e!="symbol"?e+"":e,n);class Rj{constructor(e){Bo(this,"name","tezos"),Bo(this,"client"),Bo(this,"httpProviders"),Bo(this,"events"),Bo(this,"namespace"),Bo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Qn(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace);return typeof r>"u"?void 0:new mr(new Dr(r))}}var kj=Object.defineProperty,Pj=(t,e,n)=>e in t?kj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jo=(t,e,n)=>Pj(t,typeof e!="symbol"?e+"":e,n);class Mj{constructor(e){jo(this,"name",UC),jo(this,"client"),jo(this,"httpProviders"),jo(this,"events"),jo(this,"namespace"),jo(this,"chainId"),this.namespace=e.namespace,this.events=Ye("events"),this.client=Ye("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(wr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Gi(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Gi(s);r[i.reference]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new mr(new Dr(r,Ye("disableProviderPing")))}}var Lj=Object.defineProperty,Uj=Object.defineProperties,$j=Object.getOwnPropertyDescriptors,bb=Object.getOwnPropertySymbols,Bj=Object.prototype.hasOwnProperty,jj=Object.prototype.propertyIsEnumerable,sg=(t,e,n)=>e in t?Lj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vu=(t,e)=>{for(var n in e||(e={}))Bj.call(e,n)&&sg(t,n,e[n]);if(bb)for(var n of bb(e))jj.call(e,n)&&sg(t,n,e[n]);return t},Cf=(t,e)=>Uj(t,$j(e)),rr=(t,e,n)=>sg(t,typeof e!="symbol"?e+"":e,n);let VC=class GC{constructor(e){rr(this,"client"),rr(this,"namespaces"),rr(this,"optionalNamespaces"),rr(this,"sessionProperties"),rr(this,"scopedProperties"),rr(this,"events",new zd),rr(this,"rpcProviders",{}),rr(this,"session"),rr(this,"providerOpts"),rr(this,"logger"),rr(this,"uri"),rr(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ll(Ia({level:(e==null?void 0:e.logger)||tb})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new GC(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:vu({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Kc(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:dt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=ub(this.session.namespaces);this.namespaces=bu(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=ub(s.namespaces);return this.namespaces=bu(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!As(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn("Failed to cleanup pending pairings",n)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await tB.init({core:this.providerOpts.core,logger:this.providerOpts.logger||tb,relayUrl:this.providerOpts.relayUrl||uB,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Qo(n)))];_f("client",this.client),_f("events",this.events),_f("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=GB(n,this.session);if((r==null?void 0:r.length)===0)return;const s=HC(r),i=bu(this.namespaces,this.optionalNamespaces),o=Cf(vu({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new cj({namespace:o});break;case"algorand":this.rpcProviders[n]=new wj({namespace:o});break;case"solana":this.rpcProviders[n]=new dj({namespace:o});break;case"cosmos":this.rpcProviders[n]=new pj({namespace:o});break;case"polkadot":this.rpcProviders[n]=new nj({namespace:o});break;case"cip34":this.rpcProviders[n]=new vj({namespace:o});break;case"elrond":this.rpcProviders[n]=new Aj({namespace:o});break;case"multiversx":this.rpcProviders[n]=new Nj({namespace:o});break;case"near":this.rpcProviders[n]=new xj({namespace:o});break;case"tezos":this.rpcProviders[n]=new Rj({namespace:o});break;default:this.rpcProviders[n]=new Mj({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&As(o)&&this.events.emit("accountsChanged",o.map(lb))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Qo(o),l=Ef(o)!==Ef(a)?`${c}:${Ef(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Cf(vu({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Cf(vu({},dt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(wr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[UC]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=bu(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Qo(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Qo(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s);const i=this.getProvider(r).getDefaultChain();n?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e})):this.getProvider(r).setDefaultChain(s),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(lb);if(!As(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${wu}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${wu}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${wu}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(wu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const Fj=VC;let Ci=null;const ur={getSIWX(){return G.state.siwx},async initializeIfEnabled(t=N.getActiveCaipAddress()){var i,o,a;const e=G.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(N.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=G.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=N.getAccountData(n))==null?void 0:o.user;await Le.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(Ci&&await Ci,(await e.getSessions(`${n}:${r}`,s)).length)return;await Le.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Ue.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((a=ne._getClient())==null?void 0:a.disconnect().catch(console.error)),fe.reset("Connect"),ft.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=G.state.siwx,e=de.getPlainAddress(N.getActiveCaipAddress()),n=dc(),r=ne._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();X.getConnectorId(n.chainNamespace)===H.CONNECTOR_ID.AUTH&&fe.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),N.setLastConnectedSIWECaipNetwork(n),Le.close(),Ue.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Le.state.open||fe.state.view==="ApproveTransaction")&&await Le.open({view:"SIWXSignMessage"}),ft.showError("Error signing message"),Ue.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=N.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,de.getPlainAddress(N.getActiveCaipAddress())||""));s&&s.length>0?await N.switchActiveNetwork(r):await ne.disconnect()}else await ne.disconnect()}else Le.close();Le.close(),Ue.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=N.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,de.getPlainAddress(N.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=G.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=N.getActiveCaipAddress();n=de.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=N.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=fe.state.view==="ApproveTransaction",r=fe.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var d;const i=ur.getSIWX(),o=dc();if(!i||!s.includes(H.CHAIN.EVM)||(d=G.state.remoteFeatures)!=null&&d.emailCapture){const f=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:f.address,chainId:f.chainId,accounts:f.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:l,preferredAccountType:r});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await ur.addEmbeddedWalletSession(l,u.message,u.signature),N.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(Ci)return Ci;const r=ur.getSIWX();return r?(Ci=r.addSession({data:t,message:e,signature:n}).finally(()=>{Ci=null}),Ci):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var c,l,u;const r=ur.getSIWX(),s=dc(),i=new Set(e.map(d=>d.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((c=dc())==null?void 0:c.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(d=>d!==o.chainId)]});if(ft.showLoading("Authenticating...",{autoClose:!1}),oe.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(l=a.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(u=a==null?void 0:a.auths)!=null&&u.length){const d=a.auths.map(f=>{const h=t.client.formatAuthMessage({request:f.p,iss:f.p.iss});return{data:{...f.p,accountAddress:f.p.iss.split(":").slice(-1).join(""),chainId:f.p.iss.split(":").slice(2,4).join(":"),uri:f.p.aud,version:f.p.version||o.version,expirationTime:f.p.exp,issuedAt:f.p.iat,notBefore:f.p.nbf},message:h,signature:f.s.s,cacao:f}});try{await r.setSessions(d),s&&N.setLastConnectedSIWECaipNetwork(s),Ue.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ur.getSIWXEventProperties()})}catch(f){throw console.error("SIWX:universalProviderAuth - failed to set sessions",f),Ue.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ur.getSIWXEventProperties()}),await t.disconnect().catch(console.error),f}finally{ft.hide()}}return!0},getSIWXEventProperties(){var e;const t=N.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=N.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Bn(t)===yt.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},OQ={isUnsupportedChainView(){return fe.state.view==="UnsupportedChain"||fe.state.view==="SwitchNetwork"&&fe.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){Le.shake();return}if(await ur.isSIWXCloseDisabled()){Le.shake();return}(fe.state.view==="DataCapture"||fe.state.view==="DataCaptureOtpConfirm")&&ne.disconnect(),Le.close()}},Gn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:H.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Yc={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[H.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[H.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[H.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[H.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[H.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[H.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[H.CONNECTOR_ID.INJECTED]:"Browser Wallet",[H.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[H.CONNECTOR_ID.COINBASE]:"Coinbase",[H.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[H.CONNECTOR_ID.LEDGER]:"Ledger",[H.CONNECTOR_ID.SAFE]:"Safe"}},Ln={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Gn.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=N.state.activeChain;return H.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>X.getConnectorId(e)===H.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},zj=new AbortController,cn={EmbeddedWalletAbortController:zj,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Ko()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systems date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},Wj={createLogger(t,e="error"){const n=Ia({level:e}),{logger:r}=Og({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}};function Hj(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vb(t){return Hj(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const KC="2.40.3";let ic={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${KC}`},xs=class ig extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ig?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ig&&n.cause.docsPath||n.docsPath,i=(a=ic.getDocsUrl)==null?void 0:a.call(ic,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ic.version?[`Version: ${ic.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=KC}walk(e){return YC(this,e)}};function YC(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?YC(t.cause,e):e?null:t}let QC=class extends xs{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function qj(t,{dir:e,size:n=32}={}){return typeof t=="string"?Vj(t,{dir:e,size:n}):Gj(t,{dir:e,size:n})}function Vj(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new QC({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Gj(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new QC({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let Kj=class extends xs{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Yj(t,{size:e}){if(vb(t)>e)throw new Kj({givenSize:vb(t),maxSize:e})}const Qj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zj(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Qj[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Yj(r,{size:e.size}),qj(r,{dir:"right",size:e.size})):r}const Jj=new TextEncoder;function Xj(t,e={}){const n=Jj.encode(t);return Zj(n,e)}class eF extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Ki=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),mm=t=>t;class Oc extends xs{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${mm(o)}`,e&&`Request body: ${Ki(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class ZC extends xs{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${mm(r)}`,`Request body: ${Ki(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}}class Eb extends xs{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${mm(n)}`,`Request body: ${Ki(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const tF=-1;class zn extends xs{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof ZC?e.code:n??tF}}class Zn extends zn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Qc extends zn{constructor(e){super(e,{code:Qc.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Zc extends zn{constructor(e){super(e,{code:Zc.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Jc extends zn{constructor(e,{method:n}={}){super(e,{code:Jc.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Xc extends zn{constructor(e){super(e,{code:Xc.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class da extends zn{constructor(e){super(e,{code:da.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(da,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class el extends zn{constructor(e){super(e,{code:el.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class tl extends zn{constructor(e){super(e,{code:tl.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class nl extends zn{constructor(e){super(e,{code:nl.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ha extends zn{constructor(e){super(e,{code:ha.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Wi extends zn{constructor(e,{method:n}={}){super(e,{code:Wi.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class fa extends zn{constructor(e){super(e,{code:fa.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class rl extends zn{constructor(e){super(e,{code:rl.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(rl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Yi extends Zn{constructor(e){super(e,{code:Yi.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sl extends Zn{constructor(e){super(e,{code:sl.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(sl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class il extends Zn{constructor(e,{method:n}={}){super(e,{code:il.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ol extends Zn{constructor(e){super(e,{code:ol.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class al extends Zn{constructor(e){super(e,{code:al.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(al,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class cl extends Zn{constructor(e){super(e,{code:cl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(cl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ll extends Zn{constructor(e){super(e,{code:ll.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ul extends Zn{constructor(e){super(e,{code:ul.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ul,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class dl extends Zn{constructor(e){super(e,{code:dl.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class hl extends Zn{constructor(e){super(e,{code:hl.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class fl extends Zn{constructor(e){super(e,{code:fl.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class pl extends Zn{constructor(e){super(e,{code:pl.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class gl extends Zn{constructor(e){super(e,{code:gl.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(gl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class nF extends zn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class wm extends xs{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(wm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function rF(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const If=new Map;function sF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<u.length;h++){const{resolve:p}=u[h];p==null||p([f[h],f])}}).catch(f=>{for(let h=0;h<u.length;h++){const{reject:p}=u[h];p==null||p(f)}})},o=()=>If.delete(e),a=()=>c().map(({args:u})=>u),c=()=>If.get(e)||[],l=u=>If.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:f,reject:h}=rF();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:f,reject:h}),d):(l({args:u,resolve:f,reject:h}),setTimeout(i,r),d)}}}async function JC(t){return new Promise(e=>setTimeout(e,t))}function iF(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await JC(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const og=256;let Eu=og,_u;function oF(t=11){if(!_u||Eu+t>og*2){_u="",Eu=0;for(let e=0;e<og;e++)_u+=(256+Math.random()*256|0).toString(16).substring(1)}return _u.substring(Eu,Eu+++t)}const Au=new eF(8192);function aF(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Au.get(n))return Au.get(n);const r=t().finally(()=>Au.delete(n));return Au.set(n,r),r}function cF(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Wi(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Wi(new Error("method not supported"),{method:l});const u=s?Xj(`${c}.${Ki(n)}`):void 0;return aF(()=>iF(async()=>{try{return await t(n)}catch(f){const h=f;switch(h.code){case Qc.code:throw new Qc(h);case Zc.code:throw new Zc(h);case Jc.code:throw new Jc(h,{method:n.method});case Xc.code:throw new Xc(h);case da.code:throw new da(h);case el.code:throw new el(h);case tl.code:throw new tl(h);case nl.code:throw new nl(h);case ha.code:throw new ha(h);case Wi.code:throw new Wi(h,{method:n.method});case fa.code:throw new fa(h);case rl.code:throw new rl(h);case Yi.code:throw new Yi(h);case sl.code:throw new sl(h);case il.code:throw new il(h);case ol.code:throw new ol(h);case al.code:throw new al(h);case cl.code:throw new cl(h);case ll.code:throw new ll(h);case ul.code:throw new ul(h);case dl.code:throw new dl(h);case hl.code:throw new hl(h);case fl.code:throw new fl(h);case pl.code:throw new pl(h);case gl.code:throw new gl(h);case 5e3:throw new Yi(h);default:throw f instanceof xs?f:new nF(h)}}},{delay:({count:f,error:h})=>{var p;if(h&&h instanceof Oc){const g=(p=h==null?void 0:h.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>lF(f)}),{enabled:s,id:u})}}function lF(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===fa.code||t.code===da.code:t instanceof Oc&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function uF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r&&a.abort()},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function dF(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const _b=dF();function hF(t,e={}){return{async request(n){var f;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{const h=await uF(async({signal:g})=>{const y={...c,body:Array.isArray(r)?Ki(r.map(S=>({jsonrpc:"2.0",id:S.id??_b.take(),...S}))):Ki({jsonrpc:"2.0",id:r.id??_b.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?g:null)},b=new Request(t,y),C=await(i==null?void 0:i(b,y))??{...y,url:t};return await s(C.url??t,C)},{errorInstance:new Eb({body:r,url:t}),timeout:a,signal:!0});o&&await o(h);let p;if((f=h.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))p=await h.json();else{p=await h.text();try{p=JSON.parse(p||"{}")}catch(g){if(h.ok)throw g;p={error:p}}}if(!h.ok)throw new Oc({body:r,details:Ki(p.error)||h.statusText,headers:h.headers,status:h.status,url:t});return p}catch(h){throw h instanceof Oc||h instanceof Eb?h:new Oc({body:r,cause:h,url:t})}}}}function XC({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=oF();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:cF(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Ab(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=fF,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let f=t,h=()=>{};const p=XC({key:n,name:r,async request({method:g,params:y}){let b;const C=async(E=0)=>{const S=f[E]({...d,chain:c,retryCount:0,timeout:u});try{const O=await S.request({method:g,params:y});return h({method:g,params:y,response:O,transport:S,status:"success"}),O}catch(O){if(h({error:O,method:g,params:y,transport:S,status:"error"}),i(O)||E===f.length-1||(b??(b=f.slice(E+1).some(P=>{const{include:$,exclude:U}=P({chain:c}).config.methods||{};return $?$.includes(g):U?!U.includes(g):!0})),!b))throw O;return C(E+1)}};return C()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>h=g,transports:f.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};pF({chain:c,interval:g.interval??l,onTransports:y=>f=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:f,weights:g.weights})}return p}}function fF(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ha.code||t.code===Yi.code||wm.nodeMessage.test(t.message)||t.code===5e3))}function pF({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const f=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),b=Date.now();let C,E;try{await(r?r({transport:y}):y.request({method:"net_listening"})),E=1}catch{E=0}finally{C=Date.now()}return{latency:C-b,success:E}}));u.push(f),u.length>s&&u.shift();const h=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const b=u.map(P=>P[y].latency),E=1-b.reduce((P,$)=>P+$,0)/b.length/h,S=u.map(P=>P[y].success),O=S.reduce((P,$)=>P+$,0)/S.length;return O===0?[0,y]:[l*E+c*O,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await JC(e),d()};d()}class gF extends xs{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Cu(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:f,retryCount:h,timeout:p})=>{const{batchSize:g=1e3,wait:y=0}=typeof n=="object"?n:{},b=e.retryCount??h,C=p??e.timeout??1e4,E=t||(f==null?void 0:f.rpcUrls.default.http[0]);if(!E)throw new gF;const S=hF(E,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:C});return XC({key:i,methods:o,name:a,async request({method:O,params:P}){const $={method:O,params:P},{schedule:U}=sF({id:E,wait:y,shouldSplitBatch(k){return k.length>g},fn:k=>S.request({body:k}),sort:(k,j)=>k.id-j.id}),T=async k=>n?U(k):[await S.request({body:k})],[{error:M,result:R}]=await T($);if(d)return{error:M,result:R};if(M)throw new ZC({body:$,error:M,url:E});return R},retryCount:b,retryDelay:u,timeout:C,type:"http"},{fetchOptions:s,url:E})}}const mF="rpc.walletconnect.org";function Cb(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Nf=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ho={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===mF}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:H.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${H.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Nf.includes(e)?Cb(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var f,h,p,g,y,b,C;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(p=(h=(f=t.rpcUrls)==null?void 0:f.default)==null?void 0:h.http)==null?void 0:p[0],a=this.getDefaultRpcUrl(t,i,n),c=((b=(y=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:y.http)==null?void 0:b[0])||o,l=((C=r==null?void 0:r[i])==null?void 0:C.map(E=>E.url))||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Yc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ho.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Cu(a.url,a.config))}),Nf.includes(t.caipNetworkId)&&r.push(Cu(Cb(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Cu(a))}),Ab(r)},extendWagmiTransports(t,e,n){if(Nf.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Ab([n,Cu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:H.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Q.getActiveCaipNetworkId(),n=N.getAllRequestedCaipNetworks(),r=Array.from(((c=N.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},_d={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Sn=Xe({providers:{..._d},providerIds:{..._d}}),it={state:Sn,subscribeKey(t,e){return Tt(Sn,t,e)},subscribe(t){return _t(Sn,()=>{t(Sn)})},subscribeProviders(t){return _t(Sn.providers,()=>t(Sn.providers))},setProvider(t,e){t&&e&&(Sn.providers[t]=Ji(e))},getProvider(t){if(t)return Sn.providers[t]},setProviderId(t,e){e&&(Sn.providerIds[t]=e)},getProviderId(t){if(t)return Sn.providerIds[t]},reset(){Sn.providers={..._d},Sn.providerIds={..._d}},resetChain(t){Sn.providers[t]=void 0,Sn.providerIds[t]=void 0}},Ib={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Yt={set(t,e){Kn.isClient&&localStorage.setItem(`${he.STORAGE_KEY}${t}`,e)},get(t){return Kn.isClient?localStorage.getItem(`${he.STORAGE_KEY}${t}`):null},delete(t,e){Kn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${he.STORAGE_KEY}${t}`))}},Iu=30*1e3,Kn={checkIfAllowedToTriggerEmail(){const t=Yt.get(he.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Iu){const n=Math.ceil((Iu-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Yt.get(he.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Iu)return Math.ceil((Iu-e)/1e3)}return 0},checkIfRequestExists(t){return yt.NOT_SAFE_RPC_METHODS.includes(t.method)||yt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Ib.transactionHash))||(t==null?void 0:t.match(Ib.signedMessage)))?he.RPC_RESPONSE_TYPE_TX:he.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return yt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Ke;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ke||(Ke={}));var ag;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ag||(ag={}));const ae=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ni=t=>{switch(typeof t){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return isNaN(t)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(t)?ae.array:t===null?ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ae.promise:typeof Map<"u"&&t instanceof Map?ae.map:typeof Set<"u"&&t instanceof Set?ae.set:typeof Date<"u"&&t instanceof Date?ae.date:ae.object;default:return ae.unknown}},Z=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wF=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Tr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Tr.create=t=>new Tr(t);const ml=(t,e)=>{let n;switch(t.code){case Z.invalid_type:t.received===ae.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ke.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ke.joinValues(t.keys,", ")}`;break;case Z.invalid_union:n="Invalid input";break;case Z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ke.joinValues(t.options)}`;break;case Z.invalid_enum_value:n=`Invalid enum value. Expected ${Ke.joinValues(t.options)}, received '${t.received}'`;break;case Z.invalid_arguments:n="Invalid function arguments";break;case Z.invalid_return_type:n="Invalid function return type";break;case Z.invalid_date:n="Invalid date";break;case Z.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ke.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Z.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Z.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Z.custom:n="Invalid input";break;case Z.invalid_intersection_types:n="Intersection results could not be merged";break;case Z.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Z.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ke.assertNever(t)}return{message:n}};let e1=ml;function yF(t){e1=t}function Ad(){return e1}const Cd=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},bF=[];function ue(t,e){const n=Cd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ad(),ml].filter(r=>!!r)});t.common.issues.push(n)}class ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Te;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ln.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Te;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Te=Object.freeze({status:"aborted"}),t1=t=>({status:"dirty",value:t}),bn=t=>({status:"valid",value:t}),cg=t=>t.status==="aborted",lg=t=>t.status==="dirty",wl=t=>t.status==="valid",Id=t=>typeof Promise<"u"&&t instanceof Promise;var Ee;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ee||(Ee={}));class Zr{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Nb=(t,e)=>{if(wl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Tr(t.common.issues);return this._error=n,this._error}}};function Re(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Me{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ni(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ln,ctx:{common:e.parent.common,data:e.data,parsedType:ni(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Id(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Nb(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ni(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Id(s)?s:Promise.resolve(s));return Nb(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Z.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Or({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Cs.create(this,this._def)}nullable(){return ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xr.create(this,this._def)}promise(){return ga.create(this,this._def)}or(e){return El.create([this,e],this._def)}and(e){return _l.create(this,e,this._def)}transform(e){return new Or({...Re(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sl({...Re(this._def),innerType:this,defaultValue:n,typeName:Ne.ZodDefault})}brand(){return new r1({typeName:Ne.ZodBranded,type:this,...Re(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new xd({...Re(this._def),innerType:this,catchValue:n,typeName:Ne.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Gl.create(this,e)}readonly(){return Dd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vF=/^c[^\s-]{8,}$/i,EF=/^[a-z][a-z0-9]*$/,_F=/^[0-9A-HJKMNP-TV-Z]{26}$/,AF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CF=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sf;const NF=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,SF=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,TF=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function xF(t,e){return!!((e==="v4"||!e)&&NF.test(t)||(e==="v6"||!e)&&SF.test(t))}class Nr extends Me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const i=this._getOrReturnCtx(e);return ue(i,{code:Z.invalid_type,expected:ae.string,received:i.parsedType}),Te}const r=new ln;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ue(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ue(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")CF.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"email",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Sf||(Sf=new RegExp(IF,"u")),Sf.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")AF.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")vF.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")EF.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")_F.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ue(s,{validation:"url",code:Z.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"regex",code:Z.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?TF(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?xF(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ue(s,{validation:"ip",code:Z.invalid_string,message:i.message}),r.dirty()):Ke.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Z.invalid_string,...Ee.errToObj(r)})}_addCheck(e){return new Nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ee.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ee.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ee.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ee.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ee.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ee.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ee.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ee.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ee.errToObj(n)})}nonempty(e){return this.min(1,Ee.errToObj(e))}trim(){return new Nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Nr.create=t=>{var e;return new Nr({checks:[],typeName:Ne.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Re(t)})};function OF(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class fi extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const i=this._getOrReturnCtx(e);return ue(i,{code:Z.invalid_type,expected:ae.number,received:i.parsedType}),Te}let r;const s=new ln;for(const i of this._def.checks)i.kind==="int"?Ke.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?OF(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.not_finite,message:i.message}),s.dirty()):Ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new fi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new fi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ee.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ke.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}fi.create=t=>new fi({checks:[],typeName:Ne.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class pi extends Me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ae.bigint){const i=this._getOrReturnCtx(e);return ue(i,{code:Z.invalid_type,expected:ae.bigint,received:i.parsedType}),Te}let r;const s=new ln;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ue(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ee.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ee.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ee.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ee.toString(n))}setLimit(e,n,r,s){return new pi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ee.toString(s)}]})}_addCheck(e){return new pi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ee.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ee.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pi.create=t=>{var e;return new pi({checks:[],typeName:Ne.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Re(t)})};class yl extends Me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.boolean,received:r.parsedType}),Te}return bn(e.data)}}yl.create=t=>new yl({typeName:Ne.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Re(t)});class io extends Me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const i=this._getOrReturnCtx(e);return ue(i,{code:Z.invalid_type,expected:ae.date,received:i.parsedType}),Te}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ue(i,{code:Z.invalid_date}),Te}const r=new ln;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ue(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ke.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ee.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ee.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}io.create=t=>new io({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ne.ZodDate,...Re(t)});class Nd extends Me{_parse(e){if(this._getType(e)!==ae.symbol){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.symbol,received:r.parsedType}),Te}return bn(e.data)}}Nd.create=t=>new Nd({typeName:Ne.ZodSymbol,...Re(t)});class bl extends Me{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.undefined,received:r.parsedType}),Te}return bn(e.data)}}bl.create=t=>new bl({typeName:Ne.ZodUndefined,...Re(t)});class vl extends Me{_parse(e){if(this._getType(e)!==ae.null){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.null,received:r.parsedType}),Te}return bn(e.data)}}vl.create=t=>new vl({typeName:Ne.ZodNull,...Re(t)});class pa extends Me{constructor(){super(...arguments),this._any=!0}_parse(e){return bn(e.data)}}pa.create=t=>new pa({typeName:Ne.ZodAny,...Re(t)});class Qi extends Me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bn(e.data)}}Qi.create=t=>new Qi({typeName:Ne.ZodUnknown,...Re(t)});class Ts extends Me{_parse(e){const n=this._getOrReturnCtx(e);return ue(n,{code:Z.invalid_type,expected:ae.never,received:n.parsedType}),Te}}Ts.create=t=>new Ts({typeName:Ne.ZodNever,...Re(t)});class Sd extends Me{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.void,received:r.parsedType}),Te}return bn(e.data)}}Sd.create=t=>new Sd({typeName:Ne.ZodVoid,...Re(t)});class xr extends Me{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ae.array)return ue(n,{code:Z.invalid_type,expected:ae.array,received:n.parsedType}),Te;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ue(n,{code:o?Z.too_big:Z.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ue(n,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ue(n,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Zr(n,o,n.path,a)))).then(o=>ln.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Zr(n,o,n.path,a)));return ln.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new xr({...this._def,minLength:{value:e,message:Ee.toString(n)}})}max(e,n){return new xr({...this._def,maxLength:{value:e,message:Ee.toString(n)}})}length(e,n){return new xr({...this._def,exactLength:{value:e,message:Ee.toString(n)}})}nonempty(e){return this.min(1,e)}}xr.create=(t,e)=>new xr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...Re(e)});function qo(t){if(t instanceof pt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Cs.create(qo(r))}return new pt({...t._def,shape:()=>e})}else return t instanceof xr?new xr({...t._def,type:qo(t.element)}):t instanceof Cs?Cs.create(qo(t.unwrap())):t instanceof ao?ao.create(qo(t.unwrap())):t instanceof Jr?Jr.create(t.items.map(e=>qo(e))):t}class pt extends Me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ke.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ae.object){const l=this._getOrReturnCtx(e);return ue(l,{code:Z.invalid_type,expected:ae.object,received:l.parsedType}),Te}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ts&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Zr(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Ts){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ue(s,{code:Z.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Zr(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ln.mergeObjectSync(r,l)):ln.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ee.errToObj,new pt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ee.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new pt({...this._def,unknownKeys:"strip"})}passthrough(){return new pt({...this._def,unknownKeys:"passthrough"})}extend(e){return new pt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ne.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new pt({...this._def,catchall:e})}pick(e){const n={};return Ke.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new pt({...this._def,shape:()=>n})}omit(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new pt({...this._def,shape:()=>n})}deepPartial(){return qo(this)}partial(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new pt({...this._def,shape:()=>n})}required(e){const n={};return Ke.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Cs;)i=i._def.innerType;n[r]=i}}),new pt({...this._def,shape:()=>n})}keyof(){return n1(Ke.objectKeys(this.shape))}}pt.create=(t,e)=>new pt({shape:()=>t,unknownKeys:"strip",catchall:Ts.create(),typeName:Ne.ZodObject,...Re(e)});pt.strictCreate=(t,e)=>new pt({shape:()=>t,unknownKeys:"strict",catchall:Ts.create(),typeName:Ne.ZodObject,...Re(e)});pt.lazycreate=(t,e)=>new pt({shape:t,unknownKeys:"strip",catchall:Ts.create(),typeName:Ne.ZodObject,...Re(e)});class El extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Tr(a.ctx.common.issues));return ue(n,{code:Z.invalid_union,unionErrors:o}),Te}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Tr(c));return ue(n,{code:Z.invalid_union,unionErrors:a}),Te}}get options(){return this._def.options}}El.create=(t,e)=>new El({options:t,typeName:Ne.ZodUnion,...Re(e)});const Yu=t=>t instanceof Cl?Yu(t.schema):t instanceof Or?Yu(t.innerType()):t instanceof Il?[t.value]:t instanceof gi?t.options:t instanceof Nl?Object.keys(t.enum):t instanceof Sl?Yu(t._def.innerType):t instanceof bl?[void 0]:t instanceof vl?[null]:null;class uh extends Me{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.object)return ue(n,{code:Z.invalid_type,expected:ae.object,received:n.parsedType}),Te;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ue(n,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Yu(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new uh({typeName:Ne.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Re(r)})}}function ug(t,e){const n=ni(t),r=ni(e);if(t===e)return{valid:!0,data:t};if(n===ae.object&&r===ae.object){const s=Ke.objectKeys(e),i=Ke.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=ug(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ae.array&&r===ae.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=ug(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ae.date&&r===ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class _l extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(cg(i)||cg(o))return Te;const a=ug(i.value,o.value);return a.valid?((lg(i)||lg(o))&&n.dirty(),{status:n.value,value:a.data}):(ue(r,{code:Z.invalid_intersection_types}),Te)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}_l.create=(t,e,n)=>new _l({left:t,right:e,typeName:Ne.ZodIntersection,...Re(n)});class Jr extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.array)return ue(r,{code:Z.invalid_type,expected:ae.array,received:r.parsedType}),Te;if(r.data.length<this._def.items.length)return ue(r,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Te;!this._def.rest&&r.data.length>this._def.items.length&&(ue(r,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Zr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ln.mergeArray(n,o)):ln.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Jr({...this._def,rest:e})}}Jr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jr({items:t,typeName:Ne.ZodTuple,rest:null,...Re(e)})};class Al extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.object)return ue(r,{code:Z.invalid_type,expected:ae.object,received:r.parsedType}),Te;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Zr(r,a,r.path,a)),value:o._parse(new Zr(r,r.data[a],r.path,a))});return r.common.async?ln.mergeObjectAsync(n,s):ln.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Me?new Al({keyType:e,valueType:n,typeName:Ne.ZodRecord,...Re(r)}):new Al({keyType:Nr.create(),valueType:e,typeName:Ne.ZodRecord,...Re(n)})}}class Td extends Me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.map)return ue(r,{code:Z.invalid_type,expected:ae.map,received:r.parsedType}),Te;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Zr(r,a,r.path,[l,"key"])),value:i._parse(new Zr(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Te;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Te;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Td.create=(t,e,n)=>new Td({valueType:e,keyType:t,typeName:Ne.ZodMap,...Re(n)});class oo extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.set)return ue(r,{code:Z.invalid_type,expected:ae.set,received:r.parsedType}),Te;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ue(r,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ue(r,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Te;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Zr(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new oo({...this._def,minSize:{value:e,message:Ee.toString(n)}})}max(e,n){return new oo({...this._def,maxSize:{value:e,message:Ee.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}oo.create=(t,e)=>new oo({valueType:t,minSize:null,maxSize:null,typeName:Ne.ZodSet,...Re(e)});class na extends Me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.function)return ue(n,{code:Z.invalid_type,expected:ae.function,received:n.parsedType}),Te;function r(a,c){return Cd({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ad(),ml].filter(l=>!!l),issueData:{code:Z.invalid_arguments,argumentsError:c}})}function s(a,c){return Cd({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ad(),ml].filter(l=>!!l),issueData:{code:Z.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ga){const a=this;return bn(async function(...c){const l=new Tr([]),u=await a._def.args.parseAsync(c,i).catch(h=>{throw l.addIssue(r(c,h)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(h=>{throw l.addIssue(s(d,h)),l})})}else{const a=this;return bn(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Tr([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Tr([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new na({...this._def,args:Jr.create(e).rest(Qi.create())})}returns(e){return new na({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new na({args:e||Jr.create([]).rest(Qi.create()),returns:n||Qi.create(),typeName:Ne.ZodFunction,...Re(r)})}}class Cl extends Me{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Cl.create=(t,e)=>new Cl({getter:t,typeName:Ne.ZodLazy,...Re(e)});class Il extends Me{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ue(n,{received:n.data,code:Z.invalid_literal,expected:this._def.value}),Te}return{status:"valid",value:e.data}}get value(){return this._def.value}}Il.create=(t,e)=>new Il({value:t,typeName:Ne.ZodLiteral,...Re(e)});function n1(t,e){return new gi({values:t,typeName:Ne.ZodEnum,...Re(e)})}class gi extends Me{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ue(n,{expected:Ke.joinValues(r),received:n.parsedType,code:Z.invalid_type}),Te}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ue(n,{received:n.data,code:Z.invalid_enum_value,options:r}),Te}return bn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return gi.create(e)}exclude(e){return gi.create(this.options.filter(n=>!e.includes(n)))}}gi.create=n1;class Nl extends Me{_parse(e){const n=Ke.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const s=Ke.objectValues(n);return ue(r,{expected:Ke.joinValues(s),received:r.parsedType,code:Z.invalid_type}),Te}if(n.indexOf(e.data)===-1){const s=Ke.objectValues(n);return ue(r,{received:r.data,code:Z.invalid_enum_value,options:s}),Te}return bn(e.data)}get enum(){return this._def.values}}Nl.create=(t,e)=>new Nl({values:t,typeName:Ne.ZodNativeEnum,...Re(e)});class ga extends Me{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ae.promise&&n.common.async===!1)return ue(n,{code:Z.invalid_type,expected:ae.promise,received:n.parsedType}),Te;const r=n.parsedType===ae.promise?n.data:Promise.resolve(n.data);return bn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ga.create=(t,e)=>new ga({type:t,typeName:Ne.ZodPromise,...Re(e)});class Or extends Me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ue(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Te:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Te:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wl(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>wl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Ke.assertNever(s)}}Or.create=(t,e,n)=>new Or({schema:t,typeName:Ne.ZodEffects,effect:e,...Re(n)});Or.createWithPreprocess=(t,e,n)=>new Or({schema:e,effect:{type:"preprocess",transform:t},typeName:Ne.ZodEffects,...Re(n)});class Cs extends Me{_parse(e){return this._getType(e)===ae.undefined?bn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cs.create=(t,e)=>new Cs({innerType:t,typeName:Ne.ZodOptional,...Re(e)});class ao extends Me{_parse(e){return this._getType(e)===ae.null?bn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ao.create=(t,e)=>new ao({innerType:t,typeName:Ne.ZodNullable,...Re(e)});class Sl extends Me{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sl.create=(t,e)=>new Sl({innerType:t,typeName:Ne.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});class xd extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Id(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Tr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Tr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}xd.create=(t,e)=>new xd({innerType:t,typeName:Ne.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});class Od extends Me{_parse(e){if(this._getType(e)!==ae.nan){const r=this._getOrReturnCtx(e);return ue(r,{code:Z.invalid_type,expected:ae.nan,received:r.parsedType}),Te}return{status:"valid",value:e.data}}}Od.create=t=>new Od({typeName:Ne.ZodNaN,...Re(t)});const DF=Symbol("zod_brand");class r1 extends Me{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Gl extends Me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Te:i.status==="dirty"?(n.dirty(),t1(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Te:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Gl({in:e,out:n,typeName:Ne.ZodPipeline})}}class Dd extends Me{_parse(e){const n=this._def.innerType._parse(e);return wl(n)&&(n.value=Object.freeze(n.value)),n}}Dd.create=(t,e)=>new Dd({innerType:t,typeName:Ne.ZodReadonly,...Re(e)});const s1=(t,e={},n)=>t?pa.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):pa.create(),RF={object:pt.lazycreate};var Ne;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const kF=(t,e={message:`Input not instance of ${t.name}`})=>s1(n=>n instanceof t,e),i1=Nr.create,o1=fi.create,PF=Od.create,MF=pi.create,a1=yl.create,LF=io.create,UF=Nd.create,$F=bl.create,BF=vl.create,jF=pa.create,FF=Qi.create,zF=Ts.create,WF=Sd.create,HF=xr.create,qF=pt.create,VF=pt.strictCreate,GF=El.create,KF=uh.create,YF=_l.create,QF=Jr.create,ZF=Al.create,JF=Td.create,XF=oo.create,e9=na.create,t9=Cl.create,n9=Il.create,r9=gi.create,s9=Nl.create,i9=ga.create,Sb=Or.create,o9=Cs.create,a9=ao.create,c9=Or.createWithPreprocess,l9=Gl.create,u9=()=>i1().optional(),d9=()=>o1().optional(),h9=()=>a1().optional(),f9={string:t=>Nr.create({...t,coerce:!0}),number:t=>fi.create({...t,coerce:!0}),boolean:t=>yl.create({...t,coerce:!0}),bigint:t=>pi.create({...t,coerce:!0}),date:t=>io.create({...t,coerce:!0})},p9=Te;var v=Object.freeze({__proto__:null,defaultErrorMap:ml,setErrorMap:yF,getErrorMap:Ad,makeIssue:Cd,EMPTY_PATH:bF,addIssueToContext:ue,ParseStatus:ln,INVALID:Te,DIRTY:t1,OK:bn,isAborted:cg,isDirty:lg,isValid:wl,isAsync:Id,get util(){return Ke},get objectUtil(){return ag},ZodParsedType:ae,getParsedType:ni,ZodType:Me,ZodString:Nr,ZodNumber:fi,ZodBigInt:pi,ZodBoolean:yl,ZodDate:io,ZodSymbol:Nd,ZodUndefined:bl,ZodNull:vl,ZodAny:pa,ZodUnknown:Qi,ZodNever:Ts,ZodVoid:Sd,ZodArray:xr,ZodObject:pt,ZodUnion:El,ZodDiscriminatedUnion:uh,ZodIntersection:_l,ZodTuple:Jr,ZodRecord:Al,ZodMap:Td,ZodSet:oo,ZodFunction:na,ZodLazy:Cl,ZodLiteral:Il,ZodEnum:gi,ZodNativeEnum:Nl,ZodPromise:ga,ZodEffects:Or,ZodTransformer:Or,ZodOptional:Cs,ZodNullable:ao,ZodDefault:Sl,ZodCatch:xd,ZodNaN:Od,BRAND:DF,ZodBranded:r1,ZodPipeline:Gl,ZodReadonly:Dd,custom:s1,Schema:Me,ZodSchema:Me,late:RF,get ZodFirstPartyTypeKind(){return Ne},coerce:f9,any:jF,array:HF,bigint:MF,boolean:a1,date:LF,discriminatedUnion:KF,effect:Sb,enum:r9,function:e9,instanceof:kF,intersection:YF,lazy:t9,literal:n9,map:JF,nan:PF,nativeEnum:s9,never:zF,null:BF,nullable:a9,number:o1,object:qF,oboolean:h9,onumber:d9,optional:o9,ostring:u9,pipeline:l9,preprocess:c9,promise:i9,record:ZF,set:XF,strictObject:VF,string:i1,symbol:UF,transformer:Sb,tuple:QF,undefined:$F,union:GF,unknown:FF,void:WF,NEVER:p9,ZodIssueCode:Z,quotelessJson:wF,ZodError:Tr});const gt=v.object({message:v.string()});function ce(t){return v.literal(he[t])}const dh=v.object({serializedMessage:v.string().optional(),accountAddress:v.string(),chainId:v.string(),notBefore:v.string().optional(),domain:v.string(),uri:v.string(),version:v.string(),nonce:v.string(),statement:v.string().optional(),resources:v.array(v.string()).optional(),requestId:v.string().optional(),issuedAt:v.string().optional(),expirationTime:v.string().optional()});v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const g9=v.object({chainId:v.string().or(v.number()),rpcUrl:v.optional(v.string())}),m9=v.object({email:v.string().email()}),w9=v.object({otp:v.string()}),y9=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number())),siwxMessage:v.optional(dh),rpcUrl:v.optional(v.string())}),b9=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string()),siwxMessage:v.optional(dh),rpcUrl:v.optional(v.string())}),v9=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),E9=v.object({email:v.string().email()}),_9=v.object({otp:v.string()}),A9=v.object({otp:v.string()}),C9=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),I9=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),N9=v.object({type:v.string()}),S9=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),T9=v.object({url:v.string()}),x9=v.object({userName:v.string()}),O9=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([yt.ACCOUNT_TYPES.EOA,yt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(dh)}),D9=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),R9=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([yt.ACCOUNT_TYPES.EOA,yt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(dh)}),k9=v.object({uri:v.string()}),P9=v.object({isConnected:v.boolean()}),M9=v.object({chainId:v.string().or(v.number())}),L9=v.object({chainId:v.string().or(v.number())}),U9=v.object({newEmail:v.string().email()}),$9=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const B9=v.object({version:v.string().optional()}),j9=v.object({type:v.string(),address:v.string()}),F9=v.any(),z9=v.object({method:v.literal("eth_accounts")}),W9=v.object({method:v.literal("eth_blockNumber")}),H9=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),q9=v.object({method:v.literal("eth_chainId")}),V9=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),G9=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),K9=v.object({method:v.literal("eth_gasPrice")}),Y9=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),Q9=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),Z9=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),J9=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),X9=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),ez=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),tz=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),nz=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),rz=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),sz=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),iz=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),oz=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),az=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),cz=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),lz=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),uz=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),dz=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),hz=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),fz=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),pz=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),gz=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),mz=v.object({method:v.literal("eth_newBlockFilter")}),wz=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),yz=v.object({method:v.literal("eth_newPendingTransactionFilter")}),bz=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),vz=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),Ez=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),Tb=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),_z=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),Az=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),Cz=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),Iz=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),Nz=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),Sz=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),Tz=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),xz=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),Oz=v.object({method:v.literal("wallet_getCapabilities"),params:v.array(v.string().or(v.number()).optional()).optional()}),Dz=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),Rz=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),kz=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),xb=v.object({token:v.string()}),le=v.object({id:v.string().optional()}),Tf={appEvent:le.extend({type:ce("APP_SWITCH_NETWORK"),payload:g9}).or(le.extend({type:ce("APP_CONNECT_EMAIL"),payload:m9})).or(le.extend({type:ce("APP_CONNECT_DEVICE")})).or(le.extend({type:ce("APP_CONNECT_OTP"),payload:w9})).or(le.extend({type:ce("APP_CONNECT_SOCIAL"),payload:y9})).or(le.extend({type:ce("APP_GET_FARCASTER_URI")})).or(le.extend({type:ce("APP_CONNECT_FARCASTER")})).or(le.extend({type:ce("APP_GET_USER"),payload:v.optional(b9)})).or(le.extend({type:ce("APP_GET_SOCIAL_REDIRECT_URI"),payload:v9})).or(le.extend({type:ce("APP_SIGN_OUT")})).or(le.extend({type:ce("APP_IS_CONNECTED"),payload:v.optional(xb)})).or(le.extend({type:ce("APP_GET_CHAIN_ID")})).or(le.extend({type:ce("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(le.extend({type:ce("APP_INIT_SMART_ACCOUNT")})).or(le.extend({type:ce("APP_SET_PREFERRED_ACCOUNT"),payload:N9})).or(le.extend({type:ce("APP_RPC_REQUEST"),payload:Tb.or(kz).or(z9).or(W9).or(H9).or(q9).or(V9).or(G9).or(K9).or(Y9).or(Q9).or(Z9).or(J9).or(X9).or(ez).or(tz).or(nz).or(rz).or(sz).or(iz).or(oz).or(az).or(cz).or(lz).or(uz).or(dz).or(hz).or(fz).or(pz).or(gz).or(mz).or(wz).or(yz).or(bz).or(vz).or(Ez).or(Tb).or(_z).or(Az).or(Cz).or(Iz).or(Nz).or(Sz).or(xz).or(Tz).or(Oz).or(Dz).or(Rz).and(v.object({chainId:v.string().or(v.number()).optional(),chainNamespace:v.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:v.string().optional()}))})).or(le.extend({type:ce("APP_UPDATE_EMAIL"),payload:E9})).or(le.extend({type:ce("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:_9})).or(le.extend({type:ce("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:A9})).or(le.extend({type:ce("APP_SYNC_THEME"),payload:C9})).or(le.extend({type:ce("APP_SYNC_DAPP_DATA"),payload:I9})).or(le.extend({type:ce("APP_RELOAD")})).or(le.extend({type:ce("APP_RPC_ABORT")})),frameEvent:le.extend({type:ce("FRAME_SWITCH_NETWORK_ERROR"),payload:gt}).or(le.extend({type:ce("FRAME_SWITCH_NETWORK_SUCCESS"),payload:L9})).or(le.extend({type:ce("FRAME_CONNECT_EMAIL_SUCCESS"),payload:S9})).or(le.extend({type:ce("FRAME_CONNECT_EMAIL_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:T9})).or(le.extend({type:ce("FRAME_GET_FARCASTER_URI_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:x9})).or(le.extend({type:ce("FRAME_CONNECT_FARCASTER_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_CONNECT_OTP_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_CONNECT_OTP_SUCCESS")})).or(le.extend({type:ce("FRAME_CONNECT_DEVICE_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_CONNECT_DEVICE_SUCCESS")})).or(le.extend({type:ce("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:O9})).or(le.extend({type:ce("FRAME_CONNECT_SOCIAL_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_GET_USER_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_GET_USER_SUCCESS"),payload:R9})).or(le.extend({type:ce("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:k9})).or(le.extend({type:ce("FRAME_SIGN_OUT_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_SIGN_OUT_SUCCESS")})).or(le.extend({type:ce("FRAME_IS_CONNECTED_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_IS_CONNECTED_SUCCESS"),payload:P9})).or(le.extend({type:ce("FRAME_GET_CHAIN_ID_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_GET_CHAIN_ID_SUCCESS"),payload:M9})).or(le.extend({type:ce("FRAME_RPC_REQUEST_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_RPC_REQUEST_SUCCESS"),payload:F9})).or(le.extend({type:ce("FRAME_SESSION_UPDATE"),payload:xb})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_SUCCESS"),payload:D9})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:U9})).or(le.extend({type:ce("FRAME_SYNC_THEME_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_SYNC_THEME_SUCCESS")})).or(le.extend({type:ce("FRAME_SYNC_DAPP_DATA_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(le.extend({type:ce("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:$9})).or(le.extend({type:ce("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:j9})).or(le.extend({type:ce("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_READY"),payload:B9})).or(le.extend({type:ce("FRAME_RELOAD_ERROR"),payload:gt})).or(le.extend({type:ce("FRAME_RELOAD_SUCCESS")}))};function xf(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Pz({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=H.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(EN);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",AN),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class Mz{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=H.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){var h;if(!xf(he.FRAME_EVENT_KEY,d))return;const f=Tf.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}((h=f.data)==null?void 0:h.id)===a&&(c(f.data),window.removeEventListener("message",u))}Kn.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{Kn.isClient&&window.addEventListener("message",({data:c})=>{if(!xf(he.FRAME_EVENT_KEY,c))return;const l=Tf.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{Kn.isClient&&window.addEventListener("message",({data:c})=>{if(!xf(he.APP_EVENT_KEY,c))return;const l=Tf.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(Kn.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Kn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Kn.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=Pz({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Lz{constructor(e){var i;const n=Ia({level:_N}),{logger:r,chunkLoggerController:s}=Og({opts:n});this.logger=un(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Uz{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Lz(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const l=this.getRpcUrl(n);this.w3mFrame=new Mz({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:l,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Yt.get(he.EMAIL_LOGIN_USED_KEY)}getEmail(){return Yt.get(he.EMAIL)}getUsername(){return Yt.get(he.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:he.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Kn.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:he.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:he.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:he.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:he.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:he.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:he.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:he.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:he.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:he.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:he.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:he.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:he.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:he.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:he.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:he.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:he.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:he.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:he.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:he.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:he.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(yt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:he.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_IS_CONNECTED_ERROR&&e(),n.type===he.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===he.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===he.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:yt.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{yt.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:he.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[he.APP_SYNC_DAPP_DATA,he.APP_SYNC_THEME,he.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[he.APP_CONNECT_EMAIL,he.APP_CONNECT_DEVICE,he.APP_CONNECT_OTP,he.APP_CONNECT_SOCIAL,he.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var h,p,g;const u=Math.random().toString(36).substring(7);(g=(h=this.w3mLogger)==null?void 0:(p=h.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function f(y,b){var C,E,S;y.id===u&&((E=b==null?void 0:(C=b.logger).info)==null||E.call(C,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((S=y.payload)==null?void 0:S.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>f(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Yt.set(he.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Yt.set(he.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Yt.set(he.EMAIL,e),Yt.set(he.EMAIL_LOGIN_USED_KEY,"true"),Yt.delete(he.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Yt.delete(he.EMAIL_LOGIN_USED_KEY),Yt.delete(he.EMAIL),Yt.delete(he.LAST_USED_CHAIN_KEY),Yt.delete(he.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Yt.set(he.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Yt.get(he.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Yt.set(he.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=pn.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}class Dc{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var c;return Dc.instance||(Dc.instance=new Uz({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((c=G.state.remoteFeatures)!=null&&c.emailCapture)})),Dc.instance}}var Ob={};const $z={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof Ob<"u"?Ob.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},dg={filterOutDuplicatesByRDNS(t){const e=G.state.enableEIP6963?X.state.connectors:[],n=Q.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&de.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=X.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Q.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=X.state,{featuredWalletIds:n}=G.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=G.state.features)==null?void 0:c.connectMethodsOrder),r=e||X.state.connectors;if(n)return n;const{injected:s,announced:i}=Qu.getConnectorsByType(r,be.state.recommended,be.state.featured),o=s.filter(Qu.showConnector),a=i.filter(Qu.showConnector);return o.length||a.length?["wallet","email","social"]:$z.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&be.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&be.state.excludedWallets.some(r=>Ln.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},Qu={getConnectorsByType(t,e,n){const{customWallets:r}=G.state,s=Q.getRecentWallets(),i=dg.filterOutDuplicateWallets(e),o=dg.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&be.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&be.state.excludedWallets.some(i=>Ln.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!de.isMobile()||de.isMobile()&&!e&&!ne.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(N.state.chains.values()).some(n=>X.getConnectorId(n.namespace)===H.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=G.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const f=[{type:"walletConnect",isEnabled:G.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),h=new Set(f.map(y=>y.type)),p=c.filter(y=>h.has(y)).map(y=>({type:y,isEnabled:!0})),g=f.filter(({type:y})=>!p.some(({type:C})=>C===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!de.isMobile())return{accounts:[],chainId:void 0};if(t.id===H.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}},kQ={interpolate(t,e,n){if(t.length!==2||e.length!==2)throw new Error("inputRange and outputRange must be an array of length 2");const r=t[0]||0,s=t[1]||0,i=e[0]||0,o=e[1]||0;return n<r?i:n>s?o:(o-i)/(s-r)*(n-r)+i}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zu=globalThis,ym=Zu.ShadowRoot&&(Zu.ShadyCSS===void 0||Zu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,bm=Symbol(),Db=new WeakMap;let c1=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==bm)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ym&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Db.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Db.set(n,e))}return e}toString(){return this.cssText}};const sr=t=>new c1(typeof t=="string"?t:t+"",void 0,bm),ri=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new c1(n,t,bm)},Bz=(t,e)=>{if(ym)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Zu.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},Rb=ym?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return sr(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:jz,defineProperty:Fz,getOwnPropertyDescriptor:zz,getOwnPropertyNames:Wz,getOwnPropertySymbols:Hz,getPrototypeOf:qz}=Object,ai=globalThis,kb=ai.trustedTypes,Vz=kb?kb.emptyScript:"",Of=ai.reactiveElementPolyfillSupport,Rc=(t,e)=>t,hg={toAttribute(t,e){switch(e){case Boolean:t=t?Vz:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},l1=(t,e)=>!jz(t,e),Pb={attribute:!0,type:String,converter:hg,reflect:!1,useDefault:!1,hasChanged:l1};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ai.litPropertyMetadata??(ai.litPropertyMetadata=new WeakMap);let Vo=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Pb){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Fz(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=zz(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Pb}static _$Ei(){if(this.hasOwnProperty(Rc("elementProperties")))return;const e=qz(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Rc("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Rc("properties"))){const n=this.properties,r=[...Wz(n),...Hz(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(Rb(s))}else e!==void 0&&n.push(Rb(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Bz(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:hg).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:hg;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??l1)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Vo.elementStyles=[],Vo.shadowRootOptions={mode:"open"},Vo[Rc("elementProperties")]=new Map,Vo[Rc("finalized")]=new Map,Of==null||Of({ReactiveElement:Vo}),(ai.reactiveElementVersions??(ai.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kc=globalThis,Rd=kc.trustedTypes,Mb=Rd?Rd.createPolicy("lit-html",{createHTML:t=>t}):void 0,u1="$lit$",si=`lit$${Math.random().toFixed(9).slice(2)}$`,d1="?"+si,Gz=`<${d1}>`,co=document,Tl=()=>co.createComment(""),xl=t=>t===null||typeof t!="object"&&typeof t!="function",vm=Array.isArray,Kz=t=>vm(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Df=`[ 	
\f\r]`,oc=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Lb=/-->/g,Ub=/>/g,Ii=RegExp(`>|${Df}(?:([^\\s"'>=/]+)(${Df}*=${Df}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),$b=/'/g,Bb=/"/g,h1=/^(?:script|style|textarea|title)$/i,f1=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),LQ=f1(1),UQ=f1(2),ma=Symbol.for("lit-noChange"),jt=Symbol.for("lit-nothing"),jb=new WeakMap,Hi=co.createTreeWalker(co,129);function p1(t,e){if(!vm(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Mb!==void 0?Mb.createHTML(e):e}const Yz=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=oc;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===oc?u[1]==="!--"?o=Lb:u[1]!==void 0?o=Ub:u[2]!==void 0?(h1.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Ii):u[3]!==void 0&&(o=Ii):o===Ii?u[0]===">"?(o=s??oc,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Ii:u[3]==='"'?Bb:$b):o===Bb||o===$b?o=Ii:o===Lb||o===Ub?o=oc:(o=Ii,s=void 0);const h=o===Ii&&t[a+1].startsWith("/>")?" ":"";i+=o===oc?c+Gz:d>=0?(r.push(l),c.slice(0,d)+u1+c.slice(d)+si+h):c+si+(d===-2?a:h)}return[p1(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let fg=class g1{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Yz(e,n);if(this.el=g1.createElement(l,r),Hi.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Hi.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(u1)){const f=u[o++],h=s.getAttribute(d).split(si),p=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:p[2],strings:h,ctor:p[1]==="."?Zz:p[1]==="?"?Jz:p[1]==="@"?Xz:hh}),s.removeAttribute(d)}else d.startsWith(si)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(h1.test(s.tagName)){const d=s.textContent.split(si),f=d.length-1;if(f>0){s.textContent=Rd?Rd.emptyScript:"";for(let h=0;h<f;h++)s.append(d[h],Tl()),Hi.nextNode(),c.push({type:2,index:++i});s.append(d[f],Tl())}}}else if(s.nodeType===8)if(s.data===d1)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(si,d+1))!==-1;)c.push({type:7,index:i}),d+=si.length-1}i++}}static createElement(e,n){const r=co.createElement("template");return r.innerHTML=e,r}};function wa(t,e,n=t,r){var o,a;if(e===ma)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=xl(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=wa(t,s._$AS(t,e.values),s,r)),e}let Qz=class{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??co).importNode(n,!0);Hi.currentNode=s;let i=Hi.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Kl(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new eW(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Hi.nextNode(),o++)}return Hi.currentNode=co,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}};class Kl{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=jt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=wa(this,e,n),xl(e)?e===jt||e==null||e===""?(this._$AH!==jt&&this._$AR(),this._$AH=jt):e!==this._$AH&&e!==ma&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Kz(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==jt&&xl(this._$AH)?this._$AA.nextSibling.data=e:this.T(co.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=fg.createElement(p1(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Qz(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=jb.get(e.strings);return n===void 0&&jb.set(e.strings,n=new fg(e)),n}k(e){vm(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Kl(this.O(Tl()),this.O(Tl()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}let hh=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=jt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=jt}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=wa(this,e,n,0),o=!xl(e)||e!==this._$AH&&e!==ma,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=wa(this,a[r+c],n,c),l===ma&&(l=this._$AH[c]),o||(o=!xl(l)||l!==this._$AH[c]),l===jt?e=jt:e!==jt&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===jt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Zz=class extends hh{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===jt?void 0:e}},Jz=class extends hh{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==jt)}},Xz=class extends hh{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=wa(this,e,n,0)??jt)===ma)return;const r=this._$AH,s=e===jt&&r!==jt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==jt&&(r===jt||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}},eW=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){wa(this,e)}};const Rf=kc.litHtmlPolyfillSupport;Rf==null||Rf(fg,Kl),(kc.litHtmlVersions??(kc.litHtmlVersions=[])).push("3.3.1");const tW=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Kl(e.insertBefore(Tl(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zi=globalThis;let Ju=class extends Vo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=tW(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ma}};var qv;Ju._$litElement$=!0,Ju.finalized=!0,(qv=Zi.litElementHydrateSupport)==null||qv.call(Zi,{LitElement:Ju});const kf=Zi.litElementPolyfillSupport;kf==null||kf({LitElement:Ju});(Zi.litElementVersions??(Zi.litElementVersions=[])).push("4.2.1");let Pc,ci,li;function qQ(t,e){Pc=document.createElement("style"),ci=document.createElement("style"),li=document.createElement("style"),Pc.textContent=ra(t).core.cssText,ci.textContent=ra(t).dark.cssText,li.textContent=ra(t).light.cssText,document.head.appendChild(Pc),document.head.appendChild(ci),document.head.appendChild(li),m1(e)}function m1(t){ci&&li&&(t==="light"?(ci.removeAttribute("media"),li.media="enabled"):(li.removeAttribute("media"),ci.media="enabled"))}function nW(t){Pc&&ci&&li&&(Pc.textContent=ra(t).core.cssText,ci.textContent=ra(t).dark.cssText,li.textContent=ra(t).light.cssText)}function ra(t){return{core:ri`
      ${t!=null&&t["--w3m-font-family"]?ri``:ri`
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
          `}
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${sr(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${sr((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${sr((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${sr((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${sr((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:ri`
      :root {
        --w3m-color-mix: ${sr((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${sr(vs(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${sr(vs(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:ri`
      :root {
        --w3m-color-mix: ${sr((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${sr(vs(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${sr(vs(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const VQ=ri`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,GQ=ri`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,KQ=ri`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Fb={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--wui-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--wui-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:n,truncate:r}){return t.length<=e+n?t:r==="end"?`${t.substring(0,e)}...`:r==="start"?`...${t.substring(t.length-n)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(n))}`},generateAvatarColors(t){const n=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(n),s=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(s==null?void 0:s.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let l=0;l<5;l+=1){const u=this.tintColor(r,.15*l);c.push(`rgb(${u[0]}, ${u[1]}, ${u[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),n=e>>16&255,r=e>>8&255,s=e&255;return[n,r,s]},tintColor(t,e){const[n,r,s]=t,i=Math.round(n+(255-n)*e),o=Math.round(r+(255-r)*e),a=Math.round(s+(255-s)*e);return[i,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){var e;return t||(typeof window<"u"&&window.matchMedia&&typeof window.matchMedia=="function"?(e=window.matchMedia("(prefers-color-scheme: dark)"))!=null&&e.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,n){return t.toString().length>=e?Number(t).toFixed(n):t}},rW=3,sW=["receive","deposit","borrow","claim"],iW=["withdraw","repay","burn"],zb={getTransactionGroupTitle(t,e){const n=Xm.getYear(),r=Xm.getMonthNameByIndex(e);return t===n?r:`${r} ${t}`},getTransactionImages(t){const[e,n]=t,r=!!e&&(t==null?void 0:t.every(o=>!!o.nft_info)),s=(t==null?void 0:t.length)>1;return(t==null?void 0:t.length)===2&&!r?[this.getTransactionImage(n),this.getTransactionImage(e)]:s?t.map(o=>this.getTransactionImage(o)):[this.getTransactionImage(e)]},getTransactionImage(t){return{type:zb.getTransactionTransferTokenType(t),url:zb.getTransactionImageURL(t)}},getTransactionImageURL(t){var s,i,o,a,c;let e;const n=!!(t!=null&&t.nft_info),r=!!(t!=null&&t.fungible_info);return t&&n?e=(o=(i=(s=t==null?void 0:t.nft_info)==null?void 0:s.content)==null?void 0:i.preview)==null?void 0:o.url:t&&r&&(e=(c=(a=t==null?void 0:t.fungible_info)==null?void 0:a.icon)==null?void 0:c.url),e},getTransactionTransferTokenType(t){if(t!=null&&t.fungible_info)return"FUNGIBLE";if(t!=null&&t.nft_info)return"NFT"},getTransactionDescriptions(t){var d,f,h;const e=(d=t==null?void 0:t.metadata)==null?void 0:d.operationType,n=t==null?void 0:t.transfers,r=((f=t==null?void 0:t.transfers)==null?void 0:f.length)>0,s=((h=t==null?void 0:t.transfers)==null?void 0:h.length)>1,i=r&&(n==null?void 0:n.every(p=>!!(p!=null&&p.fungible_info))),[o,a]=n;let c=this.getTransferDescription(o),l=this.getTransferDescription(a);if(!r)return(e==="send"||e==="receive")&&i?(c=Fb.getTruncateString({string:t==null?void 0:t.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),l=Fb.getTruncateString({string:t==null?void 0:t.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[c,l]):[t.metadata.status];if(s)return n.map(p=>this.getTransferDescription(p)).reverse();let u="";return sW.includes(e)?u="+":iW.includes(e)&&(u="-"),c=u.concat(c),[c]},getTransferDescription(t){var n;let e="";return t&&(t!=null&&t.nft_info?e=((n=t==null?void 0:t.nft_info)==null?void 0:n.name)||"-":t!=null&&t.fungible_info&&(e=this.getFungibleTransferDescription(t)||"-")),e},getFungibleTransferDescription(t){var r;return t?[this.getQuantityFixedValue(t==null?void 0:t.quantity.numeric),(r=t==null?void 0:t.fungible_info)==null?void 0:r.symbol].join(" ").trim():null},getQuantityFixedValue(t){return t?parseFloat(t).toFixed(rW):null}};function oW(t,e){const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(s){customElements.get(t)||customElements.define(t,s)}}}function aW(t,e){return customElements.get(t)||customElements.define(t,e),e}function YQ(t){return function(n){return typeof n=="function"?aW(t,n):oW(t,n)}}function cW(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Wb(t){return cW(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const w1="2.40.3";let ac={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${w1}`};class ya extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ya?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ya&&n.cause.docsPath||n.docsPath,i=(a=ac.getDocsUrl)==null?void 0:a.call(ac,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ac.version?[`Version: ${ac.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=w1}walk(e){return y1(this,e)}}function y1(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?y1(t.cause,e):e?null:t}class b1 extends ya{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Em(t,{dir:e,size:n=32}={}){return typeof t=="string"?lW(t,{dir:e,size:n}):uW(t,{dir:e,size:n})}function lW(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new b1({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function uW(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new b1({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class dW extends ya{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class hW extends ya{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function v1(t,{size:e}){if(Wb(t)>e)throw new hW({givenSize:Wb(t),maxSize:e})}const fW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hb(t,e={}){return typeof t=="number"||typeof t=="bigint"?gW(t,e):typeof t=="string"?wW(t,e):typeof t=="boolean"?pW(t,e):E1(t,e)}function pW(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(v1(n,{size:e.size}),Em(n,{size:e.size})):n}function E1(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=fW[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(v1(r,{size:e.size}),Em(r,{dir:"right",size:e.size})):r}function gW(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new dW({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Em(a,{size:r}):a}const mW=new TextEncoder;function wW(t,e={}){const n=mW.encode(t);return E1(n,e)}const Xu={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([Xu.getAddresses(t),Xu.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:Xu.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Yc.NetworkImageIds[e.id]]}]})}},Fo={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function yi(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const qb=yi({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Vb=yi({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});yi({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});yi({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});yi({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const yW={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ui={getMethodsByChainNamespace(t){return yW[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case qb.caipNetworkId:u.chains.push(qb.deprecatedCaipNetworkId);break;case Vb.caipNetworkId:u.chains.push(Vb.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await vc.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=ui.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{var c,l,u,d,f;try{const h=((u=(l=(c=t.session)==null?void 0:c.namespaces)==null?void 0:l[e])==null?void 0:u.accounts)||[],p=(f=(d=t.rpcProviders)==null?void 0:d[e])==null?void 0:f.getDefaultChain(),g=a.map(y=>{const b=h.find(S=>S.includes(`${e}:${p}:${y}`));if(!b)return;const{chainId:C,chainNamespace:E}=pn.parseCaipAddress(b);return{address:y,chainId:C,chainNamespace:E}}).filter(y=>y!==void 0);g.length>0&&s(g)}catch(h){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,h)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>pn.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class bW{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case H.CHAIN.EVM:await this.syncEVMConnections(e);break;case H.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case H.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===H.CONNECTOR_ID.WALLET_CONNECT){const c=ui.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,f;return u.chainNamespace===this.namespace&&u.id.toString()===((f=(d=c[0])==null?void 0:d.chainId)==null?void 0:f.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await Qu.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==H.CONNECTOR_ID.AUTH&&a.id!==H.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===H.CONNECTOR_ID.WALLET_CONNECT){const c=ui.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var f,h,p,g,y,b;if(a.id===H.CONNECTOR_ID.WALLET_CONNECT){const C=ui.getWalletConnectAccounts(r,this.namespace);C.length>0&&i({connectorId:a.id,accounts:C.map(E=>({address:E.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(C=>de.createAccount(H.CHAIN.BITCOIN,C.address,C.purpose||"payment",C.publicKey,C.path));if(u&&u.length>1&&(u=[{namespace:H.CHAIN.BITCOIN,publicKey:((f=u[Fo.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.publicKey)??"",path:((h=u[Fo.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.path)??"",address:((p=u[Fo.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:H.CHAIN.BITCOIN,publicKey:((g=u[Fo.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[Fo.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((b=u[Fo.ACCOUNT_INDEXES.ORDINAL])==null?void 0:b.address)??"",type:"ordinal"}]),!(a.chains.find(C=>C.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(C=>({address:C.address,type:C.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Ln.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Ln.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Ln.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Ln.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Ln.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const wc={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class _1{constructor({provider:e,namespace:n}){this.id=H.CONNECTOR_ID.WALLET_CONNECT,this.name=Yc.ConnectorNamesMap[H.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Yc.ConnectorImageIds[H.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=N.getCaipNetworks.bind(N),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=G.state.universalProviderConfigOverride,s=ui.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return ur.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:vW})}}const vW=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],EW=[H.CONNECTOR_ID.AUTH,H.CONNECTOR_ID.WALLET_CONNECT];class _W{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>N.getCaipNetworks(n),this.getConnectorId=n=>X.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new bW({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:H.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:H.CONNECTOR_ID.AUTH,type:"AUTH",name:H.CONNECTOR_NAMES.AUTH,provider:e,imageId:Yc.ConnectorImageIds[H.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Ln.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){oe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Bn(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof _1);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=de.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=de.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=de.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Ln.isLowerCaseMatch(this.getConnectorId(H.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=de.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Ln.isLowerCaseMatch(this.getConnectorId(H.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?Xu.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Ln.isLowerCaseMatch(this.getConnectorId(H.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(EW.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class AW extends _W{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new _1({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>de.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&$e.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(oe.state.balanceLoading&&e.chainId===((c=N.state.activeCaipNetwork)==null?void 0:c.id))return{balance:oe.state.balance||"0.00",symbol:oe.state.balanceSymbol||""};const s=(await oe.fetchTokenBalance()).find(u=>{var d,f;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=N.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===H.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Oa.encode(new TextEncoder().encode(r)),pubkey:s}},(a=N.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=N.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===H.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Hb(n.id)}]}))}catch(u){if(u.code===wc.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===wc.ERROR_INVALID_CHAIN_ID||u.code===wc.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===wc.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Hb(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const CW=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],Nu={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?$e.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?$e.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?$e.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$e.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>$e.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>$e.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>$e.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?$e.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},IW={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Nu[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Nu[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Nu[t].processApi(e)},processFallbackFeature(t,e){return Nu[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await be.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$e.DEFAULT_REMOTE_FEATURES:$e.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of CW){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$e.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ct.open({debugMessage:cn.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class NW{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=N.getCaipNetworks(n))==null?void 0:s.find(u=>u.id===r);if(a)return a;const c=(i=N.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=N.getRequestedCaipNetworks(n).filter(u=>u.chainNamespace===n))==null?void 0:o[0])}return N.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>N.getCaipNetworks(n),this.getActiveChainNamespace=()=>N.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{N.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>N.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return N.state.activeChain===n||!n?N.state.activeCaipAddress:(s=(r=N.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{we.setClientId(n)},this.getProvider=n=>it.getProvider(n),this.getProviderType=n=>it.getProviderId(n),this.getPreferredAccountType=n=>Bn(n),this.setCaipAddress=(n,r)=>{oe.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{oe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{oe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{oe.setProfileImage(n,r)},this.setUser=(n,r)=>{oe.setUser(n,r)},this.resetAccount=n=>{oe.resetAccount(n)},this.setCaipNetwork=n=>{N.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{N.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{oe.setStatus(n,r),X.isConnected()?Q.setConnectionStatus("connected"):Q.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r,s;return(s=(r=N.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setConnectors=n=>{const r=[...X.state.allConnectors,...n];X.setConnectors(r)},this.setConnections=(n,r)=>{Q.setConnections(n,r),ne.setConnections(n,r)},this.fetchIdentity=n=>we.fetchIdentity(n),this.getReownName=n=>vc.getNamesForAddress(n),this.getConnectors=()=>X.getConnectors(),this.getConnectorImage=n=>hE.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?id.getConnectionsData(n).connections:(Ct.open(H.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?id.getConnectionsData(n).recentConnections:(Ct.open(H.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){Ct.open(H.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ne.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){Ct.open(H.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}Q.deleteAddressFromConnection(n),ne.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=it.getProviderId(r),i=n?{...n,type:s}:void 0;oe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!N.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{oe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{oe.removeAddressLabel(n,r)},this.getAddress=n=>{var r,s;return N.state.activeChain===n||!n?oe.state.address:(s=(r=N.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setApprovedCaipNetworksData=n=>N.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{N.resetNetwork(n)},this.addConnector=n=>{X.addConnector(n)},this.resetWcConnection=()=>{ne.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{oe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{oe.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{N.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{G.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s,i,o;if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),G.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await IW.fetchRemoteFeatures(e),G.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&ip.setOnrampProviders(this.remoteFeatures.onramp),((n=G.state.remoteFeatures)!=null&&n.email||Array.isArray((r=G.state.remoteFeatures)==null?void 0:r.socials)&&((s=G.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins(),(i=G.state.features)!=null&&i.reownAuthentication||(o=G.state.remoteFeatures)!=null&&o.reownAuthentication){const{ReownAuthentication:a}=await hn(async()=>{const{ReownAuthentication:l}=await import("./features.DxhJ0e1F.js");return{ReownAuthentication:l}},__vite__mapDeps([0,1])),c=G.state.siwx;c instanceof a||(c&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),G.setSIWX(new a))}}async checkAllowedOrigins(){try{const e=await be.fetchAllowedOrigins();if(!e||!de.isClient()){Ct.open(cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;ui.isOriginAllowed(n,e,wc.DEFAULT_ALLOWED_ANCESTORS)||Ct.open(cn.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Ct.open(cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Ct.open(cn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Ct.open({displayMessage:cn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:cn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}default:Ct.open(cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Ue.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&On.setThemeMode(e.themeMode),e.themeVariables&&On.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");N.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&N.setActiveCaipNetwork(n)}initializeConnectionController(e){ne.initialize(e.adapters??[]),ne.setWcBasic(e.basic??!1)}initializeConnectorController(){X.initialize(this.chainNamespaces)}initializeProjectSettings(e){G.setProjectId(e.projectId),G.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;G.setDebug(e.debug!==!1),G.setEnableWalletConnect(e.enableWalletConnect!==!1),G.setEnableWalletGuide(e.enableWalletGuide!==!1),G.setEnableWallets(e.enableWallets!==!1),G.setEIP6963Enabled(e.enableEIP6963!==!1),G.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),G.setEnableReconnect(e.enableReconnect!==!1),G.setEnableAuthLogger(e.enableAuthLogger!==!1),G.setCustomRpcUrls(e.customRpcUrls),G.setEnableEmbedded(e.enableEmbedded),G.setAllWallets(e.allWallets),G.setIncludeWalletIds(e.includeWalletIds),G.setExcludeWalletIds(e.excludeWalletIds),G.setFeaturedWalletIds(e.featuredWalletIds),G.setTokens(e.tokens),G.setTermsConditionsUrl(e.termsConditionsUrl),G.setPrivacyPolicyUrl(e.privacyPolicyUrl),G.setCustomWallets(e.customWallets),G.setFeatures(e.features),G.setAllowUnsupportedChain(e.allowUnsupportedChain),G.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),G.setPreferUniversalLinks(e.experimental_preferUniversalLinks),G.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),G.setMetadata(e.metadata),G.setDisableAppend(e.disableAppend),G.setEnableEmbedded(e.enableEmbedded),G.setSIWX(e.siwx),!e.projectId){Ct.open(cn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===H.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");G.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return de.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ho.getUnsupportedNetwork(`${n}:${e}`);N.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ho.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ho.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ho.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ho.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=N.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!G.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=N.state.activeChain,n=this.getAdapter(e),r=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=ne.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),Q.setConnectedNamespaces([...N.state.chains.keys()]),await this.syncWalletConnectAccount(),await ur.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{var p,g,y,b,C,E;const l=N.state.activeChain,u=o||l,d=this.getAdapter(u);if(o&&o!==l&&!a){const S=this.getCaipNetworks().find(O=>O.chainNamespace===o);S&&this.setCaipNetwork(S)}if(!u)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const f=this.getCaipNetwork(u),h=await d.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:c,chainId:(a==null?void 0:a.id)||(f==null?void 0:f.id),rpcUrl:((y=(g=(p=a==null?void 0:a.rpcUrls)==null?void 0:p.default)==null?void 0:g.http)==null?void 0:y[0])||((E=(C=(b=f==null?void 0:f.rpcUrls)==null?void 0:b.default)==null?void 0:C.http)==null?void 0:E[0])});if(h)return Q.addConnectedNamespace(u),this.syncProvider({...h,chainNamespace:u}),this.setStatus("connected",u),this.syncConnectedWalletInfo(u),Q.removeDisconnectedConnectorId(e,u),{address:h.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=N.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Q.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var l;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||N.state.activeChain,o=X.getConnectorId(i),a=n===H.CONNECTOR_ID.AUTH||o===H.CONNECTOR_ID.AUTH,c=n===H.CONNECTOR_ID.WALLET_CONNECT||o===H.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(N.state.chains.keys());let d=r?[r]:u;(c||a)&&(d=u);const f=d.map(async g=>{const y=X.getConnectorId(g),b=await this.disconnectNamespace(g,n||y);b&&(a&&Q.deleteConnectedSocialProvider(),b.connections.forEach(C=>{Q.addDisconnectedConnectorId(C.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),h=await Promise.allSettled(f);Qe.resetSend(),ne.resetWcConnection(),(l=ur.getSIWX())!=null&&l.signOutOnDisconnect&&await ur.clearSessions(),X.setFilterByNamespace(void 0),ne.syncStorageConnections();const p=h.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Ue.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=N.state.activeChain,r=this.getAdapter(N.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:oe.state.address,provider:it.getProvider(n)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if($e.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=it.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===H.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=it.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=N.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:oe.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id),chainNamespace:e}),oe.state.profileImage||!1},getEnsAddress:async e=>await ui.resolveReownName(e),writeContract:async e=>{const n=N.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=it.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(N.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(N.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(N.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(N.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(N.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(N.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!oe.state.address||this.updateNativeBalance(oe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ne.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(it.getProviderId(N.state.activeChain)===Gn.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=it.getProvider(n),i=it.getProviderId(n);if(e.chainNamespace===N.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Gn.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=pn.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new AW({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Q.getConnectionStatus();G.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Q.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=N.state.activeChain===e,c=(u=(l=N.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(ne.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=oe.state.address,i=N.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var c,l;const a=N.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&((c=N.state.activeCaipNetwork)!=null&&c.id)?this.syncAccount({address:s,chainId:(l=N.state.activeCaipNetwork)==null?void 0:l.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),Q.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ne.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){var n,r,s,i;await this.syncWalletConnectAccount();const e=this.getAddress();Ue.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:de.isMobile()?"mobile":"qrcode",name:((i=(s=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.peer)==null?void 0:s.metadata)==null?void 0:i.name)||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===H.CHAIN.EVM&&de.isSafeApp()&&X.setConnectorId(H.CONNECTOR_ID.SAFE,e);const n=X.getConnectorId(e);switch(this.setStatus("connecting",e),n){case H.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case H.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};N.resetAccount(n),N.resetNetwork(n),Q.removeConnectedNamespace(n);const s=Array.from(N.state.chains.keys());(n?[n]:s).forEach(o=>Q.addDisconnectedConnectorId(X.getConnectorId(o)||"",o)),X.removeConnectorId(n),it.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&Le.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(i){const a=Q.getConnections()[e]??[];return{hasDisconnected:Q.isConnectorDisconnected(i,e),hasConnected:a.some(c=>Ln.isLowerCaseMatch(c.connectorId,i))}}})}))}async syncAdapterConnection(e){var a,c,l,u;const n=this.getAdapter(e),r=X.getConnectorId(e),s=this.getCaipNetwork(e),o=X.getConnectors(e).find(d=>d.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const d=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));d?(this.syncProvider({...d,chainNamespace:e}),await this.syncAccount({...d,chainNamespace:e}),this.setStatus("connected",e),Ue.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:d.address,properties:{method:"browser",name:((u=o.info)==null?void 0:u.name)||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,f,h,p;const o=this.getAdapter(i);if(!o)return;const a=((h=(f=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:f[i])==null?void 0:h.accounts)||[],c=(p=N.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=pn.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=pn.validateCaipAddress(l),{chainId:y,address:b}=pn.parseCaipAddress(g);if(it.setProviderId(i,Gn.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&N.state.activeCaipNetwork&&o.namespace!==H.CHAIN.EVM){const C=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:N.state.activeCaipNetwork});it.setProvider(i,C)}else it.setProvider(i,this.universalProvider);X.setConnectorId(H.CONNECTOR_ID.WALLET_CONNECT,i),Q.addConnectedNamespace(i),await this.syncAccount({address:b,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await N.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){it.setProviderId(s,e),it.setProvider(s,n),X.setConnectorId(r,s)}async syncAccount(e){var d,f;const n=e.chainNamespace===N.state.activeChain,r=N.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Q.getActiveNetworkProps(),c=i||a,l=((d=N.state.activeCaipNetwork)==null?void 0:d.name)===H.UNSUPPORTED_NETWORK_NAME,u=N.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!h&&!p){const y=this.getApprovedCaipNetworkIds()||[],b=y.find(E=>{var S;return((S=pn.parseCaipNetworkId(E))==null?void 0:S.chainId)===c.toString()}),C=y.find(E=>{var S;return((S=pn.parseCaipNetworkId(E))==null?void 0:S.chainNamespace)===o});h=this.getCaipNetworks().find(E=>E.caipNetworkId===b),p=this.getCaipNetworks().find(E=>E.caipNetworkId===C||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===C)}const g=h||p;(g==null?void 0:g.chainNamespace)===N.state.activeChain?G.state.enableNetworkSwitch&&!G.state.allowUnsupportedChain&&((f=N.state.activeCaipNetwork)==null?void 0:f.name)===H.UNSUPPORTED_NETWORK_NAME?N.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Ln.isLowerCaseMatch(s,oe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=X.getConnectorId(e),r=it.getProviderId(e);if(r===Gn.CONNECTOR_TYPE_ANNOUNCED||r===Gn.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,f;const c=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(f=a.connectors)==null?void 0:f.some(h=>{var p;return h.id===n||((p=h.info)==null?void 0:p.rdns)===n});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(r===Gn.CONNECTOR_TYPE_WALLET_CONNECT){const i=it.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===H.CONNECTOR_ID.COINBASE_SDK||n===H.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!aE.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=N.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,f;const e=Wj.createLogger((h,...p)=>{h&&this.handleAlertError(h),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};G.setManualWCControl(!!((f=this.options)!=null&&f.manualWCControl)),this.universalProvider=this.options.universalProvider??await VC.init(n),G.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{ui.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{ne.setUri(n)},onConnect:n=>{const{address:r}=de.getAccount(n[0]);ne.finalizeWcConnection(r)},onDisconnect:()=>{N.state.noAdapters&&this.resetAccount(e),ne.resetWcConnection()},onChainChanged:n=>{const r=N.state.activeChain,s=r&&X.state.activeConnectorIds[r]===H.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(N.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=N.state.activeChain,s=r&&X.state.activeConnectorIds[r]===H.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(N.state.noAdapters||s)){const i=n==null?void 0:n[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&de.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ue.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(cn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=cn.ALERT_ERRORS[o];a&&(Ct.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ne.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Le.open({...e,data:{swap:e.arguments}})}return Le.open(e)}async close(){await this.injectModalUi(),Le.close()}setLoading(e,n){Le.setLoading(e,n)}async disconnect(e){await ne.disconnect({namespace:e})}getSIWX(){return G.state.siwx}getError(){return""}getChainId(){var e;return(e=N.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ct.open(cn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await N.switchActiveNetwork(n)}getWalletProvider(){return N.state.activeChain?it.state.providers[N.state.activeChain]:null}getWalletProviderType(){return it.getProviderId(N.state.activeChain)}subscribeProviders(e){return it.subscribeProviders(e)}getThemeMode(){return On.state.themeMode}getThemeVariables(){return On.state.themeVariables}setThemeMode(e){On.setThemeMode(e),m1(On.state.themeMode)}setTermsConditionsUrl(e){G.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){G.setPrivacyPolicyUrl(e)}setThemeVariables(e){On.setThemeVariables(e),nW(On.state.themeVariables)}subscribeTheme(e){return On.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ne.subscribe(e):(Ct.open(H.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var n,r;return e?(r=(n=N.state.chains.get(e))==null?void 0:n.accountState)==null?void 0:r.connectedWalletInfo:oe.state.connectedWalletInfo}getAccount(e){const n=e||N.state.activeChain,r=X.getAuthConnector(n),s=N.getAccountData(n),i=Q.getConnectedConnectorId(N.state.activeChain),o=ne.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>de.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:de.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===H.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:Q.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Bn(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?N.subscribeChainProp("accountState",r,n):N.subscribe(r),X.subscribe(r)}subscribeNetwork(e){return N.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?oe.subscribeKey("connectedWalletInfo",e,n):oe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){oe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){N.subscribeKey("activeCaipNetwork",e)}getState(){return Ir.state}getRemoteFeatures(){return G.state.remoteFeatures}subscribeState(e){return Ir.subscribe(e)}subscribeRemoteFeatures(e){return G.subscribeKey("remoteFeatures",e)}showErrorMessage(e){ft.showError(e)}showSuccessMessage(e){ft.showSuccess(e)}getEvent(){return{...Ue.state}}subscribeEvents(e){return Ue.subscribe(e)}replace(e){fe.replace(e)}redirect(e){fe.push(e)}popTransactionStack(e){fe.popTransactionStack(e)}isOpen(){return Le.state.open}isTransactionStackEmpty(){return fe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){G.setFeatures(e)}updateRemoteFeatures(e){G.setRemoteFeatures(e)}updateOptions(e){const r={...G.state||{},...e};G.setOptions(r)}setConnectMethodsOrder(e){G.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){G.setWalletFeaturesOrder(e)}setCollapseWallets(e){G.setCollapseWallets(e)}setSocialsOrder(e){G.setSocialsOrder(e)}getConnectMethodsOrder(){return dg.getConnectOrderMethod(G.state.features,X.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||N.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&N.removeNetwork(e,n)}}let Gb=!1;class SW extends NW{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await ur.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=N.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===H.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=G.state.defaultAccountTypes[n],i=Bn(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...oe.state.user||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Kn.checkIfRequestExists(n)?Kn.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(yt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(yt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Kn.checkIfRequestIsSafe(r),i=oe.state.address,o=N.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=N.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");X.getConnectorId(n)===H.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=N.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=On.getSnapshot(),r=G.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:vs(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){var l,u,d,f,h,p,g,y;const r=H.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===N.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((l=oe.state)==null?void 0:l.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const b=await e.getSmartAccountEnabledNetworks();if(N.setSmartAccountEnabledNetworks((b==null?void 0:b.smartAccountEnabledNetworks)||[],n),c&&((u=this.connectionControllerClient)!=null&&u.connectExternal)){await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:H.CONNECTOR_ID.AUTH,info:{name:H.CONNECTOR_ID.AUTH},type:Gn.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=N.state.activeCaipNetwork)==null?void 0:d.id,chain:n})),this.setStatus("connected",n);const C=Q.getConnectedSocialProvider();C?Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:oe.state.address,properties:{provider:C,reconnect:!0}}):Ue.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:oe.state.address,properties:{method:"email",name:((y=(g=(p=(h=this.universalProvider)==null?void 0:h.session)==null?void 0:p.peer)==null?void 0:g.metadata)==null?void 0:y.name)||"Unknown",reconnect:!0}})}else X.getConnectorId(n)===H.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Q.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!de.isTelegram())return;const r=Q.getTelegramSocialProvider();if(!r||!de.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;oe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=X.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ne.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Q.setConnectedSocialProvider(r),Q.removeTelegramSocialProvider(),Ue.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,f;if(!H.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Ln.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Dc.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(f=this.getCaipNetwork(a))==null?void 0:f.caipNetworkId,abortController:cn.EmbeddedWalletAbortController,onTimeout:h=>{h==="iframe_load_failed"?Ct.open(cn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):h==="iframe_request_timeout"?Ct.open(cn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):h==="unverified_domain"&&Ct.open(cn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:h=>dc(h),getCaipNetworks:h=>N.getCaipNetworks(h)}),Ir.subscribeOpen(h=>{var p;!h&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===N.state.activeChain&&G.state.enableReconnect;G.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&be.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=N.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=it.getProvider(r),u=it.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=it.getProviderId(n)===Gn.CONNECTOR_TYPE_AUTH,u=it.getProviderId(r),d=u===Gn.CONNECTOR_TYPE_AUTH,f=H.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&u===void 0||d)&&f)try{if(N.state.activeChain=e.chainNamespace,s){const h=this.getAdapter(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:H.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Gn.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else if(u===Gn.CONNECTOR_TYPE_WALLET_CONNECT){if(!N.state.noAdapters){const h=this.getAdapter(r),p=it.getProvider(r),g=it.getProviderId(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:p,providerType:g}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ir.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=X.getConnectorId(r)===H.CONNECTOR_ID.AUTH;try{const{name:c,avatar:l}=await this.fetchIdentity({address:e});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(l,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=it.getProviderId(e);if(n===Gn.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Q.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(de.isClient()&&!Gb)try{const e={...$e.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),de.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!G.state.disableAppend&&!G.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}Gb=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!de.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(hn(()=>import("./embedded-wallet.CpHe6kS-.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,1]))),n.email&&r.push(hn(()=>import("./email.B49-IXQe.js"),__vite__mapDeps([15,16,3,14,8,13,5,7,12,17,9,1]))),n.socials&&r.push(hn(()=>import("./socials.BQd_FBL3.js"),__vite__mapDeps([18,3,19,7,5,20,21,13,22,12,8,14,23,6,24,1]))),n.swaps&&n.swaps.length>0&&r.push(hn(()=>import("./swaps.Bv88dV82.js"),__vite__mapDeps([25,3,12,8,5,26,27,24,28,6,13,9,7,1]))),e.send&&r.push(hn(()=>import("./send.ClRjJDht.js"),__vite__mapDeps([29,3,12,8,13,5,7,20,14,28,6,24,9,30,31,1]))),e.receive&&r.push(hn(()=>import("./receive.B8_5WS30.js"),__vite__mapDeps([32,3,33,5,6,23,1]))),n.onramp&&n.onramp.length>0&&r.push(hn(()=>import("./onramp.Bsgct7Ao.js"),__vite__mapDeps([34,3,35,5,6,8,13,19,7,20,36,14,12,22,9,1]))),n.payWithExchange&&r.push(hn(()=>import("./pay-with-exchange.C27Ym_Tv.js"),__vite__mapDeps([37,3,12,8,10,5,6,35,13,24,1]))),n.activity&&r.push(hn(()=>import("./transactions.Cintf43b.js"),__vite__mapDeps([38,3,39,13,5,14,6,24,1]))),(e.pay||n.payments)&&r.push(hn(()=>import("./index.B4AUE3nC.js"),__vite__mapDeps([40,3,12,8,5,41,6,13,10,35,31,22,1]))),n.emailCapture&&r.push(hn(()=>import("./data-capture.CTto1Q7A.js"),__vite__mapDeps([42,3,16,14,8,0,1]))),await Promise.all([...r,hn(()=>import("./index.1nQBZETm.js"),__vite__mapDeps([43,3,6,8,30,5,13,44,10,35,12,11,41,4,39,14,24,26,27,31,7,9,17,19,20,21,22,33,23,36,1])),hn(()=>import("./w3m-modal.DXrq2D2l.js"),__vite__mapDeps([45,3,5,10,6,13,11,8,27,44,1]))])}}const TW="1.7.20";function xW(t){return new SW({...t,sdkVersion:de.generateSdkVersion(t.adapters??[],"html",TW)})}class Li extends Error{constructor(e="WalletConnect client is not initialized. Please call connect() first."){super(e),this.name="ClientNotInitializedError",Object.setPrototypeOf(this,Li.prototype)}}var pg;(function(t){t.Mainnet="tron:0x2b6653dc",t.Shasta="tron:0x94a9059e",t.Nile="tron:0xcd8690dc"})(pg||(pg={}));const OW=yi({id:"0x2b6653dc",caipNetworkId:"tron:0x2b6653dc",chainNamespace:"tron",name:"Tron Mainnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:["https://api.trongrid.io/jsonrpc"],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://tronscan.org/"}},contracts:{}}),DW=yi({id:"0xcd8690dc",caipNetworkId:"tron:0xcd8690dc",chainNamespace:"tron",name:"Tron Nile Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://nile.tronscan.org/"}},contracts:{}}),RW=yi({id:"0x94a9059e",caipNetworkId:"tron:0x94a9059e",chainNamespace:"tron",name:"Tron Shasta Testnet",nativeCurrency:{decimals:6,name:"TRX",symbol:"TRX"},rpcUrls:{default:{http:[""],webSocket:[""]}},blockExplorers:{default:{name:"Tron BlockChain Explorer",url:"https://shasta.tronscan.org/"}},contracts:{}});var ba;(function(t){t.signTransaction="tron_signTransaction",t.signMessage="tron_signMessage"})(ba||(ba={}));const Pf=(t,e)=>({requiredNamespaces:{tron:{chains:[t],methods:[ba.signTransaction,ba.signMessage],events:[]}},pairingTopic:e});class kW{constructor(e){this.providerPromise=null,this.eventListeners=new Map,this.sessionHandlers={},this._options=e.options,this._network=e.network,this._config=e}async getProvider(){var n,r,s;if(this.provider)return this.provider;if(!this.providerPromise){const i=this._options.projectId;if(!i)throw new Error("[WalletConnectWallet] projectId is required to initialize UniversalProvider");this.providerPromise=Fj.init({projectId:i,logger:(n=this._options)==null?void 0:n.logger,relayUrl:(r=this._options)==null?void 0:r.relayUrl,metadata:(s=this._options)==null?void 0:s.metadata}).catch(o=>{throw this.providerPromise=null,o})}const e=await this.providerPromise;return this.provider=e,this._client=e.client,e}extractAddressFromSession(e){const r=Object.values(e.namespaces).flatMap(i=>i.accounts)[0];if(!r)throw new Error("[WalletConnectWallet] No accounts found in session");const s=r.split(":")[2];if(!s)throw new Error(`[WalletConnectWallet] Invalid account format: ${r}`);return s}extractAllAddressesFromSession(e){const n=Object.values(e.namespaces).flatMap(r=>r.accounts);return!n||n.length===0?[]:n.map(r=>r.split(":")[2]).filter(r=>!!r)}emit(e,...n){var r;(r=this.eventListeners.get(e))==null||r.forEach(s=>{try{s(...n)}catch(i){console.error(`[WalletConnectWallet] Error in ${e} listener:`,i)}})}on(e,n){return this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(n),()=>this.off(e,n)}off(e,n){var r;(r=this.eventListeners.get(e))==null||r.delete(n)}removeAllListeners(e){e?this.eventListeners.delete(e):this.eventListeners.clear()}setupSessionListeners(){if(!this._client||!this._session)return;const e=()=>{this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete)),this.sessionHandlers={}};e(),this.sessionHandlers.update=({topic:n,params:r})=>{var c;if(!this._session||this._session.topic!==n)return;let s;try{s=(c=this._client)==null?void 0:c.session.get(n)}catch{return}if(!s)return;const i=this.extractAllAddressesFromSession(this._session);this._session={...s,namespaces:(r==null?void 0:r.namespaces)||s.namespaces},this.address=this.extractAddressFromSession(this._session);const o=this.extractAllAddressesFromSession(this._session);JSON.stringify(i)!==JSON.stringify(o)&&this.emit("accountsChanged",o)},this.sessionHandlers.delete=({topic:n})=>{var r;((r=this._session)==null?void 0:r.topic)===n&&(this._session=void 0,this.address=void 0,this.emit("disconnect"),e())},this._client.on("session_update",this.sessionHandlers.update),this._client.on("session_delete",this.sessionHandlers.delete)}async connect(){var s;const e=await this.getProvider(),n=e.client,r=n.find(Pf(this._network)).filter(i=>i.acknowledged);if(r.length){this._session=r[r.length-1],this._client=n,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const i=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",i),{address:this.address}}else{this.appKit||(this.appKit=xW({projectId:this._options.projectId,networks:[OW,DW,RW],themeMode:this._config.themeMode,themeVariables:this._config.themeVariables,allWallets:"HIDE",manualWCControl:!0,universalProvider:e})),this.appKit.open();try{const i=await e.connect({pairingTopic:void 0,optionalNamespaces:Pf(this._network).requiredNamespaces});this._session=i,this._client=n,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const o=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",o),{address:this.address}}finally{(s=this.appKit)==null||s.close()}}}async disconnect(){var s,i,o,a;this._client&&(this.sessionHandlers.update&&this._client.off("session_update",this.sessionHandlers.update),this.sessionHandlers.delete&&this._client.off("session_delete",this.sessionHandlers.delete),this.sessionHandlers={});const e=dt("USER_DISCONNECTED"),n=((s=this._session)==null?void 0:s.topic)||((o=(i=this.provider)==null?void 0:i.session)==null?void 0:o.topic);if(!n)throw new Li;const r=((a=this.provider)==null?void 0:a.client)||this._client;if(!r)throw new Li;await r.disconnect({topic:n,reason:e}),this._session=void 0,this.address=void 0}get client(){if(this._client)return this._client;throw new Li}async checkConnectStatus(){const n=(await this.getProvider()).client,r=n.find(Pf(this._network)).filter(s=>s.acknowledged);if(r.length){this._session=r[r.length-1],this._client=n,this.address=this.extractAddressFromSession(this._session),this.setupSessionListeners();const s=this.extractAllAddressesFromSession(this._session);return this.emit("accountsChanged",s),{address:this.address}}else return{address:""}}async signTransaction(e){if(this._client&&this._session){const n=this._session.sessionProperties,r=(n==null?void 0:n.tron_method_version)==="v1",s=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:ba.signTransaction,params:r?{address:this.address,transaction:e}:{address:this.address,transaction:{transaction:e}}}});return s!=null&&s.result?s.result:s}else throw new Li}async signMessage(e){if(this._client&&this._session){const{signature:n}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:ba.signMessage,params:{address:this.address,message:e}}});return n}else throw new Li}}var cc=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const PW="WalletConnect",MW=Object.keys(Xf),LW=["--w3m-font-family","--w3m-accent","--w3m-color-mix","--w3m-color-mix-strength","--w3m-font-size-master","--w3m-border-radius-master","--w3m-z-index","--w3m-qr-color"];class QQ extends mi{constructor(e){var n,r;if(super(),this.name=PW,this.url="https://walletconnect.org",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNjEuNDM4NTQsOTQuMDAzOGM0OC45MTEyMywtNDcuODg4MTcgMTI4LjIxMTk5LC00Ny44ODgxNyAxNzcuMTIzMjEsMGw1Ljg4NjU1LDUuNzYzNDJjMi40NDU1NiwyLjM5NDQxIDIuNDQ1NTYsNi4yNzY1MSAwLDguNjcwOTJsLTIwLjEzNjcsMTkuNzE1NWMtMS4yMjI3OCwxLjE5NzIxIC0zLjIwNTMsMS4xOTcyMSAtNC40MjgwOCwwbC04LjEwMDU4LC03LjkzMTE1Yy0zNC4xMjE2OSwtMzMuNDA3OTggLTg5LjQ0Mzg5LC0zMy40MDc5OCAtMTIzLjU2NTU4LDBsLTguNjc1MDYsOC40OTM2MWMtMS4yMjI3OCwxLjE5NzIgLTMuMjA1MywxLjE5NzIgLTQuNDI4MDgsMGwtMjAuMTM2NjksLTE5LjcxNTVjLTIuNDQ1NTYsLTIuMzk0NDEgLTIuNDQ1NTYsLTYuMjc2NTIgMCwtOC42NzA5Mmw2LjQ2MTAxLC02LjMyNTg4em0yMTguNzY3OCw0MC43NzM3NWwxNy45MjE3LDE3LjU0Njg5YzIuNDQ1NTQsMi4zOTQ0IDIuNDQ1NTYsNi4yNzY0OCAwLjAwMDAzLDguNjcwODlsLTgwLjgxMDE3LDc5LjEyMTE0Yy0yLjQ0NTU1LDIuMzk0NDIgLTYuNDEwNTksMi4zOTQ0NSAtOC44NTYxNiwwLjAwMDA2Yy0wLjAwMDAxLC0wLjAwMDAxIC0wLjAwMDAzLC0wLjAwMDAyIC0wLjAwMDA0LC0wLjAwMDAzbC01Ny4zNTQxNCwtNTYuMTU0NThjLTAuNjExMzksLTAuNTk4NiAtMS42MDI2NSwtMC41OTg2IC0yLjIxNDA0LDBjMCwwLjAwMDAxIC0wLjAwMDAxLDAuMDAwMDEgLTAuMDAwMDEsMC4wMDAwMmwtNTcuMzUyOTIsNTYuMTU0NTNjLTIuNDQ1NTQsMi4zOTQ0MyAtNi40MTA1OCwyLjM5NDQ3IC04Ljg1NjE2LDAuMDAwMDhjLTAuMDAwMDIsLTAuMDAwMDEgLTAuMDAwMDMsLTAuMDAwMDIgLTAuMDAwMDUsLTAuMDAwMDRsLTgwLjgxMjQyLC03OS4xMjIxOWMtMi40NDU1NiwtMi4zOTQ0IC0yLjQ0NTU2LC02LjI3NjUxIDAsLTguNjcwOTFsMTcuOTIxNzMsLTE3LjU0Njg3YzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMGw1Ny4zNTQ5OCw1Ni4xNTUzNWMwLjYxMTM5LDAuNTk4NjEgMS42MDI2NSwwLjU5ODYxIDIuMjE0MDQsMGMwLjAwMDAxLDAgMC4wMDAwMiwtMC4wMDAwMSAwLjAwMDAzLC0wLjAwMDAybDU3LjM1MjEsLTU2LjE1NTMzYzIuNDQ1NSwtMi4zOTQ0NyA2LjQxMDU0LC0yLjM5NDU2IDguODU2MTYsLTAuMDAwMmMwLjAwMDAzLDAuMDAwMDMgMC4wMDAwNywwLjAwMDA3IDAuMDAwMSwwLjAwMDFsNTcuMzU0OSw1Ni4xNTU0M2MwLjYxMTM5LDAuNTk4NiAxLjYwMjY1LDAuNTk4NiAyLjIxNDA0LDBsNTcuMzUzOTgsLTU2LjE1NDMyYzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMHoiIGZpbGw9IiMzYjk5ZmMiIGlkPSJzdmdfMSIvPjwvc3ZnPg==",this._readyState=_e.Found,this._state=K.Disconnect,this._disconnected=()=>{const i=this._wallet;i&&(i.off("disconnected",this._disconnected),i.off("accountsChanged",this._accountsChanged),this._address=null,this._state=K.Disconnect,this.emit("disconnect"),this.emit("stateChanged",this._state))},this._accountsChanged=i=>{const o=this.address;this._address=(i==null?void 0:i[0])||"",this.emit("accountsChanged",this.address||"",o||"")},e=Object.assign({},e),!e||typeof e!="object")throw new Error("[WalletconnectAdapter] config is required.");if(e.network||(console.error(`[WalletconnectAdapter] config.network must be one of ${MW.join()} or a chainID such as 0x2b6653dc. Use Nile network instead.`),e.network="Nile"),!e.options)throw new Error("[WalletconnectAdapter] config.options is required.");const s={};!((n=e.web3ModalConfig)===null||n===void 0)&&n.themeVariables&&Object.entries(e.web3ModalConfig.themeVariables).forEach(([i,o])=>{const a=i.replace("--wcm-","--w3m-");LW.includes(a)&&(s[a]=o)}),e.themeMode=e.themeMode||((r=e.web3ModalConfig)===null||r===void 0?void 0:r.themeMode),e.themeVariables=e.themeVariables||s,Reflect.deleteProperty(e,"web3ModalConfig"),this._connecting=!1,this._wallet=null,this._address=null,this._config=e}get address(){return this._address}get readyState(){return this._readyState}get state(){return this._state}get connecting(){return this._connecting}connect(){return cc(this,void 0,void 0,function*(){try{if(this.connected)return;if(this.state===K.NotFound)throw new gn;this._connecting=!0;let e;try{this._wallet?{address:e}=yield this._wallet.connect():(this._wallet=new kW(Object.assign(Object.assign({},this._config),{network:pg[this._config.network]||`tron:${this._config.network}`})),{address:e}=yield this._wallet.connect())}catch(n){throw n.constructor.name==="Web3ModalError"?new mI:new St(n==null?void 0:n.message,n)}this._wallet.on("disconnect",this._disconnected),this._wallet.on("accountsChanged",this._accountsChanged),this._address=e||"",this._state=K.Connected,this.emit("stateChanged",this._state),this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{}})}disconnect(){return cc(this,void 0,void 0,function*(){if(this.state===K.NotFound)return;const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountsChanged",this._accountsChanged),this._address=null;try{yield e.disconnect()}catch(n){this.emit("error",new Kv(n==null?void 0:n.message,n))}}this._state=K.Disconnect,this.emit("disconnect"),this.emit("stateChanged",this._state)})}signTransaction(e){return cc(this,void 0,void 0,function*(){if(this.state!==K.Connected)throw new nt;try{const n=this._wallet;if(!n)throw new nt;try{return yield n.signTransaction(e)}catch(r){throw new ze(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}})}signMessage(e){return cc(this,void 0,void 0,function*(){try{const n=this._wallet;if(!n)throw new nt;try{return yield n.signMessage(e)}catch(r){throw new zt(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}})}getConnectionStatus(){return cc(this,void 0,void 0,function*(){if(!this._wallet||!this.connected)return{address:""};try{return yield this._wallet.checkConnectStatus()}catch{return this._address=null,this._state=K.Disconnect,{address:""}}})}}function Go(t){const e=[];return t.split("/").forEach(r=>{let s=parseInt(r,10);isNaN(s)||(r.length>1&&r[r.length-1]==="'"&&(s+=2147483648),e.push(s))}),e}function Kb(t,e){function n(r,s,i){return r>=s.length?i:e(s[r],r).then(function(o){return i.push(o),n(r+1,s,i)})}return Promise.resolve().then(()=>n(0,t,[]))}function Yb(t,e){let n=0,r=0,s=e;for(;r<64;){const i=t[s];if(n|=(i&127)<<r,s+=1,!(i&128))return n&=4294967295,{value:n,pos:s};r+=7}throw new Error("Too many bytes when decoding varint.")}const UW=t=>t.length%2?"0"+t:t;function Qb(t){const e=t.startsWith("0x")?t.slice(2):t;return Buffer.from(UW(e),"hex")}const $W=224,BW=(t,e,n,r)=>{const s=Qb(n),i=Qb(r),o=Go(e),a=Buffer.alloc(1+o.length*4+32+32,0);let c=0;return a[0]=o.length,o.forEach((l,u)=>{a.writeUint32BE(l,1+4*u)}),c=1+4*o.length,s.copy(a,c),c+=32,i.copy(a,c),t.send($W,12,0,0,a).then(l=>l.slice(0,65).toString("hex"))},jW=t=>(t&&t.statusCode,t),Mf=4,Lf=1,zo=224,FW=2,zW=4,WW=5,HW=8,qW=10,VW=6,Su=250;class GW{constructor(e,n="TRX"){bi(this,"transport");this.transport=e,e.decorateAppAPIMethods(this,["getAddress","getECDHPairKey","signTransaction","signTransactionHash","signPersonalMessage","signTIP712HashedMessage","getAppConfiguration"],n)}getAddress(e,n){const r=Go(e),s=Buffer.alloc(Lf+r.length*Mf);return s[0]=r.length,r.forEach((i,o)=>{s.writeUInt32BE(i,1+4*o)}),this.transport.send(zo,FW,n?1:0,0,s).then(i=>{const o=i[0],a=i[1+o];return{publicKey:i.slice(1,1+o).toString("hex"),address:i.slice(1+o+1,1+o+1+a).toString("ascii")}})}getNextLength(e){const n=Yb(e,0),r=Yb(e,n.pos);return n.value&7?r.value+r.pos:r.pos}signTransaction(e,n,r){const s=Go(e);let i=Buffer.from(n,"hex");const o=[];let a=Buffer.alloc(Lf+s.length*Mf);for(a[0]=s.length,s.forEach((d,f)=>{a.writeUInt32BE(d,1+4*f)});i.length>0;){const d=this.getNextLength(i);if(d>Su)throw new Error("Too many bytes to encode.");if(a.length+d>Su){o.push(a),a=Buffer.alloc(0);continue}a=Buffer.concat([a,i.slice(0,d)]),i=i.slice(d,i.length)}o.push(a);const c=[];let l;const u=o.length;if(r!==void 0)for(let d=0;d<r.length;d+=1){const f=Buffer.from(r[d],"hex");o.push(f)}if(o.length===1)c.push(16);else{c.push(0);for(let d=1;d<o.length-1;d+=1)d>=u?c.push(160|d-u):c.push(128);r!==void 0&&r.length?c.push(168|r.length-1):c.push(144)}return Kb(o,(d,f)=>this.transport.send(zo,zW,c[f],0,d).then(h=>{l=h})).then(()=>l.slice(0,65).toString("hex"),d=>{throw jW(d)})}signTransactionHash(e,n){const r=Go(e);let s=Buffer.alloc(Lf+r.length*Mf);return s[0]=r.length,r.forEach((i,o)=>{s.writeUInt32BE(i,1+4*o)}),s=Buffer.concat([s,Buffer.from(n,"hex")]),this.transport.send(zo,WW,0,0,s).then(i=>i.slice(0,65).toString("hex"))}getAppConfiguration(){return this.transport.send(zo,VW,0,0).then(e=>{const n=(e[0]&8)>0;let r=(e[0]&4)>0,s=(e[0]&2)>0,i=(e[0]&1)>0;return e[1]===0&&e[2]===1&&e[3]<2&&(i=!0,s=!1),e[1]===0&&e[2]===1&&e[3]<5&&(r=!1),{version:`${e[1]}.${e[2]}.${e[3]}`,versionN:e[1]*1e4+e[2]*100+e[3],allowData:i,allowContract:s,truncateAddress:r,signByHash:n}})}signPersonalMessage(e,n){const r=Go(e),s=Buffer.from(n,"hex");let i=0;const o=[],a=s.length.toString(16),c="00000000".substr(a.length)+a,l=Buffer.concat([Buffer.from(c,"hex"),s]);for(;i<l.length;){const d=i===0?Su-1-r.length*4:Su,f=i+d>l.length?l.length-i:d,h=Buffer.alloc(i===0?1+r.length*4+f:f);i===0?(h[0]=r.length,r.forEach((p,g)=>{h.writeUInt32BE(p,1+4*g)}),l.copy(h,1+4*r.length,i,i+f)):l.copy(h,0,i,i+f),o.push(h),i+=f}let u;return Kb(o,(d,f)=>this.transport.send(zo,HW,f===0?0:128,0,d).then(h=>{u=h})).then(()=>u.slice(0,65).toString("hex"))}signTIP712HashedMessage(e,n,r){return BW(this.transport,e,n,r)}getECDHPairKey(e,n){const r=Go(e),s=Buffer.from(n,"hex"),i=Buffer.alloc(1+r.length*4+s.length);return i[0]=r.length,r.forEach((o,a)=>{i.writeUInt32BE(o,1+4*a)}),s.copy(i,1+4*r.length,0,s.length),this.transport.send(zo,qW,0,1,i).then(o=>o.slice(0,65).toString("hex"))}}const A1={},C1={},_m=(t,e)=>{C1[t]=e},W=t=>{class e extends Error{constructor(s,i,o){super(s||t,o);bi(this,"cause");if(Object.setPrototypeOf(this,e.prototype),this.name=t,i)for(const a in i)this[a]=i[a];if(o&&KW(o)&&"cause"in o&&!this.cause){const a=o.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return A1[t]=e,e};function KW(t){return typeof t=="object"}const I1=t=>{if(t&&typeof t=="object"){try{if(typeof t.message=="string"){const n=JSON.parse(t.message);n.message&&n.name&&(t=n)}}catch{}let e;if(typeof t.name=="string"){const{name:n}=t,r=C1[n];if(r)e=r(t);else{let s=n==="Error"?Error:A1[n];s||(console.warn("deserializing an unknown class '"+n+"'"),s=W(n)),e=Object.create(s.prototype);try{for(const i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}catch{}}}else typeof t.message=="string"&&(e=new Error(t.message));return e&&!e.stack&&Error.captureStackTrace&&Error.captureStackTrace(e,I1),e}return new Error(String(t))},YW=t=>t&&(typeof t=="object"?N1(t,[]):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t);function N1(t,e){const n={};e.push(t);for(const r of Object.keys(t)){const s=t[r];if(typeof s!="function"){if(!s||typeof s!="object"){n[r]=s;continue}if(e.indexOf(t[r])===-1){n[r]=N1(t[r],e.slice(0));continue}n[r]="[Circular]"}}return typeof t.name=="string"&&(n.name=t.name),typeof t.message=="string"&&(n.message=t.message),typeof t.stack=="string"&&(n.stack=t.stack),n}const QW=W("AccountNameRequired"),ZW=W("AccountNotSupported"),JW=W("AccountAwaitingSendPendingOperations"),XW=W("AmountRequired"),e7=W("BluetoothRequired"),t7=W("BtcUnmatchedApp"),n7=W("CantOpenDevice"),r7=W("CashAddrNotSupported"),s7=W("ClaimRewardsFeesWarning"),i7=W("CurrencyNotSupported"),o7=W("DeviceAppVerifyNotSupported"),a7=W("DeviceGenuineSocketEarlyClose"),c7=W("DeviceNotGenuine"),l7=W("DeviceOnDashboardExpected"),u7=W("DeviceOnDashboardUnexpected"),d7=W("DeviceInOSUExpected"),h7=W("DeviceHalted"),f7=W("DeviceNameInvalid"),p7=W("DeviceSocketFail"),g7=W("DeviceSocketNoBulkStatus"),m7=W("DeviceSocketNoBulkStatus"),w7=W("UnresponsiveDeviceError"),S1=W("DisconnectedDevice"),T1=W("DisconnectedDeviceDuringOperation"),y7=W("DeviceExtractOnboardingStateError"),b7=W("DeviceOnboardingStatePollingError"),v7=W("EnpointConfig"),E7=W("EthAppPleaseEnableContractData"),_7=W("CeloAppPleaseEnableContractData"),A7=W("FeeEstimationFailed"),C7=W("FirmwareNotRecognized"),I7=W("HardResetFail"),N7=W("InvalidXRPTag"),S7=W("InvalidAddress"),T7=W("InvalidNonce"),x7=W("InvalidAddressBecauseDestinationIsAlsoSource"),O7=W("LatestMCUInstalledError"),D7=W("LatestFirmwareVersionRequired"),R7=W("UnknownMCU"),k7=W("LedgerAPIError"),P7=W("LedgerAPIErrorWithMessage"),M7=W("LedgerAPINotAvailable"),L7=W("ManagerAppAlreadyInstalled"),U7=W("ManagerAppRelyOnBTC"),$7=W("ManagerAppDepInstallRequired"),B7=W("ManagerAppDepUninstallRequired"),j7=W("ManagerDeviceLocked"),F7=W("ManagerFirmwareNotEnoughSpace"),z7=W("ManagerNotEnoughSpace"),W7=W("ManagerUninstallBTCDep"),H7=W("NetworkDown"),q7=W("NetworkError"),V7=W("NoAddressesFound"),G7=W("NotEnoughBalance"),K7=W("NotEnoughBalanceFees"),Y7=W("NotEnoughBalanceSwap"),Q7=W("NotEnoughBalanceToDelegate"),Z7=W("UnstakeNotEnoughStakedBalanceLeft"),J7=W("RestakeNotEnoughStakedBalanceLeft"),X7=W("NotEnoughToRestake"),eH=W("NotEnoughToUnstake"),tH=W("NotEnoughBalanceInParentAccount"),nH=W("NotEnoughSpendableBalance"),rH=W("NotEnoughBalanceBecauseDestinationNotCreated"),sH=W("NotEnoughToStake"),iH=W("NoAccessToCamera"),oH=W("NotEnoughGas"),aH=W("NotEnoughGasSwap"),cH=W("TronEmptyAccount"),lH=W("MaybeKeepTronAccountAlive"),uH=W("NotSupportedLegacyAddress"),dH=W("GasLessThanEstimate"),hH=W("PriorityFeeTooLow"),fH=W("PriorityFeeTooHigh"),pH=W("PriorityFeeHigherThanMaxFee"),gH=W("MaxFeeTooLow"),mH=W("PasswordsDontMatch"),wH=W("PasswordIncorrect"),yH=W("RecommendSubAccountsToEmpty"),bH=W("RecommendUndelegation"),vH=W("TimeoutTagged"),EH=W("UnexpectedBootloader"),_H=W("MCUNotGenuineToDashboard"),AH=W("RecipientRequired"),CH=W("UnavailableTezosOriginatedAccountReceive"),IH=W("UnavailableTezosOriginatedAccountSend"),NH=W("UpdateFetchFileFail"),SH=W("UpdateIncorrectHash"),TH=W("UpdateIncorrectSig"),xH=W("UpdateYourApp"),OH=W("UserRefusedDeviceNameChange"),DH=W("UserRefusedAddress"),RH=W("UserRefusedFirmwareUpdate"),kH=W("UserRefusedAllowManager"),PH=W("UserRefusedOnDevice"),MH=W("PinNotSet"),LH=W("ExpertModeRequired"),gg=W("TransportOpenUserCancelled"),UH=W("TransportInterfaceNotAvailable"),x1=W("TransportRaceCondition"),$H=W("TransportWebUSBGestureRequired"),BH=W("TransactionHasBeenValidatedError"),jH=W("TransportExchangeTimeoutError"),FH=W("DeviceShouldStayInApp"),zH=W("WebsocketConnectionError"),WH=W("WebsocketConnectionFailed"),HH=W("WrongDeviceForAccount"),qH=W("WrongDeviceForAccountPayout"),VH=W("MissingSwapPayloadParamaters"),GH=W("WrongDeviceForAccountRefund"),KH=W("WrongAppForCurrency"),YH=W("ETHAddressNonEIP"),QH=W("CantScanQRCode"),ZH=W("FeeNotLoaded"),JH=W("FeeNotLoadedSwap"),XH=W("FeeRequired"),eq=W("FeeTooHigh"),tq=W("PendingOperation"),nq=W("SyncError"),rq=W("PairingFailed"),sq=W("PeerRemovedPairing"),iq=W("GenuineCheckFailed"),oq=W("LedgerAPI4xx"),aq=W("LedgerAPI5xx"),cq=W("FirmwareOrAppUpdateRequired"),lq=W("ReplacementTransactionUnderpriced"),uq=W("OpReturnSizeLimit"),dq=W("DustLimit"),hq=W("LanguageNotFound"),fq=W("NoDBPathGiven"),pq=W("DBWrongPassword"),gq=W("DBNotReset"),mq=W("SequenceNumberError"),wq=W("DisabledTransactionBroadcastError");var mg;(function(t){t.Unknown="Unknown",t.LocationServicesDisabled="LocationServicesDisabled",t.LocationServicesUnauthorized="LocationServicesUnauthorized",t.BluetoothScanStartFailed="BluetoothScanStartFailed"})(mg||(mg={}));class Am extends Error{constructor(n,r){super(r);bi(this,"type");this.name="HwTransportError",this.type=n,Object.setPrototypeOf(this,Am.prototype)}}class qi extends Error{constructor(n,r){const s="TransportError";super(n||s);bi(this,"id");this.name=s,this.message=n,this.stack=new Error(n).stack,this.id=r}}_m("TransportError",t=>new qi(t.message,t.id));const sa={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function O1(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}class Ma extends Error{constructor(n,{canBeMappedToChildError:r=!0}={}){const s=Object.keys(sa).find(c=>sa[c]===n)||"UNKNOWN_ERROR",i=O1(n)||s,o=n.toString(16),a=`Ledger device: ${i} (0x${o})`;super(a);bi(this,"statusCode");bi(this,"statusText");if(this.name="TransportStatusError",this.statusCode=n,this.statusText=s,Object.setPrototypeOf(this,Ma.prototype),r&&n===sa.LOCKED_DEVICE)return new fh(a)}}class fh extends Ma{constructor(e){super(sa.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,fh.prototype)}}class Cm extends Error{constructor(e,n){super(n),this.name=e,Object.setPrototypeOf(this,Cm.prototype)}}_m("TransportStatusError",t=>new Ma(t.statusCode));const yq=Object.freeze(Object.defineProperty({__proto__:null,AccountAwaitingSendPendingOperations:JW,AccountNameRequiredError:QW,AccountNotSupported:ZW,AmountRequired:XW,BluetoothRequired:e7,BtcUnmatchedApp:t7,CantOpenDevice:n7,CantScanQRCode:QH,CashAddrNotSupported:r7,CeloAppPleaseEnableContractData:_7,ClaimRewardsFeesWarning:s7,CurrencyNotSupported:i7,DBNotReset:gq,DBWrongPassword:pq,DeviceAppVerifyNotSupported:o7,DeviceExtractOnboardingStateError:y7,DeviceGenuineSocketEarlyClose:a7,DeviceHalted:h7,DeviceInOSUExpected:d7,DeviceMangementKitError:Cm,DeviceNameInvalid:f7,DeviceNeedsRestart:m7,DeviceNotGenuineError:c7,DeviceOnDashboardExpected:l7,DeviceOnDashboardUnexpected:u7,DeviceOnboardingStatePollingError:b7,DeviceShouldStayInApp:FH,DeviceSocketFail:p7,DeviceSocketNoBulkStatus:g7,DisabledTransactionBroadcastError:wq,DisconnectedDevice:S1,DisconnectedDeviceDuringOperation:T1,DustLimit:dq,ETHAddressNonEIP:YH,EnpointConfigError:v7,EthAppPleaseEnableContractData:E7,ExpertModeRequired:LH,FeeEstimationFailed:A7,FeeNotLoaded:ZH,FeeNotLoadedSwap:JH,FeeRequired:XH,FeeTooHigh:eq,FirmwareNotRecognized:C7,FirmwareOrAppUpdateRequired:cq,GasLessThanEstimate:dH,GenuineCheckFailed:iq,HardResetFail:I7,HwTransportError:Am,get HwTransportErrorType(){return mg},InvalidAddress:S7,InvalidAddressBecauseDestinationIsAlsoSource:x7,InvalidNonce:T7,InvalidXRPTag:N7,LanguageNotFound:hq,LatestFirmwareVersionRequired:D7,LatestMCUInstalledError:O7,LedgerAPI4xx:oq,LedgerAPI5xx:aq,LedgerAPIError:k7,LedgerAPIErrorWithMessage:P7,LedgerAPINotAvailable:M7,LockedDeviceError:fh,MCUNotGenuineToDashboard:_H,ManagerAppAlreadyInstalledError:L7,ManagerAppDepInstallRequired:$7,ManagerAppDepUninstallRequired:B7,ManagerAppRelyOnBTCError:U7,ManagerDeviceLockedError:j7,ManagerFirmwareNotEnoughSpaceError:F7,ManagerNotEnoughSpaceError:z7,ManagerUninstallBTCDep:W7,MaxFeeTooLow:gH,MaybeKeepTronAccountAlive:lH,MissingSwapPayloadParamaters:VH,NetworkDown:H7,NetworkError:q7,NoAccessToCamera:iH,NoAddressesFound:V7,NoDBPathGiven:fq,NotEnoughBalance:G7,NotEnoughBalanceBecauseDestinationNotCreated:rH,NotEnoughBalanceFees:K7,NotEnoughBalanceInParentAccount:tH,NotEnoughBalanceSwap:Y7,NotEnoughBalanceToDelegate:Q7,NotEnoughGas:oH,NotEnoughGasSwap:aH,NotEnoughSpendableBalance:nH,NotEnoughToRestake:X7,NotEnoughToStake:sH,NotEnoughToUnstake:eH,NotSupportedLegacyAddress:uH,OpReturnDataSizeLimit:uq,PairingFailed:rq,PasswordIncorrectError:wH,PasswordsDontMatchError:mH,PeerRemovedPairing:sq,PendingOperation:tq,PinNotSet:MH,PriorityFeeHigherThanMaxFee:pH,PriorityFeeTooHigh:fH,PriorityFeeTooLow:hH,RecipientRequired:AH,RecommendSubAccountsToEmpty:yH,RecommendUndelegation:bH,ReplacementTransactionUnderpriced:lq,RestakeNotEnoughStakedBalanceLeft:J7,SequenceNumberError:mq,StatusCodes:sa,SyncError:nq,TimeoutTagged:vH,TransactionHasBeenValidatedError:BH,TransportError:qi,TransportExchangeTimeoutError:jH,TransportInterfaceNotAvailable:UH,TransportOpenUserCancelled:gg,TransportRaceCondition:x1,TransportStatusError:Ma,TransportWebUSBGestureRequired:$H,TronEmptyAccount:cH,UnavailableTezosOriginatedAccountReceive:CH,UnavailableTezosOriginatedAccountSend:IH,UnexpectedBootloader:EH,UnknownMCU:R7,UnresponsiveDeviceError:w7,UnstakeNotEnoughStakedBalanceLeft:Z7,UpdateFetchFileFail:NH,UpdateIncorrectHash:SH,UpdateIncorrectSig:TH,UpdateYourApp:xH,UserRefusedAddress:DH,UserRefusedAllowManager:kH,UserRefusedDeviceNameChange:OH,UserRefusedFirmwareUpdate:RH,UserRefusedOnDevice:PH,WebsocketConnectionError:zH,WebsocketConnectionFailed:WH,WrongAppForCurrency:KH,WrongDeviceForAccount:HH,WrongDeviceForAccountPayout:qH,WrongDeviceForAccountRefund:GH,addCustomErrorDeserializer:_m,createCustomErrorClass:W,deserializeError:I1,getAltStatusMessage:O1,serializeError:YW},Symbol.toStringTag,{value:"Module"}));var Uf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},$f=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},bq=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},vq=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Eq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_q=function(){function t(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new zd,this.send=function(n,r,s,i,o,a){return o===void 0&&(o=Buffer.alloc(0)),a===void 0&&(a=[sa.OK]),Uf(e,void 0,void 0,function(){var c,l;return $f(this,function(u){switch(u.label){case 0:if(o.length>=256)throw new qi("data.length exceed 256 bytes limit. Got: "+o.length,"DataLengthTooBig");return[4,this.exchange(Buffer.concat([Buffer.from([n,r,s,i]),Buffer.from([o.length]),o]))];case 1:if(c=u.sent(),l=c.readUInt16BE(c.length-2),!a.some(function(d){return d===l}))throw new Ma(l);return[2,c]}})})},this.exchangeAtomicImpl=function(n){return Uf(e,void 0,void 0,function(){var r,s,i,o,a,c=this;return $f(this,function(l){switch(l.label){case 0:if(this.exchangeBusyPromise)throw new x1("An action was already pending on the Ledger device. Please deny or reconnect.");s=new Promise(function(u){r=u}),this.exchangeBusyPromise=s,i=!1,o=setTimeout(function(){i=!0,c.emit("unresponsive")},this.unresponsiveTimeout),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,n()];case 2:return a=l.sent(),i&&this.emit("responsive"),[2,a];case 3:return clearTimeout(o),r&&r(),this.exchangeBusyPromise=null,[7];case 4:return[2]}})})},this._appAPIlock=null}return t.prototype.exchange=function(e){throw new Error("exchange not implemented")},t.prototype.setScrambleKey=function(e){},t.prototype.close=function(){return Promise.resolve()},t.prototype.on=function(e,n){this._events.on(e,n)},t.prototype.off=function(e,n){this._events.removeListener(e,n)},t.prototype.emit=function(e){for(var n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];(n=this._events).emit.apply(n,vq([e],bq(r),!1))},t.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},t.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},t.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},t.create=function(e,n){var r=this;return e===void 0&&(e=3e3),new Promise(function(s,i){var o=!1,a=r.listen({next:function(l){o=!0,a&&a.unsubscribe(),c&&clearTimeout(c),r.open(l.descriptor,e).then(s,i)},error:function(l){c&&clearTimeout(c),i(l)},complete:function(){c&&clearTimeout(c),o||i(new qi(r.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),c=n?setTimeout(function(){a.unsubscribe(),i(new qi(r.ErrorMessage_ListenTimeout,"ListenTimeout"))},n):null})},t.prototype.decorateAppAPIMethods=function(e,n,r){var s,i;try{for(var o=Eq(n),a=o.next();!a.done;a=o.next()){var c=a.value;e[c]=this.decorateAppAPIMethod(c,e[c],e,r)}}catch(l){s={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}},t.prototype.decorateAppAPIMethod=function(e,n,r,s){var i=this;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return Uf(i,void 0,void 0,function(){var c;return $f(this,function(l){switch(l.label){case 0:if(c=this._appAPIlock,c)return[2,Promise.reject(new qi("Ledger Device is busy (lock "+c+")","TransportLocked"))];l.label=1;case 1:return l.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(s),[4,n.apply(r,o)];case 2:return[2,l.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}})})}},t.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",t.ErrorMessage_NoDeviceFound="No Ledger device found",t}(),D1={};const Aq=Vv(yq);(function(t){t.__esModule=!0;var e=Aq,n=5;function r(o){var a=Buffer.alloc(2);return a.writeUInt16BE(o,0),a}var s={data:Buffer.alloc(0),dataLength:0,sequence:0},i=function(o,a){return{makeBlocks:function(c){var l=Buffer.concat([r(c.length),c]),u=a-5,d=Math.ceil(l.length/u);l=Buffer.concat([l,Buffer.alloc(d*u-l.length+1).fill(0)]);for(var f=[],h=0;h<d;h++){var p=Buffer.alloc(5);p.writeUInt16BE(o,0),p.writeUInt8(n,2),p.writeUInt16BE(h,3);var g=l.slice(h*u,(h+1)*u);f.push(Buffer.concat([p,g]))}return f},reduceResponse:function(c,l){var u=c||s,d=u.data,f=u.dataLength,h=u.sequence;if(l.readUInt16BE(0)!==o)throw new e.TransportError("Invalid channel","InvalidChannel");if(l.readUInt8(2)!==n)throw new e.TransportError("Invalid tag","InvalidTag");if(l.readUInt16BE(3)!==h)throw new e.TransportError("Invalid sequence","InvalidSequence");c||(f=l.readUInt16BE(5)),h++;var p=l.slice(c?5:7);return d=Buffer.concat([d,p]),d.length>f&&(d=d.slice(0,f)),{data:d,dataLength:f,sequence:h}},getReducedResult:function(c){if(c&&c.dataLength===c.data.length)return c.data}}};t.default=i})(D1);const Cq=Xr(D1);var wg={exports:{}};const Iq="2.0.0",R1=256,Nq=Number.MAX_SAFE_INTEGER||9007199254740991,Sq=16,Tq=R1-6,xq=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ph={MAX_LENGTH:R1,MAX_SAFE_COMPONENT_LENGTH:Sq,MAX_SAFE_BUILD_LENGTH:Tq,MAX_SAFE_INTEGER:Nq,RELEASE_TYPES:xq,SEMVER_SPEC_VERSION:Iq,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Bf={};const Oq=typeof process=="object"&&Bf&&Bf.NODE_DEBUG&&/\bsemver\b/i.test(Bf.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var gh=Oq;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=ph,i=gh;e=t.exports={};const o=e.re=[],a=e.safeRe=[],c=e.src=[],l=e.safeSrc=[],u=e.t={};let d=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[f,r]],p=y=>{for(const[b,C]of h)y=y.split(`${b}*`).join(`${b}{0,${C}}`).split(`${b}+`).join(`${b}{1,${C}}`);return y},g=(y,b,C)=>{const E=p(b),S=d++;i(y,S,b),u[y]=S,c[S]=b,l[S]=E,o[S]=new RegExp(b,C?"g":void 0),a[S]=new RegExp(E,C?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(wg,wg.exports);var Yl=wg.exports;const Dq=Object.freeze({loose:!0}),Rq=Object.freeze({}),kq=t=>t?typeof t!="object"?Dq:t:Rq;var Im=kq;const Zb=/^[0-9]+$/,k1=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;const n=Zb.test(t),r=Zb.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Pq=(t,e)=>k1(e,t);var P1={compareIdentifiers:k1,rcompareIdentifiers:Pq};const Tu=gh,{MAX_LENGTH:Jb,MAX_SAFE_INTEGER:xu}=ph,{safeRe:Ou,t:Du}=Yl,Mq=Im,{compareIdentifiers:jf}=P1;let Lq=class Fr{constructor(e,n){if(n=Mq(n),e instanceof Fr){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Jb)throw new TypeError(`version is longer than ${Jb} characters`);Tu("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?Ou[Du.LOOSE]:Ou[Du.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>xu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xu||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<xu)return i}return s}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Tu("SemVer.compare",this.version,this.options,e),!(e instanceof Fr)){if(typeof e=="string"&&e===this.version)return 0;e=new Fr(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Fr||(e=new Fr(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof Fr||(e=new Fr(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],s=e.prerelease[n];if(Tu("prerelease compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return jf(r,s)}while(++n)}compareBuild(e){e instanceof Fr||(e=new Fr(e,this.options));let n=0;do{const r=this.build[n],s=e.build[n];if(Tu("build compare",n,r,s),r===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(r===void 0)return-1;if(r===s)continue;return jf(r,s)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const s=`-${n}`.match(this.options.loose?Ou[Du.PRERELEASELOOSE]:Ou[Du.PRERELEASE]);if(!s||s[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];r===!1&&(i=[n]),jf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var En=Lq;const Xb=En,Uq=(t,e,n=!1)=>{if(t instanceof Xb)return t;try{return new Xb(t,e)}catch(r){if(!n)return null;throw r}};var La=Uq;const $q=La,Bq=(t,e)=>{const n=$q(t,e);return n?n.version:null};var jq=Bq;const Fq=La,zq=(t,e)=>{const n=Fq(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var Wq=zq;const ev=En,Hq=(t,e,n,r,s)=>{typeof n=="string"&&(s=r,r=n,n=void 0);try{return new ev(t instanceof ev?t.version:t,n).inc(e,r,s).version}catch{return null}};var qq=Hq;const tv=La,Vq=(t,e)=>{const n=tv(t,null,!0),r=tv(e,null,!0),s=n.compare(r);if(s===0)return null;const i=s>0,o=i?n:r,a=i?r:n,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}const u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};var Gq=Vq;const Kq=En,Yq=(t,e)=>new Kq(t,e).major;var Qq=Yq;const Zq=En,Jq=(t,e)=>new Zq(t,e).minor;var Xq=Jq;const eV=En,tV=(t,e)=>new eV(t,e).patch;var nV=tV;const rV=La,sV=(t,e)=>{const n=rV(t,e);return n&&n.prerelease.length?n.prerelease:null};var iV=sV;const nv=En,oV=(t,e,n)=>new nv(t,n).compare(new nv(e,n));var Rr=oV;const aV=Rr,cV=(t,e,n)=>aV(e,t,n);var lV=cV;const uV=Rr,dV=(t,e)=>uV(t,e,!0);var hV=dV;const rv=En,fV=(t,e,n)=>{const r=new rv(t,n),s=new rv(e,n);return r.compare(s)||r.compareBuild(s)};var Nm=fV;const pV=Nm,gV=(t,e)=>t.sort((n,r)=>pV(n,r,e));var mV=gV;const wV=Nm,yV=(t,e)=>t.sort((n,r)=>wV(r,n,e));var bV=yV;const vV=Rr,EV=(t,e,n)=>vV(t,e,n)>0;var mh=EV;const _V=Rr,AV=(t,e,n)=>_V(t,e,n)<0;var Sm=AV;const CV=Rr,IV=(t,e,n)=>CV(t,e,n)===0;var M1=IV;const NV=Rr,SV=(t,e,n)=>NV(t,e,n)!==0;var L1=SV;const TV=Rr,xV=(t,e,n)=>TV(t,e,n)>=0;var Tm=xV;const OV=Rr,DV=(t,e,n)=>OV(t,e,n)<=0;var xm=DV;const RV=M1,kV=L1,PV=mh,MV=Tm,LV=Sm,UV=xm,$V=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return RV(t,n,r);case"!=":return kV(t,n,r);case">":return PV(t,n,r);case">=":return MV(t,n,r);case"<":return LV(t,n,r);case"<=":return UV(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var U1=$V;const BV=En,jV=La,{safeRe:Ru,t:ku}=Yl,FV=(t,e)=>{if(t instanceof BV)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?Ru[ku.COERCEFULL]:Ru[ku.COERCE]);else{const c=e.includePrerelease?Ru[ku.COERCERTLFULL]:Ru[ku.COERCERTL];let l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;const r=n[2],s=n[3]||"0",i=n[4]||"0",o=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return jV(`${r}.${s}.${i}${o}${a}`,e)};var zV=FV;class WV{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(e,n)}return this}}var HV=WV,Ff,sv;function kr(){if(sv)return Ff;sv=1;const t=/\s+/g;class e{constructor(m,w){if(w=s(w),m instanceof e)return m.loose===!!w.loose&&m.includePrerelease===!!w.includePrerelease?m:new e(m.raw,w);if(m instanceof i)return this.raw=m.value,this.set=[[m]],this.formatted=void 0,this;if(this.options=w,this.loose=!!w.loose,this.includePrerelease=!!w.includePrerelease,this.raw=m.trim().replace(t," "),this.set=this.raw.split("||").map(_=>this.parseRange(_.trim())).filter(_=>_.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const _=this.set[0];if(this.set=this.set.filter(A=>!g(A[0])),this.set.length===0)this.set=[_];else if(this.set.length>1){for(const A of this.set)if(A.length===1&&y(A[0])){this.set=[A];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let m=0;m<this.set.length;m++){m>0&&(this.formatted+="||");const w=this.set[m];for(let _=0;_<w.length;_++)_>0&&(this.formatted+=" "),this.formatted+=w[_].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(m){const _=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+m,A=r.get(_);if(A)return A;const I=this.options.loose,x=I?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];m=m.replace(x,k(this.options.includePrerelease)),o("hyphen replace",m),m=m.replace(c[l.COMPARATORTRIM],u),o("comparator trim",m),m=m.replace(c[l.TILDETRIM],d),o("tilde trim",m),m=m.replace(c[l.CARETTRIM],f),o("caret trim",m);let L=m.split(" ").map(z=>C(z,this.options)).join(" ").split(/\s+/).map(z=>R(z,this.options));I&&(L=L.filter(z=>(o("loose invalid filter",z,this.options),!!z.match(c[l.COMPARATORLOOSE])))),o("range list",L);const F=new Map,V=L.map(z=>new i(z,this.options));for(const z of V){if(g(z))return[z];F.set(z.value,z)}F.size>1&&F.has("")&&F.delete("");const q=[...F.values()];return r.set(_,q),q}intersects(m,w){if(!(m instanceof e))throw new TypeError("a Range is required");return this.set.some(_=>b(_,w)&&m.set.some(A=>b(A,w)&&_.every(I=>A.every(x=>I.intersects(x,w)))))}test(m){if(!m)return!1;if(typeof m=="string")try{m=new a(m,this.options)}catch{return!1}for(let w=0;w<this.set.length;w++)if(j(this.set[w],m,this.options))return!0;return!1}}Ff=e;const n=HV,r=new n,s=Im,i=wh(),o=gh,a=En,{safeRe:c,t:l,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:f}=Yl,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=ph,g=D=>D.value==="<0.0.0-0",y=D=>D.value==="",b=(D,m)=>{let w=!0;const _=D.slice();let A=_.pop();for(;w&&_.length;)w=_.every(I=>A.intersects(I,m)),A=_.pop();return w},C=(D,m)=>(D=D.replace(c[l.BUILD],""),o("comp",D,m),D=P(D,m),o("caret",D),D=S(D,m),o("tildes",D),D=U(D,m),o("xrange",D),D=M(D,m),o("stars",D),D),E=D=>!D||D.toLowerCase()==="x"||D==="*",S=(D,m)=>D.trim().split(/\s+/).map(w=>O(w,m)).join(" "),O=(D,m)=>{const w=m.loose?c[l.TILDELOOSE]:c[l.TILDE];return D.replace(w,(_,A,I,x,L)=>{o("tilde",D,_,A,I,x,L);let F;return E(A)?F="":E(I)?F=`>=${A}.0.0 <${+A+1}.0.0-0`:E(x)?F=`>=${A}.${I}.0 <${A}.${+I+1}.0-0`:L?(o("replaceTilde pr",L),F=`>=${A}.${I}.${x}-${L} <${A}.${+I+1}.0-0`):F=`>=${A}.${I}.${x} <${A}.${+I+1}.0-0`,o("tilde return",F),F})},P=(D,m)=>D.trim().split(/\s+/).map(w=>$(w,m)).join(" "),$=(D,m)=>{o("caret",D,m);const w=m.loose?c[l.CARETLOOSE]:c[l.CARET],_=m.includePrerelease?"-0":"";return D.replace(w,(A,I,x,L,F)=>{o("caret",D,A,I,x,L,F);let V;return E(I)?V="":E(x)?V=`>=${I}.0.0${_} <${+I+1}.0.0-0`:E(L)?I==="0"?V=`>=${I}.${x}.0${_} <${I}.${+x+1}.0-0`:V=`>=${I}.${x}.0${_} <${+I+1}.0.0-0`:F?(o("replaceCaret pr",F),I==="0"?x==="0"?V=`>=${I}.${x}.${L}-${F} <${I}.${x}.${+L+1}-0`:V=`>=${I}.${x}.${L}-${F} <${I}.${+x+1}.0-0`:V=`>=${I}.${x}.${L}-${F} <${+I+1}.0.0-0`):(o("no pr"),I==="0"?x==="0"?V=`>=${I}.${x}.${L}${_} <${I}.${x}.${+L+1}-0`:V=`>=${I}.${x}.${L}${_} <${I}.${+x+1}.0-0`:V=`>=${I}.${x}.${L} <${+I+1}.0.0-0`),o("caret return",V),V})},U=(D,m)=>(o("replaceXRanges",D,m),D.split(/\s+/).map(w=>T(w,m)).join(" ")),T=(D,m)=>{D=D.trim();const w=m.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return D.replace(w,(_,A,I,x,L,F)=>{o("xRange",D,_,A,I,x,L,F);const V=E(I),q=V||E(x),z=q||E(L),J=z;return A==="="&&J&&(A=""),F=m.includePrerelease?"-0":"",V?A===">"||A==="<"?_="<0.0.0-0":_="*":A&&J?(q&&(x=0),L=0,A===">"?(A=">=",q?(I=+I+1,x=0,L=0):(x=+x+1,L=0)):A==="<="&&(A="<",q?I=+I+1:x=+x+1),A==="<"&&(F="-0"),_=`${A+I}.${x}.${L}${F}`):q?_=`>=${I}.0.0${F} <${+I+1}.0.0-0`:z&&(_=`>=${I}.${x}.0${F} <${I}.${+x+1}.0-0`),o("xRange return",_),_})},M=(D,m)=>(o("replaceStars",D,m),D.trim().replace(c[l.STAR],"")),R=(D,m)=>(o("replaceGTE0",D,m),D.trim().replace(c[m.includePrerelease?l.GTE0PRE:l.GTE0],"")),k=D=>(m,w,_,A,I,x,L,F,V,q,z,J)=>(E(_)?w="":E(A)?w=`>=${_}.0.0${D?"-0":""}`:E(I)?w=`>=${_}.${A}.0${D?"-0":""}`:x?w=`>=${w}`:w=`>=${w}${D?"-0":""}`,E(V)?F="":E(q)?F=`<${+V+1}.0.0-0`:E(z)?F=`<${V}.${+q+1}.0-0`:J?F=`<=${V}.${q}.${z}-${J}`:D?F=`<${V}.${q}.${+z+1}-0`:F=`<=${F}`,`${w} ${F}`.trim()),j=(D,m,w)=>{for(let _=0;_<D.length;_++)if(!D[_].test(m))return!1;if(m.prerelease.length&&!w.includePrerelease){for(let _=0;_<D.length;_++)if(o(D[_].semver),D[_].semver!==i.ANY&&D[_].semver.prerelease.length>0){const A=D[_].semver;if(A.major===m.major&&A.minor===m.minor&&A.patch===m.patch)return!0}return!1}return!0};return Ff}var zf,iv;function wh(){if(iv)return zf;iv=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,d){if(d=n(d),u instanceof e){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const d=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],f=u.match(d);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return i(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||i(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||i(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}zf=e;const n=Im,{safeRe:r,t:s}=Yl,i=U1,o=gh,a=En,c=kr();return zf}const qV=kr(),VV=(t,e,n)=>{try{e=new qV(e,n)}catch{return!1}return e.test(t)};var yh=VV;const GV=kr(),KV=(t,e)=>new GV(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var YV=KV;const QV=En,ZV=kr(),JV=(t,e,n)=>{let r=null,s=null,i=null;try{i=new ZV(e,n)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||s.compare(o)===-1)&&(r=o,s=new QV(r,n))}),r};var XV=JV;const eG=En,tG=kr(),nG=(t,e,n)=>{let r=null,s=null,i=null;try{i=new tG(e,n)}catch{return null}return t.forEach(o=>{i.test(o)&&(!r||s.compare(o)===1)&&(r=o,s=new eG(r,n))}),r};var rG=nG;const Wf=En,sG=kr(),ov=mh,iG=(t,e)=>{t=new sG(t,e);let n=new Wf("0.0.0");if(t.test(n)||(n=new Wf("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const s=t.set[r];let i=null;s.forEach(o=>{const a=new Wf(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||ov(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!n||ov(n,i))&&(n=i)}return n&&t.test(n)?n:null};var oG=iG;const aG=kr(),cG=(t,e)=>{try{return new aG(t,e).range||"*"}catch{return null}};var lG=cG;const uG=En,$1=wh(),{ANY:dG}=$1,hG=kr(),fG=yh,av=mh,cv=Sm,pG=xm,gG=Tm,mG=(t,e,n,r)=>{t=new uG(t,r),e=new hG(e,r);let s,i,o,a,c;switch(n){case">":s=av,i=pG,o=cv,a=">",c=">=";break;case"<":s=cv,i=gG,o=av,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fG(t,e,r))return!1;for(let l=0;l<e.set.length;++l){const u=e.set[l];let d=null,f=null;if(u.forEach(h=>{h.semver===dG&&(h=new $1(">=0.0.0")),d=d||h,f=f||h,s(h.semver,d.semver,r)?d=h:o(h.semver,f.semver,r)&&(f=h)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&i(t,f.semver))return!1;if(f.operator===c&&o(t,f.semver))return!1}return!0};var Om=mG;const wG=Om,yG=(t,e,n)=>wG(t,e,">",n);var bG=yG;const vG=Om,EG=(t,e,n)=>vG(t,e,"<",n);var _G=EG;const lv=kr(),AG=(t,e,n)=>(t=new lv(t,n),e=new lv(e,n),t.intersects(e,n));var CG=AG;const IG=yh,NG=Rr;var SG=(t,e,n)=>{const r=[];let s=null,i=null;const o=t.sort((u,d)=>NG(u,d,n));for(const u of o)IG(u,e,n)?(i=u,s||(s=u)):(i&&r.push([s,i]),i=null,s=null);s&&r.push([s,null]);const a=[];for(const[u,d]of r)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);const c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e};const uv=kr(),Dm=wh(),{ANY:Hf}=Dm,lc=yh,Rm=Rr,TG=(t,e,n={})=>{if(t===e)return!0;t=new uv(t,n),e=new uv(e,n);let r=!1;e:for(const s of t.set){for(const i of e.set){const o=OG(s,i,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},xG=[new Dm(">=0.0.0-0")],dv=[new Dm(">=0.0.0")],OG=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Hf){if(e.length===1&&e[0].semver===Hf)return!0;n.includePrerelease?t=xG:t=dv}if(e.length===1&&e[0].semver===Hf){if(n.includePrerelease)return!0;e=dv}const r=new Set;let s,i;for(const h of t)h.operator===">"||h.operator===">="?s=hv(s,h,n):h.operator==="<"||h.operator==="<="?i=fv(i,h,n):r.add(h.semver);if(r.size>1)return null;let o;if(s&&i){if(o=Rm(s.semver,i.semver,n),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const h of r){if(s&&!lc(h,String(s),n)||i&&!lc(h,String(i),n))return null;for(const p of e)if(!lc(h,String(p),n))return!1;return!0}let a,c,l,u,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const h of e){if(u=u||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(a=hv(s,h,n),a===h&&a!==s)return!1}else if(s.operator===">="&&!lc(s.semver,String(h),n))return!1}if(i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(c=fv(i,h,n),c===h&&c!==i)return!1}else if(i.operator==="<="&&!lc(i.semver,String(h),n))return!1}if(!h.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&u&&!s&&o!==0||f||d)},hv=(t,e,n)=>{if(!t)return e;const r=Rm(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},fv=(t,e,n)=>{if(!t)return e;const r=Rm(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var DG=TG;const qf=Yl,pv=ph,RG=En,gv=P1,kG=La,PG=jq,MG=Wq,LG=qq,UG=Gq,$G=Qq,BG=Xq,jG=nV,FG=iV,zG=Rr,WG=lV,HG=hV,qG=Nm,VG=mV,GG=bV,KG=mh,YG=Sm,QG=M1,ZG=L1,JG=Tm,XG=xm,eK=U1,tK=zV,nK=wh(),rK=kr(),sK=yh,iK=YV,oK=XV,aK=rG,cK=oG,lK=lG,uK=Om,dK=bG,hK=_G,fK=CG,pK=SG,gK=DG;var mK={parse:kG,valid:PG,clean:MG,inc:LG,diff:UG,major:$G,minor:BG,patch:jG,prerelease:FG,compare:zG,rcompare:WG,compareLoose:HG,compareBuild:qG,sort:VG,rsort:GG,gt:KG,lt:YG,eq:QG,neq:ZG,gte:JG,lte:XG,cmp:eK,coerce:tK,Comparator:nK,Range:rK,satisfies:sK,toComparators:iK,maxSatisfying:oK,minSatisfying:aK,minVersion:cK,validRange:lK,outside:uK,gtr:dK,ltr:hK,intersects:fK,simplifyRange:pK,subset:gK,SemVer:RG,re:qf.re,src:qf.src,tokens:qf.t,SEMVER_SPEC_VERSION:pv.SEMVER_SPEC_VERSION,RELEASE_TYPES:pv.RELEASE_TYPES,compareIdentifiers:gv.compareIdentifiers,rcompareIdentifiers:gv.rcompareIdentifiers};const mv=Xr(mK);var yg=function(){return yg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},yg.apply(this,arguments)},Ni,Qt;(function(t){t.blue="blue",t.nanoS="nanoS",t.nanoSP="nanoSP",t.nanoX="nanoX",t.nanoFTS="nanoFTS"})(Qt||(Qt={}));var bg=(Ni={},Ni[Qt.blue]={id:Qt.blue,productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(t){return 4*1024}},Ni[Qt.nanoS]={id:Qt.nanoS,productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(t){var e;return mv.lt((e=mv.coerce(t))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},Ni[Qt.nanoSP]={id:Qt.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(t){return 32}},Ni[Qt.nanoX]={id:Qt.nanoX,productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(t){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},Ni[Qt.nanoFTS]={id:Qt.nanoFTS,productName:"LedgerNanoFTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2*1024*1024,masks:[857735168],getBlockSize:function(t){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},Ni);Qt.blue,Qt.nanoS,Qt.nanoSP,Qt.nanoX,Qt.nanoFTS;var wv=Object.values(bg),B1=11415,yv=function(t){var e=wv.find(function(s){return s.legacyUsbProductId===t});if(e)return e;var n=t>>8,r=wv.find(function(s){return s.productIdMM===n});return r},wK=[],bv={};for(var yK in bg){var vv=bg[yK],Vf=vv.bluetoothSpec;if(Vf)for(var Gf=0;Gf<Vf.length;Gf++){var Pu=Vf[Gf];wK.push(Pu.serviceUuid),bv[Pu.serviceUuid]=bv[Pu.serviceUuid.replace(/-/g,"")]=yg({deviceModel:vv},Pu)}}let bK=0;const Xs=[],Ev=(t,e,n)=>{const r={type:t,id:String(++bK),date:new Date};e&&(r.message=e),EK(r)},vK=t=>(Xs.push(t),()=>{const e=Xs.indexOf(t);e!==-1&&(Xs[e]=Xs[Xs.length-1],Xs.pop())});function EK(t){for(let e=0;e<Xs.length;e++)try{Xs[e](t)}catch(n){console.error(n)}}typeof window<"u"&&(window.__ledgerLogsListen=vK);var _K=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ws=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})},ys=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},AK=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},CK=[{vendorId:B1}],IK=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},kd=function(){var t=navigator.hid;if(!t)throw new qi("navigator.hid is not supported","HIDNotSupported");return t};function j1(){return ws(this,void 0,void 0,function(){var t;return ys(this,function(e){switch(e.label){case 0:return[4,kd().requestDevice({filters:CK})];case 1:return t=e.sent(),Array.isArray(t)?[2,t]:[2,[t]]}})})}function vg(){return ws(this,void 0,void 0,function(){var t;return ys(this,function(e){switch(e.label){case 0:return[4,kd().getDevices()];case 1:return t=e.sent(),[2,t.filter(function(n){return n.vendorId===B1})]}})})}function NK(){return ws(this,void 0,void 0,function(){var t,e;return ys(this,function(n){switch(n.label){case 0:return[4,vg()];case 1:return t=n.sent(),t.length>0?[2,t[0]]:[4,j1()];case 2:return e=n.sent(),[2,e[0]]}})})}var SK=function(t){_K(e,t);function e(n){var r=t.call(this)||this;return r.channel=Math.floor(Math.random()*65535),r.packetSize=64,r.inputs=[],r.read=function(){return r.inputs.length?Promise.resolve(r.inputs.shift()):new Promise(function(s){r.inputCallback=s})},r.onInputReport=function(s){var i=Buffer.from(s.data.buffer);r.inputCallback?(r.inputCallback(i),r.inputCallback=null):r.inputs.push(i)},r._disconnectEmitted=!1,r._emitDisconnect=function(s){r._disconnectEmitted||(r._disconnectEmitted=!0,r.emit("disconnect",s))},r.exchange=function(s){return ws(r,void 0,void 0,function(){var i,o=this;return ys(this,function(a){switch(a.label){case 0:return[4,this.exchangeAtomicImpl(function(){return ws(o,void 0,void 0,function(){var c,l,u,d,f,h,p,g,y;return ys(this,function(b){switch(b.label){case 0:c=this,l=c.channel,u=c.packetSize,Ev("apdu","=> "+s.toString("hex")),d=Cq(l,u),f=d.makeBlocks(s),h=0,b.label=1;case 1:return h<f.length?[4,this.device.sendReport(0,f[h])]:[3,4];case 2:b.sent(),b.label=3;case 3:return h++,[3,1];case 4:return(p=d.getReducedResult(g))?[3,6]:[4,this.read()];case 5:return y=b.sent(),g=d.reduceResponse(g,y),[3,4];case 6:return Ev("apdu","<= "+p.toString("hex")),[2,p]}})})}).catch(function(c){throw c&&c.message&&c.message.includes("write")?(o._emitDisconnect(c),new T1(c.message)):c})];case 1:return i=a.sent(),[2,i]}})})},r.device=n,r.deviceModel=typeof n.productId=="number"?yv(n.productId):void 0,n.addEventListener("inputreport",r.onInputReport),r}return e.request=function(){return ws(this,void 0,void 0,function(){var n,r;return ys(this,function(s){switch(s.label){case 0:return[4,j1()];case 1:return n=AK.apply(void 0,[s.sent(),1]),r=n[0],[2,e.open(r)]}})})},e.openConnected=function(){return ws(this,void 0,void 0,function(){var n;return ys(this,function(r){switch(r.label){case 0:return[4,vg()];case 1:return n=r.sent(),n.length===0?[2,null]:[2,e.open(n[0])]}})})},e.open=function(n){return ws(this,void 0,void 0,function(){var r,s;return ys(this,function(i){switch(i.label){case 0:return[4,n.open()];case 1:return i.sent(),r=new e(n),s=function(o){n===o.device&&(kd().removeEventListener("disconnect",s),r._emitDisconnect(new S1))},kd().addEventListener("disconnect",s),[2,r]}})})},e.prototype.close=function(){return ws(this,void 0,void 0,function(){return ys(this,function(n){switch(n.label){case 0:return[4,this.exchangeBusyPromise];case 1:return n.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return n.sent(),[2]}})})},e.prototype.setScrambleKey=function(){},e.isSupported=IK,e.list=vg,e.listen=function(n){var r=!1;NK().then(function(i){if(!i)n.error(new gg("Access denied to use Ledger device"));else if(!r){var o=typeof i.productId=="number"?yv(i.productId):void 0;n.next({type:"add",descriptor:i,deviceModel:o}),n.complete()}},function(i){n.error(new gg(i.message))});function s(){r=!0}return{unsubscribe:s}},e}(_q),bh,ke,F1,Ui,_v,z1,W1,H1,km,Eg,_g,Ol={},q1=[],TK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ql=Array.isArray;function Es(t,e){for(var n in e)t[n]=e[n];return t}function Pm(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ag(t,e,n){var r,s,i,o={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?bh.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)o[i]===void 0&&(o[i]=t.defaultProps[i]);return ed(t,o,r,s,null)}function ed(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++F1,__i:-1,__u:0};return s==null&&ke.vnode!=null&&ke.vnode(i),i}function va(t){return t.children}function Is(t,e){this.props=t,this.context=e}function Ea(t,e){if(e==null)return t.__?Ea(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Ea(t):null}function V1(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return V1(t)}}function Av(t){(!t.__d&&(t.__d=!0)&&Ui.push(t)&&!Pd.__r++||_v!=ke.debounceRendering)&&((_v=ke.debounceRendering)||z1)(Pd)}function Pd(){for(var t,e,n,r,s,i,o,a=1;Ui.length;)Ui.length>a&&Ui.sort(W1),t=Ui.shift(),a=Ui.length,t.__d&&(n=void 0,r=void 0,s=(r=(e=t).__v).__e,i=[],o=[],e.__P&&((n=Es({},r)).__v=r.__v+1,ke.vnode&&ke.vnode(n),Mm(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,i,s??Ea(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,Y1(i,n,o),r.__e=r.__=null,n.__e!=s&&V1(n)));Pd.__r=0}function G1(t,e,n,r,s,i,o,a,c,l,u){var d,f,h,p,g,y,b,C=r&&r.__k||q1,E=e.length;for(c=xK(n,e,C,c,E),d=0;d<E;d++)(h=n.__k[d])!=null&&(f=h.__i==-1?Ol:C[h.__i]||Ol,h.__i=d,y=Mm(t,h,f,s,i,o,a,c,l,u),p=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Lm(f.ref,null,h),u.push(h.ref,h.__c||p,h)),g==null&&p!=null&&(g=p),(b=!!(4&h.__u))||f.__k===h.__k?c=K1(h,c,t,b):typeof h.type=="function"&&y!==void 0?c=y:p&&(c=p.nextSibling),h.__u&=-7);return n.__e=g,c}function xK(t,e,n,r,s){var i,o,a,c,l,u=n.length,d=u,f=0;for(t.__k=new Array(s),i=0;i<s;i++)(o=e[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=t.__k[i]=ed(null,o,null,null,null):Ql(o)?o=t.__k[i]=ed(va,{children:o},null,null,null):o.constructor==null&&o.__b>0?o=t.__k[i]=ed(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):t.__k[i]=o,c=i+f,o.__=t,o.__b=t.__b+1,(l=o.__i=OK(o,n,c,d))!=-1&&(d--,(a=n[l])&&(a.__u|=2)),a==null||a.__v==null?(l==-1&&(s>u?f--:s<u&&f++),typeof o.type!="function"&&(o.__u|=4)):l!=c&&(l==c-1?f--:l==c+1?f++:(l>c?f--:f++,o.__u|=4))):t.__k[i]=null;if(d)for(i=0;i<u;i++)(a=n[i])!=null&&!(2&a.__u)&&(a.__e==r&&(r=Ea(a)),Z1(a,a));return r}function K1(t,e,n,r){var s,i;if(typeof t.type=="function"){for(s=t.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=t,e=K1(s[i],e,n,r));return e}t.__e!=e&&(r&&(e&&t.type&&!e.parentNode&&(e=Ea(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Md(t,e){return e=e||[],t==null||typeof t=="boolean"||(Ql(t)?t.some(function(n){Md(n,e)}):e.push(t)),e}function OK(t,e,n,r){var s,i,o,a=t.key,c=t.type,l=e[n],u=l!=null&&(2&l.__u)==0;if(l===null&&a==null||u&&a==l.key&&c==l.type)return n;if(r>(u?1:0)){for(s=n-1,i=n+1;s>=0||i<e.length;)if((l=e[o=s>=0?s--:i++])!=null&&!(2&l.__u)&&a==l.key&&c==l.type)return o}return-1}function Cv(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||TK.test(e)?n:n+"px"}function Mu(t,e,n,r,s){var i,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Cv(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Cv(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(H1,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=km,t.addEventListener(e,i?_g:Eg,i)):t.removeEventListener(e,i?_g:Eg,i);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Iv(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=km++;else if(e.t<n.u)return;return n(ke.event?ke.event(e):e)}}}function Mm(t,e,n,r,s,i,o,a,c,l){var u,d,f,h,p,g,y,b,C,E,S,O,P,$,U,T,M,R=e.type;if(e.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=e.__e=n.__e]),(u=ke.__b)&&u(e);e:if(typeof R=="function")try{if(b=e.props,C="prototype"in R&&R.prototype.render,E=(u=R.contextType)&&r[u.__c],S=u?E?E.props.value:u.__:r,n.__c?y=(d=e.__c=n.__c).__=d.__E:(C?e.__c=d=new R(b,S):(e.__c=d=new Is(b,S),d.constructor=R,d.render=RK),E&&E.sub(d),d.state||(d.state={}),d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),C&&d.__s==null&&(d.__s=d.state),C&&R.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Es({},d.__s)),Es(d.__s,R.getDerivedStateFromProps(b,d.__s))),h=d.props,p=d.state,d.__v=e,f)C&&R.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),C&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(C&&R.getDerivedStateFromProps==null&&b!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,S),e.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,S)===!1){for(e.__v!=n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(k){k&&(k.__=e)}),O=0;O<d._sb.length;O++)d.__h.push(d._sb[O]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,S),C&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,g)})}if(d.context=S,d.props=b,d.__P=t,d.__e=!1,P=ke.__r,$=0,C){for(d.state=d.__s,d.__d=!1,P&&P(e),u=d.render(d.props,d.state,d.context),U=0;U<d._sb.length;U++)d.__h.push(d._sb[U]);d._sb=[]}else do d.__d=!1,P&&P(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++$<25);d.state=d.__s,d.getChildContext!=null&&(r=Es(Es({},r),d.getChildContext())),C&&!f&&d.getSnapshotBeforeUpdate!=null&&(g=d.getSnapshotBeforeUpdate(h,p)),T=u,u!=null&&u.type===va&&u.key==null&&(T=Q1(u.props.children)),a=G1(t,Ql(T)?T:[T],e,n,r,s,i,o,a,c,l),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),y&&(d.__E=d.__=null)}catch(k){if(e.__v=null,c||i!=null)if(k.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,e.__e=a}else{for(M=i.length;M--;)Pm(i[M]);Cg(e)}else e.__e=n.__e,e.__k=n.__k,k.then||Cg(e);ke.__e(k,e,n)}else i==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=DK(n.__e,e,n,r,s,i,o,c,l);return(u=ke.diffed)&&u(e),128&e.__u?void 0:a}function Cg(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Cg)}function Y1(t,e,n){for(var r=0;r<n.length;r++)Lm(n[r],n[++r],n[++r]);ke.__c&&ke.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(i){i.call(s)})}catch(i){ke.__e(i,s.__v)}})}function Q1(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ql(t)?t.map(Q1):Es({},t)}function DK(t,e,n,r,s,i,o,a,c){var l,u,d,f,h,p,g,y=n.props||Ol,b=e.props,C=e.type;if(C=="svg"?s="http://www.w3.org/2000/svg":C=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!C&&(C?h.localName==C:h.nodeType==3)){t=h,i[l]=null;break}}if(t==null){if(C==null)return document.createTextNode(b);t=document.createElementNS(s,C,b.is&&b),a&&(ke.__m&&ke.__m(e,i),a=!1),i=null}if(C==null)y===b||a&&t.data==b||(t.data=b);else{if(i=i&&bh.call(t.childNodes),!a&&i!=null)for(y={},l=0;l<t.attributes.length;l++)y[(h=t.attributes[l]).name]=h.value;for(l in y)if(h=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=h;else if(!(l in b)){if(l=="value"&&"defaultValue"in b||l=="checked"&&"defaultChecked"in b)continue;Mu(t,l,null,h,s)}}for(l in b)h=b[l],l=="children"?f=h:l=="dangerouslySetInnerHTML"?u=h:l=="value"?p=h:l=="checked"?g=h:a&&typeof h!="function"||y[l]===h||Mu(t,l,h,y[l],s);if(u)a||d&&(u.__html==d.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(d&&(t.innerHTML=""),G1(e.type=="template"?t.content:t,Ql(f)?f:[f],e,n,r,C=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,o,i?i[0]:n.__k&&Ea(n,0),a,c),i!=null)for(l=i.length;l--;)Pm(i[l]);a||(l="value",C=="progress"&&p==null?t.removeAttribute("value"):p!=null&&(p!==t[l]||C=="progress"&&!p||C=="option"&&p!=y[l])&&Mu(t,l,p,y[l],s),l="checked",g!=null&&g!=t[l]&&Mu(t,l,g,y[l],s))}return t}function Lm(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){ke.__e(s,n)}}function Z1(t,e,n){var r,s;if(ke.unmount&&ke.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Lm(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){ke.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&Z1(r[s],e,n||typeof t.type!="function");n||Pm(t.__e),t.__c=t.__=t.__e=void 0}function RK(t,e,n){return this.constructor(t,n)}function kK(t,e,n){var r,s,i,o;e==document&&(e=document.documentElement),ke.__&&ke.__(t,e),s=(r=!1)?null:e.__k,i=[],o=[],Mm(e,t=e.__k=Ag(va,null,[t]),s||Ol,Ol,e.namespaceURI,s?null:e.firstChild?bh.call(e.childNodes):null,i,s?s.__e:e.firstChild,r,o),Y1(i,t,o)}bh=q1.slice,ke={__e:function(t,e,n,r){for(var s,i,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),o=s.__d),o)return s.__E=s}catch(a){t=a}throw t}},F1=0,Is.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Es({},this.state),typeof t=="function"&&(t=t(Es({},n),this.props)),t&&Es(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Av(this))},Is.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Av(this))},Is.prototype.render=va,Ui=[],z1=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,W1=function(t,e){return t.__v.__b-e.__v.__b},Pd.__r=0,H1=/(PointerCapture)$|Capture$/i,km=0,Eg=Iv(!1),_g=Iv(!0);var PK=0;function ie(t,e,n,r,s,i){e||(e={});var o,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?o=e[a]:c[a]=e[a];var l={type:t,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--PK,__i:-1,__u:0,__source:s,__self:i};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return ke.vnode&&ke.vnode(l),l}var _a,mt,Kf,Nv,Ld=0,J1=[],bt=ke,Sv=bt.__b,Tv=bt.__r,xv=bt.diffed,Ov=bt.__c,Dv=bt.unmount,Rv=bt.__;function vh(t,e){bt.__h&&bt.__h(mt,t,Ld||e),Ld=0;var n=mt.__H||(mt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Yf(t){return Ld=1,MK(X1,t)}function MK(t,e,n){var r=vh(_a++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):X1(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,a);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=mt,!mt.__f)){var s=function(a,c,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!i||i.call(this,a,c,l);var d=r.__c.props!==a;return u.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(d=!0)}}),i&&i.call(this,a,c,l)||d};mt.__f=!0;var i=mt.shouldComponentUpdate,o=mt.componentWillUpdate;mt.componentWillUpdate=function(a,c,l){if(this.__e){var u=i;i=void 0,s(a,c,l),i=u}o&&o.call(this,a,c,l)},mt.shouldComponentUpdate=s}return r.__N||r.__}function kv(t,e){var n=vh(_a++,3);!bt.__s&&Um(n.__H,e)&&(n.__=t,n.u=e,mt.__H.__h.push(n))}function LK(t,e){var n=vh(_a++,4);!bt.__s&&Um(n.__H,e)&&(n.__=t,n.u=e,mt.__h.push(n))}function UK(t){return Ld=5,Eh(function(){return{current:t}},[])}function Eh(t,e){var n=vh(_a++,7);return Um(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function $K(){for(var t;t=J1.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(td),t.__H.__h.forEach(Ig),t.__H.__h=[]}catch(e){t.__H.__h=[],bt.__e(e,t.__v)}}bt.__b=function(t){mt=null,Sv&&Sv(t)},bt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Rv&&Rv(t,e)},bt.__r=function(t){Tv&&Tv(t),_a=0;var e=(mt=t.__c).__H;e&&(Kf===mt?(e.__h=[],mt.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(td),e.__h.forEach(Ig),e.__h=[],_a=0)),Kf=mt},bt.diffed=function(t){xv&&xv(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(J1.push(e)!==1&&Nv===bt.requestAnimationFrame||((Nv=bt.requestAnimationFrame)||BK)($K)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Kf=mt=null},bt.__c=function(t,e){e.some(function(n){try{n.__h.forEach(td),n.__h=n.__h.filter(function(r){return!r.__||Ig(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],bt.__e(r,n.__v)}}),Ov&&Ov(t,e)},bt.unmount=function(t){Dv&&Dv(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{td(r)}catch(s){e=s}}),n.__H=void 0,e&&bt.__e(e,n.__v))};var Pv=typeof requestAnimationFrame=="function";function BK(t){var e,n=function(){clearTimeout(r),Pv&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);Pv&&(e=requestAnimationFrame(n))}function td(t){var e=mt,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),mt=e}function Ig(t){var e=mt;t.__c=t.__(),mt=e}function Um(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function X1(t,e){return typeof e=="function"?e(t):e}function jK(t,e){for(var n in e)t[n]=e[n];return t}function Mv(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function Lv(t,e){this.props=t,this.context=e}(Lv.prototype=new Is).isPureReactComponent=!0,Lv.prototype.shouldComponentUpdate=function(t,e){return Mv(this.props,t)||Mv(this.state,e)};var Uv=ke.__b;ke.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Uv&&Uv(t)};var FK=ke.__e;ke.__e=function(t,e,n,r){if(t.then){for(var s,i=e;i=i.__;)if((s=i.__c)&&s.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),s.__c(t,e)}FK(t,e,n,r)};var $v=ke.unmount;function eI(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=jK({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return eI(r,e,n)})),t}function tI(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return tI(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Qf(){this.__u=0,this.o=null,this.__b=null}function nI(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Lu(){this.i=null,this.l=null}ke.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),$v&&$v(t)},(Qf.prototype=new Is).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var s=nI(r.__v),i=!1,o=function(){i||(i=!0,n.__R=null,s?s(a):a())};n.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=tI(c,c.__c.__P,c.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.o.pop();)l.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},Qf.prototype.componentWillUnmount=function(){this.o=[]},Qf.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=eI(this.__b,n,r.__O=r.__P)}this.__b=null}var s=e.__a&&Ag(va,null,t.fallback);return s&&(s.__u&=-33),[Ag(va,null,e.__a?null:t.children),s]};var Bv=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Lu.prototype=new Is).__a=function(t){var e=this,n=nI(e.__v),r=e.l.get(t);return r[0]++,function(s){var i=function(){e.props.revealOrder?(r.push(s),Bv(e,t,r)):s()};n?n(i):i()}},Lu.prototype.render=function(t){this.i=null,this.l=new Map;var e=Md(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Lu.prototype.componentDidUpdate=Lu.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Bv(t,n,e)})};var zK=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,WK=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,HK=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,qK=/[A-Z0-9]/g,VK=typeof document<"u",GK=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function $m(t,e,n){return e.__k==null&&(e.textContent=""),kK(t,e),typeof n=="function"&&n(),t?t.__c:null}Is.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Is.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var jv=ke.event;function KK(){}function YK(){return this.cancelBubble}function QK(){return this.defaultPrevented}ke.event=function(t){return jv&&(t=jv(t)),t.persist=KK,t.isPropagationStopped=YK,t.isDefaultPrevented=QK,t.nativeEvent=t};var ZK={enumerable:!1,configurable:!0,get:function(){return this.class}},Fv=ke.vnode;ke.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,s={},i=r.indexOf("-")===-1;for(var o in n){var a=n[o];if(!(o==="value"&&"defaultValue"in n&&a==null||VK&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var c=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":c==="translate"&&a==="no"?a=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?o="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||GK(n.type)?c==="onfocus"?o="onfocusin":c==="onblur"?o="onfocusout":HK.test(o)&&(o=c):c=o="oninput":i&&WK.test(o)?o=o.replace(qK,"-$&").toLowerCase():a===null&&(a=void 0),c==="oninput"&&s[o=c]&&(o="oninputCapture"),s[o]=a}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Md(n.children).forEach(function(l){l.props.selected=s.value.indexOf(l.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=Md(n.children).forEach(function(l){l.props.selected=s.multiple?s.defaultValue.indexOf(l.props.value)!=-1:s.defaultValue==l.props.value})),n.class&&!n.className?(s.class=n.class,Object.defineProperty(s,"className",ZK)):(n.className&&!n.class||n.class&&n.className)&&(s.class=s.className=n.className),e.props=s}(t),t.$$typeof=zK,Fv&&Fv(t)};var zv=ke.__r;ke.__r=function(t){zv&&zv(t),t.__c};var Wv=ke.diffed;ke.diffed=function(t){Wv&&Wv(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};const Si={en:{loadingTitle:"Log in with Ledger",loadingTip0:"Please connect to your Ledger device and open Tron App.",loadingTip4:"Preparing your Ledger device...",checkTitle:"Please check if the address below is the same one shown on your Ledger device",checkTip0:"If it is: press Approve button to confirm the address",checkTip1:"If it isn't: select Reject on your Ledger device and refresh this page",confirmTip:"Please confirm on your Ledger",selectTitle:"Select account",selectTip:"Please select an account to use",cancel:"Cancel",confirm:"Confirm",address:"Address",balance:"Available Balance",loadMore:"Load More"},"zh-CN":{loadingTitle:"Ledger ",loadingTip0:" Ledger  TRON ",loadingTip4:"Ledger ......",checkTitle:" Ledger ",checkTip0:" Approve ",checkTip1:" Ledger  Reject ",confirmTip:" Ledger ",selectTitle:"",selectTip:"",cancel:"",confirm:"",address:"",balance:"",loadMore:""},"zh-TC":{loadingTitle:"Ledger ",loadingTip0:" Ledger  TRON ",loadingTip4:"Ledger ......",checkTitle:" Ledger ",checkTip0:" Approve ",checkTip1:" Ledger  Reject ",confirmTip:" Ledger ",selectTitle:"",selectTip:"",cancel:"",confirm:"",address:"",balance:"",loadMore:""}};function Ua(){const e=new URLSearchParams(globalThis.location.search).get("lang"),n=globalThis.localStorage.getItem("lang"),r=(e||n||"").toLowerCase(),s=(globalThis.navigator.language||"").toLowerCase();let i;["zh-tw","zh-hk","zh-tc"].includes(s)?i=Si["zh-TC"]:["zh","zh-cn"].includes(s)?i=Si["zh-CN"]:s.includes("en")&&(i=Si.en);let o=i;return r&&(["zh-tw","zh-hk","zh-tc"].includes(r)?o=Si["zh-TC"]:["zh","zh-cn"].includes(r)?o=Si["zh-CN"]:r.includes("en")&&(o=Si.en)),o||Si.en}function rI(){return ie("div",{children:ie("img",{style:{width:"5vw",marginBottom:"1vw"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAYAAACLz2ctAAAAAXNSR0IArs4c6QAAFMhJREFUeAHtXXuMFEUeruW5PJbwFEVQjAtcvBCJmoASiUG4O3ICioBiEM5gNPgHJubERzw2HuApHOrxh3gcRLISlA2eghLfiCTKGgNBucNDFgiKILsIeyy77LI87vua7rmZ2Zme7pl+VPf8Kunp7urq+v3qq29+9eyqEiUuBYGysrK+586dG3bx4kXr6FdSUlKGQGXwM868t67Nlxvg1wC/Btwb1zzzHv51OPby6NChw96Ghobj5jtyAgIlxYpC//79u9XX148GSW4ABsOSjt4+Y3IC8e+1DhBzZ8+ePb84duxYo89ytYy+aAhYXl7e+fDhw6OQC2NBOh4jcd1Rk1xpBRG/wrEF+mwZOHBgdU1NTYsmuvmqRqwJ2Llz5yEg2lRk7O043wIku/iKpneRn4HOX0LnT3He0NLSss+7qPWKKXYE7NGjR29k2D3IvPsB9c16wZ23NttBxNfxh1p/6tQpFuGxcbEg4I033thx9+7dv0cm3Q/i3YHc6RSbHEpNyFmk8T2k8fXhw4dv3rFjR2vq4+jdRZqA3bp1648W62PIkDmAvk/04C9I419AxtVoWb/Y2Nh4rKCYQnw5kgTs0qXLoAsXLswH8R4EdqUh4qeD6GYQcVW7du2WnDlz5kcdFHKjQ6QIiDpQORL3JIg3C2ddWrBu8PYzLFvSlRDwPOrANX4K8jLuSBDQbM0+i4RPx9HeSwBiGNd5pKkKZKyIQutZ68xEf1iXs2fPVsDirQWoI3C0iyFhvE4SMRqO46GOHTt2vvzyy6vRcj7ntRCv4tPWAsLqsTW7HOS7xqvEFmM8sIQHke55sIbv6Zh+7QhYWlp6NUj3NxyTdQQsqjqBiBtxPNrc3HxIpzRoU6RNmzatfadOnZ5E63aPkM97ihBTYkuMibX3EvKLUQsL2LVr1yvOnz+/DiDdll8y5C03CMASbm3fvv19TU1NR92850fY0AmIut54JGwtyHeZHwmUODMjABLW4slM1A0/zhwiGN/QimAWA6jvLQLxPhDyBZPZyVKIObFnHoRZJIdiAVHkDkCR+wYAGJMMilyHgwCs4TYUyTNQJB8JWoPACYhhtJGoDL8L8vULOrEiLzsCIGEdhvMmYjjvq+yhvH8SKAFR35sA4m1AMrp6nxSJ0QMEmkDEqagXvu9BXI6iCKw5jrrGTJBvPbTq7EgzCRQGAhxfvwcjKAcxy+jbIBQIhICwfJwytQIJCkReEMDFWEY75NVdmObVgHr6dr/T6WsrGAkpAfmW4LwMCQm0uPcbuJjHX8I8M/PO13zzLXKSD8XuP3CeE/PMinXyUCdcheG7h3C+6EdCfbOAIN8LQj4/sizYOJGHDzIv/ZLqS53MrPM965fSEm/gCIz2q07oOQHN1i4bHL4V74HDLwKJwG/QOt7vdevYU5LA8rGfbxOU7SB5FksEzqEuOMnLfkLPCMgRDjTb+WW/dDLHknuJRDVh2G6sVyMmnhDQHNvdBesnw2uJfIrvBaxgHUg4woux44JbwZxJYU4sEPLFl3MpKaOhYZ57MYum4EbIgQMHFkIhLoMhrrgQuHrfvn3t0ShhtStvV1ARjEbHeJDvA0gv2JLmnQJ5MUwELqA4/l0hk1rzJqA5jZ71PpnJHCYFQpYNAtaa9cG8pvfnZbnMeh+/4RDyhUyAsMWTA6gPrsu3PpiXBeSXVUj4X8JOvMjXCoGnsIjA8241ck1AjHRczc/7IEj6+9yiHe/wTZhRfZ3b745dF8EwucuFfPFmUp6p62pyw9XrriwgWr13QMi7riRI4KJCAI2SiWgVO14GxLEF5EJBQJLWT5wgYIfAcpMrdmESzxxbQNT9FqLu90ziTc0uMF1I8UADSV155ZUKuir8G40D/0j1ww8/KLTWFCy4I80ZF7qaFMA03nP0kk+BUK9StbW1hu5MQ2ur3ivzoi64CDr/yQkcjgiIoperzf8LEWq19jL6nxQWJVeTJk1Sw4YNM66x/4dxn5z4kydPqsrKSrV27Vr17be5v7Xp3r27mj17tho9erS6++67k6MK5fr48eNq48aNhuzTp0+rn376Sb355psJUoailL3QFvz5h+OPn3N1f0cEhFVZB3kz7GUG9xT/MDV48GB12223qblz5yos2G1YulwaVFdXq/Hjxyt0F9gGZbybNm1S+OPZhgvz4XfffafWrVunqqqq1KFDhxxb9gB1fgM435dLXk4CIhPKYf3+g4gKHjfOpYyT55gUqUaNGqWWLVtmEI9kdOpYjA0dOlRhKpHtK3feeadav55fkOrvsPmOevzxx9XmzZsVqxoaufOwgr+CTrbLBTvJPXY6a0E+WqQpU6aoV155RV1//fXKDfmYMRg4d2QpWH+MimMdlXjMmjVLseqgkSNnyB1bZ0tArkYP6zfLNoaAHrK+x+KzoqLCsGIBiY2EmF69eqlFixYZf042wnRx5A45ZKePLQFhCebjZS1Wo6fFW7Bggbr22mvt0lO0z7DhoVq4cKG69dZbdcKgo8mhrDplJSA3gQGDuQ9H6I4t2xdeeMEodkNXRmMFsCC5mjNnjiJeujhyiFzKpk9WAqK+9Bhe0mITmJkzZ6oxY8ZkS4P4JyHABhTrg6yyaOJKTS5lVCcjAbn3Gpg7J+MbAXuuWbNGPfDAAwFLja44Eo9/WFgdbRJBLpFTmRTKSEBu/IfAWuy9Nn36dDVkyJBMuotfFgTYOY/9kbM8DcW7j8mpNsIzEhD9N9p844GN+NooLR72CAwYMEBNnjzZUee8fUzePc3GqTYE5H67MJncJEZchBEYNGiQVv2C5BS5lQ5pGwKi5/oeBNKnMyldY7l3hMCMGTN067LqZHIrRf82BARTteh4TtFSblwjwFEijVrChv7gVpuqXQoBOesFIUe5Tq28IAg4Q+Bmk2OJ0CkEBEOnJp7IhSDgAwLpHEshIFoqt/sgU6IUBBIIpHMsQUD0G3UGO29JhIzhBQfq3c6giSEMoSaJHCPXLCUSBMS8Mtb9+N2HVo7z/7xynEWcazKqV7IknqwIdDG5ZgRIXkhybNZXQnywa9cuoz8r3XLBlDua20fVGfbDDz9UL7/8sjEnMMTkiOhLCJBrn/MyQUCYRi0JOG7cOKPYtLoUoKdBKIuAvE931jP685qOH/OI9TOgCP3H5FoFFTEIiOk73fDhzsjQNcugAGcxi4sXAiDgSHLu2LFjjUYdsL6+fjSS6F1lK154SWq8R6CjyblL6/qBkTd4L0NiFASyI2BxzrCACDYse1B5Igj4goDBOSGgL9hKpA4QEAI6AEmC+IfAJQKWlZX1hYw287T8kysxCwIGAr3JvXbo5pD6nzAiFATIvQ5ojWhNQH7nyuE4rlYFXQ2g2LmcvPpVNvSSw2NLAWMNlSitepAtXXHxJ/e0J+D7779vELBQ0EnARx55RG3btq3QqOR9jxAgAbk9u9Yr3edaSMgpFvyy7qWXXtJ6xSunaYlLOHKvHYqzsrgkKFc6+vbtK9OxcoEU4HNyj/2ARUNA1v/wrwsQYhGVA4EyFsFFQ8AcYMjjgBEg92gBtVpULmAMRFy4CHQvqjpguFiL9HQEjDqgFMHpsMh9UAhYRbDUAYNCXOSkI2DUAdM95V4QCAwBNkIaApMmggSBVAQa2AgRAqaCIncBIUDusR9QCBgQ4CImFQFyT4rgVEzkLlgEpAgOFm+RloyAUQTDQ4rgZFTkOkgEjDrg6SAliixBwELAqAPCDNZaHnE/c2Z1+hozmdIMTDJ5R87PWs5EV8WBcx27YfbqqiD1wl5jnqiHf5tauXKlo/VhGhqiXyvZsGGD2r9/vyfY+RUJuddBdwJySj43XUm3XCQUdM+JjRWGq2OtWbPG0epYn3/+ubH5Hzestt6nvCg46svd4RcvXqxOnDihtcrQdW8JP43D6uV1WmsK5dwS0CKM9V4+k1GZmXzfikt3jKgfdc4nrWGkDetF9zNMCFYO/QUKyLfBYeRC8co8geXy+rAjmk7reuAlFeU3ZggYnBMCxixXI5QcIWCEMiuOqv6fgKi47oxjCiVN+iJgcc4ogrHd+xdQtVVfdUWzmCHQanLu0gqpXKsXjPwqZomU5GiKALlGzlE9qxHC/qMtmuorasUMgWSuJbZpQBpJwAW6pXXKlCnK2uEIihvquekYtjqiv/nmG7Vnzx5ju4ZcaaQcFBFqzJgxxh4lvHe7qpbVgf3JJ5+o48ePO5LLsdvBgwerkSPz27CAevKgvC1btjgadsyFhU/PE8YuMZbF7ZMwhHMSAr0ZfPVI8+bm5sRwWCFRHjlyRM2dO9fYsCYXgfv162cMZc2ePbsQkca7n332mZo3b576/vvvc8a1YMECNW3aNDV06NCcYe0CcE+Up59+Wr366quK+Gnmzlx11VW9ampqWqhXgoC8wdDIJ8gcrTYsrKurU9hpm+oV7A4cOKBGjBihMPRoG9eECRPUO++8YxvGzUMS4dFHH7V9hTN1Nm3apMaOHWsbzulD7q/CsWzuNKWTg4X+FPiPs3RK1AHpAfJ9aj2I45kza6wi2S59Xu5PRzldu3a1E2c8o15ebsrDBT156ObSOZZCQLBzg24Ke6kPi14eQTsn9Uc/dAsjrbmwTedYCgFhGvchgu25IpHngkCeCGw3OZZ4PYWA9AVDX088lQtPEACmnsQT9UgycasNAdEQWY+Eno16YnXSP6yi0El9N0CczprcShHZhoCnTp06Aaa+lxJKbgpCwIkF9LoOWF1drX7++eeC9PbyZXKK3EqPsw0BGQBgSDGcjlTE7r/++mutCJiNUxkJOHz48M3Am7OkQ3dOrEfoSmqmQGNjo9q9e7dqbdVmfskvJqfaIJWRgDt27GhFxq9uEzoED/bks2dfnHMEjh49qvgxly6OXCKnMumTkYAMiE7MF3EKfRznpptuUitWrMiku/hlQQDDXAr1rSxPA/duNrmUUXBWAsKMHwNzV2V8K0BPVqSrqqoUpu8EKDW6olj0Pvfcc9qMAZND5FI2RLMSkC+gGb8Ep4ymM1uEfvizQs3BdXG5EeCfdedObSa4t5ocyqq4LQGxTdaPYHBl1rcDesChrI8++kht3y6DNHaQczWEyspKbRof5A45ZKezLQHNF5/HOfRWQG1treLcQJLQydiqXaLj+Gzjxo2qoqJCp64XcobcsXU5CYixuxrEUGUbS0APudTEvffeq+bPn6+82sQwINV9FfPWW2+pJ554QrHxoZGrMrljq1JOAvJtmNIKnOwn0dmK8e4hGyWrV69WDz/8sOJcwWJ3XAOGcw0PHjyoExQtJmdy6uRowhhnMJSWli5F0fdMzhgDCNDU1KTefvttY/9fLlzkpMOV46JOV73ivDxaWCwdUXBqunfv7thaM12U6ca6v/baa9r9EYH1UvTfcmZVTud4msbAgQO7wOL8G0Mq1+SMVQIULQKwfAfxScOvDx8+fMYJCI4JyMgwm+EOEPBdJxFLmOJEAASciBLT8WQWR3VAC0pGDAEbrXs5CwLJCJAbbsjHd11ZQL6AuuDVqAvuwWXuDx34grhiQaAJdb/rUPc75CbB7d0EZlhU0P+L71cv4DLxZZPbOCR8LBFYAOvHWVSunKsi2Ip58uTJS2Fut1r3ci5uBMgFciIfFFwXwZYQfGp4BaZJ7UKj5DLLT87FhwDIV4sScQS6kI7mk/q8LCAFmQJn4pLFsbjiRIB5PzNf8hEy13XAZJxhAQ/gI+5OsIJjkv3lujgQQKPjOdT7VhWS2rwtoCV04sSJFTDD26x7ORcHAsxz5n2hqc27DpgsGPXBAWZ9sF+yv1zHEwGQr86s9x0pNIUFW0AqgDrAEZjjibwsVCF5X3sE2N83kXnuhaaeEJCKYAD9K/wzpuLynBeKSRxaInCOecy89kq7ghoh6UqgGK5Bo+QgGiV34ZknxXu6DLkPDYGLsHx/QKPjn15q4CkBqRhGSr7FV1Dc7e+3XioqcYWLACzfH0G+v3uthecEpIKwhNtBwm64HO21whJf8AiAfEtBvj/7Idm3YhLFcAkmLqzE+UE/FJc4g0EA5FuFCQYP4ezLwoqeNULS4aDCpuJ5jRGmxyf3wSNAy+cn+Zgi3yxgMlyYyPoYLOFfg5KXLFuu80LgIsjHOh9Xx/DV+VIHTNeYdUK0jveDhJPwzDermy5X7vNC4JzZ2vW8wZFJm0AsoCUYlnACSMh1qGUyqwWKXucmWL6psHyBrWwUKAGJNVaqH4kZ1e+CiDJspxH5QLw6jnB42cnsJHmBF4dMIMcRkeBtThSUMP4jwLxgngRNPqYscAJSKMcRJ02aNBb/uMW4lfmEBCUcd4F5wLzwamzXbTICL4LTFUS9cDz81qJIlpnV6eD4eA+rV4voZ6K+97GPYnJGHYoFTNaKAJhF8tZkf7n2DwGQbysxD5t8TGHoBKQSMP9HUQzwK7uneEs/cb4gQGyfItbE3BcJLiMNvQhO15ffHaM4Xo6DfYbiPEIAVm8Tjnluv9v1SHzWaLQjoKUplwHBNYl4jeUnZ/cIgHRcNmseilvHy2W4l5L/G1oUwZnUJ2Bc5AattEV4XvgyVZmExNuvhdgRQ13JR/i1tYDJ3IA1HAJL+Cz8puMIZPgwWX7ErrkyaRUsXwWI52iJtDDTFwkCWgCBiOW4fhJknIVzR8tfzgYC3NulElfPg3g1UcEkUgS0QMVw3iAM580HETnXsNTyL9JzM4i3CsXtEoxk/Bg1DCJJQAtkrI7aH58AcKrXHPj1sfyL5PwLiLeam8DY7cOhOxbaNkKcAEfgUdw8gX3IrkD4u5Ah/GAmzg2Ws2Ya72KamfYok495HGkLyASkux49evRGxtxj1hNHpT+P6H01iFeJOvD6TFueRjRNhtqxI2ByZpit56nIvNtByFvwrEvyc42vz0DnL6HzpzhvwB9K+9ZsvljGmoDJoJSXl3fGwtm0iGORsTxG4lqXljRbsPywfwt02oIF4aux50dLsv5xvS4aAqZnYP/+/bvV19ePBhFvwLNhSUfv9LAe359AfHutA6Tb2bNnzy+wGWOjx3IiEV3REjBb7pSVlfVFy3oYiGkdl4EkZQhfBj+eu/PevOY9XQP8GuDHD/JP85p+vMd1LY69PNBi3Yu9So7zBXGXEPgf30hvKVSaI9kAAAAASUVORK5CYII=",alt:"logo"})})}function sI(){return ie("div",{className:"ledger-ant-spin ledger-ant-spin-lg ledger-ant-spin-spinning spin",children:ie("span",{className:"ledger-ant-spin-dot",children:[ie("i",{className:"ledger-ant-spin-dot-item"}),ie("i",{className:"ledger-ant-spin-dot-item"}),ie("i",{className:"ledger-ant-spin-dot-item"}),ie("i",{className:"ledger-ant-spin-dot-item"})]})})}function JK(t){const e=Eh(()=>Ua(),[]);return ie("div",{style:{textAlign:"center"},"data-testid":"confirm-content",children:[ie(rI,{}),ie("div",{className:"ledger-connecting-pop",children:[ie("ul",{className:"ledger-connecting-pop-content",children:[ie("li",{className:"title",style:{wordBreak:"break-word"},children:e.checkTitle}),ie("li",{children:ie("strong",{style:{color:"#B0170D",textAlign:"left",fontWeight:"600"},"data-testid":"confirm-content-address",children:t.address})}),ie("li",{children:e.checkTip0}),ie("li",{children:e.checkTip1})]}),ie("div",{className:"mt-4",children:[ie(sI,{}),ie("div",{children:ie("div",{className:"text-muted",children:ie("span",{children:e.confirmTip})})})]})]})]})}function XK(){const t=Eh(()=>Ua(),[]);return ie("div",{style:{textAlign:"center"},"data-testid":"connecting-content",children:[ie(rI,{}),ie("div",{className:"ledger-connecting-pop",children:[ie("ul",{className:"ledger-connecting-pop-content",children:ie("li",{className:"title",children:t.loadingTip0})}),ie("div",{className:"mt-4",children:[ie(sI,{}),ie("div",{children:ie("div",{className:"text-muted",children:ie("span",{children:t.loadingTip4})})})]})]})]})}function Bm(t){return ie("div",{className:"ledger-modal-root",children:[ie("div",{className:"ledger-modal-mask"}),ie("div",{className:"ledger-modal-wrap",children:ie("div",{className:"ledger-modal",style:{width:t.width||"550px"},children:ie("div",{className:"ledger-modal-content",children:[ie("button",{onClick:t.onClose,type:"button","aria-label":"Close",className:"ledger-modal-close",children:ie("span",{className:"ledger-modal-close-x",children:ie("i",{"aria-label":"icon: close",className:"icon icon-close ledger-modal-close-icon",children:ie("svg",{viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:ie("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})})})})}),ie("div",{className:"ledger-modal-header",children:ie("div",{className:"ledger-modal-title",children:t.title})}),ie("div",{className:"ledger-modal-body",children:t.children})]})})})]})}var eY=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function tY(t){const[e,n]=Yf(0),[r,s]=Yf([]),[i,o]=Yf(!1),a=UK(null),c=Eh(()=>Ua(),[]);kv(()=>{s([...t.accounts])},[t.accounts]),kv(()=>{n(t.selectedIndex)},[t.selectedIndex]);function l(h){n(+h.target.value)}function u(){const h=r.find(p=>p.index===e);t.onConfirm(h||(r==null?void 0:r[0]))}function d(){t.onCancel()}function f(){return eY(this,void 0,void 0,function*(){o(!0);const h=r[r.length-1]||{index:-1},p=h.index+1,g=h.index+6;try{const y=yield t.getAccounts(p,g);s(b=>[...b,...y])}finally{o(!1)}})}return LK(()=>{var h,p;(p=(h=a.current)===null||h===void 0?void 0:h.scrollIntoView)===null||p===void 0||p.call(h)},[r]),ie("div",{style:{paddingLeft:40},className:"ledger-select","data-testid":"select-account-content",children:[ie("span",{className:"title",children:c.selectTip}),ie("div",{className:"ledger-select-list-wrap",children:[ie("ul",{className:"ledger-select-list","data-testid":"select-account-list",children:r.map((h,p)=>ie("li",{className:"ledger-select-item",children:ie("label",{htmlFor:`ledger-select-radio${p}`,children:[ie("input",{className:h.index===e?"checked":"",id:`ledger-select-radio${p}`,type:"radio",name:"selectedAddress",value:h.index,checked:h.index===e,onInput:l}),ie("span",{children:h.address})]})},p))}),ie("div",{style:{display:"flex",justifyContent:"flex-end"},children:ie("button",{"data-testid":"btn-load-more",ref:a,style:{marginTop:10},disabled:i,className:"ledger-select-button",onClick:f,children:[ie("span",{style:{marginRight:i?10:0},children:c.loadMore}),i?ie("svg",{width:"18",height:"18",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff",children:ie("g",{fill:"none",fillRule:"evenodd",children:ie("g",{transform:"translate(1 1)",strokeWidth:"2",children:[ie("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),ie("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:ie("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})}):null]})})]}),ie("footer",{style:{display:"flex",justifyContent:"flex-end"},children:[ie("button",{"data-testid":"btn-cancel",style:{marginRight:10},className:"ledger-select-button default-button",onClick:d,children:c.cancel}),ie("button",{"data-testid":"btn-confirm",disabled:i,className:"ledger-select-button",onClick:u,children:c.confirm})]})]})}const nY=`
.ledger-modal-mask, .ledger-modal-wrap {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1000;
    font-family: 'PingFangSC-Regular', 'Arial', sans-serif, 'Droid Sans', 'Helvetica Neue';
}
.ledger-modal-mask {
    height: 100%;
    background-color: rgba(0, 0, 0, 0.45);
}
.ledger-modal-wrap {
    overflow: auto;
    outline: 0;
}
.ledger-modal {
  position: relative;
  margin: 0 auto;
  padding-bottom: 24px;
  line-height: 1.5;
  top: 50px;
  width: 600px;
  color: rgba(0, 0, 0, 0.65);
}
.ledger-modal-content {
  position: relative;
  background-color: #fff;
  background-clip: padding-box;
  border: 0;
  border-radius: 4px;
  box-shadow: 0 4px 12px rgb(0 0 0 / 15%);
  pointer-events: auto;
}
.ledger-modal-close {
  -webkit-appearance: button;
  position: absolute;
  top: 0;
  right: 0;
  z-index: 10;
  padding: 0;
  color: rgba(0, 0, 0, 0.45);
  font-weight: 700;
  line-height: 1;
  text-decoration: none;
  background: transparent;
  border: 0;
  outline: 0;
  cursor: pointer;
  transition: color 0.3s;
}
.ledger-modal-close:focus,.ledger-modal-close:active,.ledger-modal-close:hover {
  color: rgba(0, 0, 0, 0.75);
  text-decoration: none;
  border: none;
  outline: none;
}
.ledger-modal-close-x {
  display: block;
  width: 56px;
  height: 56px;
  font-size: 16px;
  font-style: normal;
  line-height: 56px;
  text-align: center;
  text-transform: none;
  text-rendering: auto;
}
.ledger-modal-close-x .icon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}
.ledger-modal-header {
  padding: 16px 24px;
  color: rgba(0, 0, 0, 0.65);
  background: #fff;
  border-bottom: 1px solid #e8e8e8;
  border-radius: 4px 4px 0 0;
}
.ledger-select .title, .ledger-modal-title {
  margin: 0;
  color: rgba(0, 0, 0, 0.85);
  font-weight: 500;
  font-size: 18px;
  line-height: 22px;
  word-wrap: break-word;
}
.ledger-modal-body {
  padding: 24px;
  font-size: 14px;
  line-height: 1.5;
  word-wrap: break-word;
  max-height: 650px;
  overflow-y: auto;
}


// connecting content
.ledger-connecting-pop ul {
  margin: 0;
}
.ledger-connecting-pop-content {
  padding-left: 8%;
}
.ledger-connecting-pop-content li, .ledger-select li {
  display: flex;
  margin: 10px 0 10px 0;
  line-height: 25px;
  word-break: break-all;
  text-align: left;
}
.ledger-connecting-pop-content .title {
  margin-bottom: 20px;
  font-weight: bold;
}
.ledger-ant-spin {
  box-sizing: border-box;
  padding: 0;
  font-size: 14px;
  font-variant: tabular-nums;
  line-height: 1.5;
  list-style: none;
  font-feature-settings: 'tnum';
  color: #B0170D;
  vertical-align: middle;
  transition: transform 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);
  position: static;
  opacity: 1;
  margin: 2vw 0;
  text-align: center;
  display: block;
}
.ledger-ant-spin-dot {
  position: relative;
  display: inline-block;
  font-size: 20px;
  width: 1em;
  height: 1em;
  transform: rotate(45deg);
  animation: antRotate 1.2s infinite linear;
  font-size: 32px;
}

.ledger-ant-spin-dot-item {
  position: absolute;
  display: block;
  width: 9px;
  height: 9px;
  background-color: #B0170D;
  border-radius: 100%;
  transform: scale(0.75);
  transform-origin: 50% 50%;
  opacity: 0.3;
  animation: antSpinMove 1s infinite linear alternate;
}
.ledger-ant-spin-dot-item:nth-child(1) {
  top: 0;
  left: 0;
}
.ledger-ant-spin-dot-item:nth-child(2) {
  top: 0;
  right: 0;
  animation-delay: 0.4s;
}
.ledger-ant-spin-dot-item:nth-child(3) {
  right: 0;
  bottom: 0;
  animation-delay: 0.8s;
}
.ledger-ant-spin-dot-item:nth-child(4) {
  bottom: 0;
  left: 0;
  animation-delay: 1.2s;
}
.ledger-ant-spin-lg .ledger-ant-spin-dot i {
  width: 14px;
  height: 14px;
}
@keyframes antRotate {
  100% {
    transform: rotate(405deg)
  }
}
@keyframes antSpinMove {
  100% {
    opacity: 1;
  }
}

.ledger-select {
  text-align: left;
}
.ledger-select .title {
  display: block;
  margin-bottom: 10px;
}
.ledger-select-list-wrap {
  width: 100%;
  max-height: 400px;
  overflow-y: auto;
  margin: 0 0 20px 0;
}
.ledger-select-list {
  margin-top: 0;
  padding: 0;
}
.ledger-select-item {
  font-size: 14px;
  color: #2f2f2f;
  line-height: 25px;
  margin-top: 0;
}
.ledger-select-item:hover {
  color: #6f6f6f;
}
.ledger-select-item label {
  cursor: pointer;
  width: 100%;
  display: flex;
}
.ledger-select-item input {
  width: 15px;
  height: 25px;
  margin: 0 10px 0 0;
}
.ledger-select-button {
  display: inline-flex;
  color: #fff;
  cursor: pointer;
  height: 36px;
  background-color: #c23631;
  border: none;
  border-radius: 4px;
  align-items: center;
  padding: 0 18px;
  font-family: DM Sans, Roboto, Helvetica Neue, Helvetica, Arial, sans-serif;
  font-size: 14px;
  font-weight: 500;
  line-height: 36px;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.ledger-select-button[disabled] {
  cursor: not-allowed;
}
.ledger-select-button.default-button {
  background-color: #fff;
  color: rgba(0, 0, 0, 0.65);
  border: 1px solid #dcdfe6;
}
.ledger-select-button:focus {
  outline: none;
}
.ledger-select-button:focus-visible {
  outline: 2px solid white;
}
.ledger-select-button:hover {
  opacity: 0.7;
}
`;function jm(){const t=document.createElement("div"),e=document.createElement("style");e.innerHTML=nY,document.body.append(e),document.body.append(t);function n(){t.remove(),e.remove()}return{onClose:n,div:t}}function rY(){const{onClose:t,div:e}=jm(),n=Ua();return $m(ie(Bm,{title:n.loadingTitle,onClose:t,children:ie(XK,{})}),e),t}function sY(t){const{onClose:e,div:n}=jm(),r=Ua();return $m(ie(Bm,{width:550,title:r.loadingTitle,onClose:e,children:ie(JK,{address:t})}),n),e}function iY(t){const{onClose:e,div:n}=jm(),r=Ua();return new Promise((s,i)=>{function o(c){s(c),e()}function a(){i(new Error("Operation is canceled.")),e()}$m(ie(Bm,{title:r.loadingTitle,onClose:a,children:ie(tY,{accounts:t.accounts,selectedIndex:t.selectedIndex||0,onConfirm:o,onCancel:a,getAccounts:t.getAccounts})}),n)})}var Ar=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function Hv(t){return Ar(this,void 0,void 0,function*(){return new Promise(e=>{setTimeout(e,t)})})}function oY(t){return typeof t=="function"}const aY=function(t){return Ar(this,arguments,void 0,function*({accounts:e,ledgerUtils:n}){const r=yield iY({accounts:e,getAccounts:n.getAccounts}),s=sY(r.address);try{yield n.getAddress(r.index,!0)}finally{s==null||s()}return r})};class cY{constructor(e={}){this.app=null,this.transport=null,this.fetchState="Initial",this.selectedIndex=0,this._address="",this.getAccounts=(r,s)=>Ar(this,void 0,void 0,function*(){if(r<0)throw new Error("getAccount parameter error: from cannot be smaller than 0.");if(r>=s)throw new Error("getAccount parameter error: from cannot be bigger than to.");if(this.fetchState==="Fetching")return yield Hv(500),this.getAccounts(r,s);this.fetchState="Fetching",yield this.makeApp();try{const i={};for(let o=r;o<s;o++){const a=yield this.getAccount(o);i[a.index]=a}return Object.keys(i).forEach(o=>{this.accounts[+o]=i[o]}),this.accounts.slice(r,s)}finally{this.fetchState="Initial",yield this.cleanUp()}}),this.getAddress=(r,...s)=>Ar(this,[r,...s],void 0,function*(i,o=!1){try{const a=this.getPathForIndex(i);return yield this.makeApp(),yield this.app.getAddress(a,o)}finally{yield this.cleanUp()}}),this.accounts=[];const{accountNumber:n=1}=e;if(["beforeConnect","selectAccount","getDerivationPath"].forEach(r=>{if(e[r]&&!oY(e[r]))throw new Error(`[Ledger]: ${r} must be a function!`)}),n&&!Number.isInteger(+n))throw new Error("[Ledger]: accountNumber must be an integer!");this.config=Object.assign(Object.assign({},e),{accountNumber:n})}get address(){return this._address}connect(e){return Ar(this,void 0,void 0,function*(){if(e!=null&&e.account&&typeof e.account=="object"){const a=e.account;this.selectedIndex=+a.index,this._address=a.address,(a.index===void 0||a.address===void 0)&&console.warn("[LedgerWallet] account parameter passed to connect() should have valid index and address property");return}const n={getAccounts:this.getAccounts,getAddress:this.getAddress};this.accounts=[],this._address="",this.selectedIndex=0;const{accountNumber:r=1,beforeConnect:s,selectAccount:i=aY}=this.config;let o=null;try{s?yield s():o=rY(),yield this.makeApp();const a=yield this.getAccount(0);this.accounts[0]=a,yield this.cleanUp(),r>1&&(yield this.getAccounts(1,r)),o==null||o();const c=this.accounts.slice(0,r),l=yield i({accounts:c,ledgerUtils:n});this.selectedIndex=l.index,this._address=l.address}finally{yield this.cleanUp()}})}disconnect(){this.selectedIndex=0,this._address=""}signPersonalMessage(e){return Ar(this,void 0,void 0,function*(){yield this.waitForIdle();try{const n=this.selectedIndex;yield this.makeApp();const r=this.getPathForIndex(n),s=Buffer.from(e).toString("hex");return yield this.app.signPersonalMessage(r,s)}finally{yield this.cleanUp()}})}signTransaction(e){return Ar(this,void 0,void 0,function*(){yield this.waitForIdle();try{const n=this.selectedIndex,r=this.getPathForIndex(n);yield this.makeApp();let s;try{s=yield this.app.signTransaction(r,e.raw_data_hex,[])}catch(o){if(/Too many bytes to encode/.test(o.message))s=yield this.app.signTransactionHash(r,e.txID);else throw o}let i=e.signature;return Array.isArray(i)?i.includes(s)||i.push(s):i=[s],Object.assign(Object.assign({},e),{signature:i})}finally{yield this.cleanUp()}})}getAccount(e){return Ar(this,void 0,void 0,function*(){const n=this.getPathForIndex(e),{address:r}=yield this.app.getAddress(n);return{path:n,address:r,index:e}})}waitForIdle(){return Ar(this,void 0,void 0,function*(){this.fetchState==="Fetching"&&(yield Hv(300),yield this.waitForIdle())})}getPathForIndex(e){return this.config.getDerivationPath?this.config.getDerivationPath(e):`44'/195'/${e}'/0/0`}makeApp(){return Ar(this,void 0,void 0,function*(){this.transport&&this.app||(this.transport=yield SK.create(),this.app=new GW(this.transport))})}cleanUp(){return Ar(this,void 0,void 0,function*(){var e;this.app=null,yield(e=this.transport)===null||e===void 0?void 0:e.close(),this.transport=null})}}var Uu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const lY=()=>!!(globalThis.navigator&&globalThis.navigator.hid),uY="Ledger";class ZQ extends mi{constructor(e={}){super(),this.name=uY,this.url="https://www.ledger.com/",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAYAAACLz2ctAAAAAXNSR0IArs4c6QAAFMhJREFUeAHtXXuMFEUeruW5PJbwFEVQjAtcvBCJmoASiUG4O3ICioBiEM5gNPgHJubERzw2HuApHOrxh3gcRLISlA2eghLfiCTKGgNBucNDFgiKILsIeyy77LI87vua7rmZ2Zme7pl+VPf8Kunp7urq+v3qq29+9eyqEiUuBYGysrK+586dG3bx4kXr6FdSUlKGQGXwM868t67Nlxvg1wC/Btwb1zzzHv51OPby6NChw96Ghobj5jtyAgIlxYpC//79u9XX148GSW4ABsOSjt4+Y3IC8e+1DhBzZ8+ePb84duxYo89ytYy+aAhYXl7e+fDhw6OQC2NBOh4jcd1Rk1xpBRG/wrEF+mwZOHBgdU1NTYsmuvmqRqwJ2Llz5yEg2lRk7O043wIku/iKpneRn4HOX0LnT3He0NLSss+7qPWKKXYE7NGjR29k2D3IvPsB9c16wZ23NttBxNfxh1p/6tQpFuGxcbEg4I033thx9+7dv0cm3Q/i3YHc6RSbHEpNyFmk8T2k8fXhw4dv3rFjR2vq4+jdRZqA3bp1648W62PIkDmAvk/04C9I419AxtVoWb/Y2Nh4rKCYQnw5kgTs0qXLoAsXLswH8R4EdqUh4qeD6GYQcVW7du2WnDlz5kcdFHKjQ6QIiDpQORL3JIg3C2ddWrBu8PYzLFvSlRDwPOrANX4K8jLuSBDQbM0+i4RPx9HeSwBiGNd5pKkKZKyIQutZ68xEf1iXs2fPVsDirQWoI3C0iyFhvE4SMRqO46GOHTt2vvzyy6vRcj7ntRCv4tPWAsLqsTW7HOS7xqvEFmM8sIQHke55sIbv6Zh+7QhYWlp6NUj3NxyTdQQsqjqBiBtxPNrc3HxIpzRoU6RNmzatfadOnZ5E63aPkM97ihBTYkuMibX3EvKLUQsL2LVr1yvOnz+/DiDdll8y5C03CMASbm3fvv19TU1NR92850fY0AmIut54JGwtyHeZHwmUODMjABLW4slM1A0/zhwiGN/QimAWA6jvLQLxPhDyBZPZyVKIObFnHoRZJIdiAVHkDkCR+wYAGJMMilyHgwCs4TYUyTNQJB8JWoPACYhhtJGoDL8L8vULOrEiLzsCIGEdhvMmYjjvq+yhvH8SKAFR35sA4m1AMrp6nxSJ0QMEmkDEqagXvu9BXI6iCKw5jrrGTJBvPbTq7EgzCRQGAhxfvwcjKAcxy+jbIBQIhICwfJwytQIJCkReEMDFWEY75NVdmObVgHr6dr/T6WsrGAkpAfmW4LwMCQm0uPcbuJjHX8I8M/PO13zzLXKSD8XuP3CeE/PMinXyUCdcheG7h3C+6EdCfbOAIN8LQj4/sizYOJGHDzIv/ZLqS53MrPM965fSEm/gCIz2q07oOQHN1i4bHL4V74HDLwKJwG/QOt7vdevYU5LA8rGfbxOU7SB5FksEzqEuOMnLfkLPCMgRDjTb+WW/dDLHknuJRDVh2G6sVyMmnhDQHNvdBesnw2uJfIrvBaxgHUg4woux44JbwZxJYU4sEPLFl3MpKaOhYZ57MYum4EbIgQMHFkIhLoMhrrgQuHrfvn3t0ShhtStvV1ARjEbHeJDvA0gv2JLmnQJ5MUwELqA4/l0hk1rzJqA5jZ71PpnJHCYFQpYNAtaa9cG8pvfnZbnMeh+/4RDyhUyAsMWTA6gPrsu3PpiXBeSXVUj4X8JOvMjXCoGnsIjA8241ck1AjHRczc/7IEj6+9yiHe/wTZhRfZ3b745dF8EwucuFfPFmUp6p62pyw9XrriwgWr13QMi7riRI4KJCAI2SiWgVO14GxLEF5EJBQJLWT5wgYIfAcpMrdmESzxxbQNT9FqLu90ziTc0uMF1I8UADSV155ZUKuir8G40D/0j1ww8/KLTWFCy4I80ZF7qaFMA03nP0kk+BUK9StbW1hu5MQ2ur3ivzoi64CDr/yQkcjgiIoperzf8LEWq19jL6nxQWJVeTJk1Sw4YNM66x/4dxn5z4kydPqsrKSrV27Vr17be5v7Xp3r27mj17tho9erS6++67k6MK5fr48eNq48aNhuzTp0+rn376Sb355psJUoailL3QFvz5h+OPn3N1f0cEhFVZB3kz7GUG9xT/MDV48GB12223qblz5yos2G1YulwaVFdXq/Hjxyt0F9gGZbybNm1S+OPZhgvz4XfffafWrVunqqqq1KFDhxxb9gB1fgM435dLXk4CIhPKYf3+g4gKHjfOpYyT55gUqUaNGqWWLVtmEI9kdOpYjA0dOlRhKpHtK3feeadav55fkOrvsPmOevzxx9XmzZsVqxoaufOwgr+CTrbLBTvJPXY6a0E+WqQpU6aoV155RV1//fXKDfmYMRg4d2QpWH+MimMdlXjMmjVLseqgkSNnyB1bZ0tArkYP6zfLNoaAHrK+x+KzoqLCsGIBiY2EmF69eqlFixYZf042wnRx5A45ZKePLQFhCebjZS1Wo6fFW7Bggbr22mvt0lO0z7DhoVq4cKG69dZbdcKgo8mhrDplJSA3gQGDuQ9H6I4t2xdeeMEodkNXRmMFsCC5mjNnjiJeujhyiFzKpk9WAqK+9Bhe0mITmJkzZ6oxY8ZkS4P4JyHABhTrg6yyaOJKTS5lVCcjAbn3Gpg7J+MbAXuuWbNGPfDAAwFLja44Eo9/WFgdbRJBLpFTmRTKSEBu/IfAWuy9Nn36dDVkyJBMuotfFgTYOY/9kbM8DcW7j8mpNsIzEhD9N9p844GN+NooLR72CAwYMEBNnjzZUee8fUzePc3GqTYE5H67MJncJEZchBEYNGiQVv2C5BS5lQ5pGwKi5/oeBNKnMyldY7l3hMCMGTN067LqZHIrRf82BARTteh4TtFSblwjwFEijVrChv7gVpuqXQoBOesFIUe5Tq28IAg4Q+Bmk2OJ0CkEBEOnJp7IhSDgAwLpHEshIFoqt/sgU6IUBBIIpHMsQUD0G3UGO29JhIzhBQfq3c6giSEMoSaJHCPXLCUSBMS8Mtb9+N2HVo7z/7xynEWcazKqV7IknqwIdDG5ZgRIXkhybNZXQnywa9cuoz8r3XLBlDua20fVGfbDDz9UL7/8sjEnMMTkiOhLCJBrn/MyQUCYRi0JOG7cOKPYtLoUoKdBKIuAvE931jP685qOH/OI9TOgCP3H5FoFFTEIiOk73fDhzsjQNcugAGcxi4sXAiDgSHLu2LFjjUYdsL6+fjSS6F1lK154SWq8R6CjyblL6/qBkTd4L0NiFASyI2BxzrCACDYse1B5Igj4goDBOSGgL9hKpA4QEAI6AEmC+IfAJQKWlZX1hYw287T8kysxCwIGAr3JvXbo5pD6nzAiFATIvQ5ojWhNQH7nyuE4rlYFXQ2g2LmcvPpVNvSSw2NLAWMNlSitepAtXXHxJ/e0J+D7779vELBQ0EnARx55RG3btq3QqOR9jxAgAbk9u9Yr3edaSMgpFvyy7qWXXtJ6xSunaYlLOHKvHYqzsrgkKFc6+vbtK9OxcoEU4HNyj/2ARUNA1v/wrwsQYhGVA4EyFsFFQ8AcYMjjgBEg92gBtVpULmAMRFy4CHQvqjpguFiL9HQEjDqgFMHpsMh9UAhYRbDUAYNCXOSkI2DUAdM95V4QCAwBNkIaApMmggSBVAQa2AgRAqaCIncBIUDusR9QCBgQ4CImFQFyT4rgVEzkLlgEpAgOFm+RloyAUQTDQ4rgZFTkOkgEjDrg6SAliixBwELAqAPCDNZaHnE/c2Z1+hozmdIMTDJ5R87PWs5EV8WBcx27YfbqqiD1wl5jnqiHf5tauXKlo/VhGhqiXyvZsGGD2r9/vyfY+RUJuddBdwJySj43XUm3XCQUdM+JjRWGq2OtWbPG0epYn3/+ubH5Hzestt6nvCg46svd4RcvXqxOnDihtcrQdW8JP43D6uV1WmsK5dwS0CKM9V4+k1GZmXzfikt3jKgfdc4nrWGkDetF9zNMCFYO/QUKyLfBYeRC8co8geXy+rAjmk7reuAlFeU3ZggYnBMCxixXI5QcIWCEMiuOqv6fgKi47oxjCiVN+iJgcc4ogrHd+xdQtVVfdUWzmCHQanLu0gqpXKsXjPwqZomU5GiKALlGzlE9qxHC/qMtmuorasUMgWSuJbZpQBpJwAW6pXXKlCnK2uEIihvquekYtjqiv/nmG7Vnzx5ju4ZcaaQcFBFqzJgxxh4lvHe7qpbVgf3JJ5+o48ePO5LLsdvBgwerkSPz27CAevKgvC1btjgadsyFhU/PE8YuMZbF7ZMwhHMSAr0ZfPVI8+bm5sRwWCFRHjlyRM2dO9fYsCYXgfv162cMZc2ePbsQkca7n332mZo3b576/vvvc8a1YMECNW3aNDV06NCcYe0CcE+Up59+Wr366quK+Gnmzlx11VW9ampqWqhXgoC8wdDIJ8gcrTYsrKurU9hpm+oV7A4cOKBGjBihMPRoG9eECRPUO++8YxvGzUMS4dFHH7V9hTN1Nm3apMaOHWsbzulD7q/CsWzuNKWTg4X+FPiPs3RK1AHpAfJ9aj2I45kza6wi2S59Xu5PRzldu3a1E2c8o15ebsrDBT156ObSOZZCQLBzg24Ke6kPi14eQTsn9Uc/dAsjrbmwTedYCgFhGvchgu25IpHngkCeCGw3OZZ4PYWA9AVDX088lQtPEACmnsQT9UgycasNAdEQWY+Eno16YnXSP6yi0El9N0CczprcShHZhoCnTp06Aaa+lxJKbgpCwIkF9LoOWF1drX7++eeC9PbyZXKK3EqPsw0BGQBgSDGcjlTE7r/++mutCJiNUxkJOHz48M3Am7OkQ3dOrEfoSmqmQGNjo9q9e7dqbdVmfskvJqfaIJWRgDt27GhFxq9uEzoED/bks2dfnHMEjh49qvgxly6OXCKnMumTkYAMiE7MF3EKfRznpptuUitWrMiku/hlQQDDXAr1rSxPA/duNrmUUXBWAsKMHwNzV2V8K0BPVqSrqqoUpu8EKDW6olj0Pvfcc9qMAZND5FI2RLMSkC+gGb8Ep4ymM1uEfvizQs3BdXG5EeCfdedObSa4t5ocyqq4LQGxTdaPYHBl1rcDesChrI8++kht3y6DNHaQczWEyspKbRof5A45ZKezLQHNF5/HOfRWQG1treLcQJLQydiqXaLj+Gzjxo2qoqJCp64XcobcsXU5CYixuxrEUGUbS0APudTEvffeq+bPn6+82sQwINV9FfPWW2+pJ554QrHxoZGrMrljq1JOAvJtmNIKnOwn0dmK8e4hGyWrV69WDz/8sOJcwWJ3XAOGcw0PHjyoExQtJmdy6uRowhhnMJSWli5F0fdMzhgDCNDU1KTefvttY/9fLlzkpMOV46JOV73ivDxaWCwdUXBqunfv7thaM12U6ca6v/baa9r9EYH1UvTfcmZVTud4msbAgQO7wOL8G0Mq1+SMVQIULQKwfAfxScOvDx8+fMYJCI4JyMgwm+EOEPBdJxFLmOJEAASciBLT8WQWR3VAC0pGDAEbrXs5CwLJCJAbbsjHd11ZQL6AuuDVqAvuwWXuDx34grhiQaAJdb/rUPc75CbB7d0EZlhU0P+L71cv4DLxZZPbOCR8LBFYAOvHWVSunKsi2Ip58uTJS2Fut1r3ci5uBMgFciIfFFwXwZYQfGp4BaZJ7UKj5DLLT87FhwDIV4sScQS6kI7mk/q8LCAFmQJn4pLFsbjiRIB5PzNf8hEy13XAZJxhAQ/gI+5OsIJjkv3lujgQQKPjOdT7VhWS2rwtoCV04sSJFTDD26x7ORcHAsxz5n2hqc27DpgsGPXBAWZ9sF+yv1zHEwGQr86s9x0pNIUFW0AqgDrAEZjjibwsVCF5X3sE2N83kXnuhaaeEJCKYAD9K/wzpuLynBeKSRxaInCOecy89kq7ghoh6UqgGK5Bo+QgGiV34ZknxXu6DLkPDYGLsHx/QKPjn15q4CkBqRhGSr7FV1Dc7e+3XioqcYWLACzfH0G+v3uthecEpIKwhNtBwm64HO21whJf8AiAfEtBvj/7Idm3YhLFcAkmLqzE+UE/FJc4g0EA5FuFCQYP4ezLwoqeNULS4aDCpuJ5jRGmxyf3wSNAy+cn+Zgi3yxgMlyYyPoYLOFfg5KXLFuu80LgIsjHOh9Xx/DV+VIHTNeYdUK0jveDhJPwzDermy5X7vNC4JzZ2vW8wZFJm0AsoCUYlnACSMh1qGUyqwWKXucmWL6psHyBrWwUKAGJNVaqH4kZ1e+CiDJspxH5QLw6jnB42cnsJHmBF4dMIMcRkeBtThSUMP4jwLxgngRNPqYscAJSKMcRJ02aNBb/uMW4lfmEBCUcd4F5wLzwamzXbTICL4LTFUS9cDz81qJIlpnV6eD4eA+rV4voZ6K+97GPYnJGHYoFTNaKAJhF8tZkf7n2DwGQbysxD5t8TGHoBKQSMP9HUQzwK7uneEs/cb4gQGyfItbE3BcJLiMNvQhO15ffHaM4Xo6DfYbiPEIAVm8Tjnluv9v1SHzWaLQjoKUplwHBNYl4jeUnZ/cIgHRcNmseilvHy2W4l5L/G1oUwZnUJ2Bc5AattEV4XvgyVZmExNuvhdgRQ13JR/i1tYDJ3IA1HAJL+Cz8puMIZPgwWX7ErrkyaRUsXwWI52iJtDDTFwkCWgCBiOW4fhJknIVzR8tfzgYC3NulElfPg3g1UcEkUgS0QMVw3iAM580HETnXsNTyL9JzM4i3CsXtEoxk/Bg1DCJJQAtkrI7aH58AcKrXHPj1sfyL5PwLiLeam8DY7cOhOxbaNkKcAEfgUdw8gX3IrkD4u5Ah/GAmzg2Ws2Ya72KamfYok495HGkLyASkux49evRGxtxj1hNHpT+P6H01iFeJOvD6TFueRjRNhtqxI2ByZpit56nIvNtByFvwrEvyc42vz0DnL6HzpzhvwB9K+9ZsvljGmoDJoJSXl3fGwtm0iGORsTxG4lqXljRbsPywfwt02oIF4aux50dLsv5xvS4aAqZnYP/+/bvV19ePBhFvwLNhSUfv9LAe359AfHutA6Tb2bNnzy+wGWOjx3IiEV3REjBb7pSVlfVFy3oYiGkdl4EkZQhfBj+eu/PevOY9XQP8GuDHD/JP85p+vMd1LY69PNBi3Yu9So7zBXGXEPgf30hvKVSaI9kAAAAASUVORK5CYII=",this._readyState=_e.Loading,this._state=K.NotFound,this._connecting=!1,this._address=null,this.config=e,this._wallet=new cY(e),lY()?(this._readyState=_e.Found,this._state=K.Disconnect):this._readyState=_e.NotFound}get address(){return this._address}get state(){return this._state}get connecting(){return this._connecting}get readyState(){return this._readyState}get ledgerUtils(){return{getAccounts:this._wallet.getAccounts,getAddress:this._wallet.getAddress}}connect(e){return Uu(this,void 0,void 0,function*(){try{if(this.connected||this.connecting)return;if(this.state===K.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;this._connecting=!0;try{yield this._wallet.connect(e)}catch(n){throw new St(`${n.message}.`)}this._address=this._wallet.address,this._state=K.Connected,this.emit("connect",this.address||""),this.emit("stateChanged",this._state)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}})}disconnect(){return Uu(this,void 0,void 0,function*(){if(this.state===K.Connected)try{this._wallet.disconnect(),this._state=K.Disconnect,this._address=null,this.emit("disconnect"),this.emit("stateChanged",this._state)}catch(e){throw this.emit("error",e),new Kv(e.message)}})}signTransaction(e){return Uu(this,void 0,void 0,function*(){try{if(this.state!==K.Connected)throw new nt;try{return yield this._wallet.signTransaction(e)}catch(n){throw new ze(n.message)}}catch(n){throw this.emit("error",n),n}})}signMessage(e){return Uu(this,void 0,void 0,function*(){try{if(this.state!==K.Connected)throw new nt;try{return yield this._wallet.signPersonalMessage(e)}catch(n){throw new zt(n==null?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}})}}function yc(){return!!window.tronWeb&&typeof window.tokenpocket<"u"}function dY(){return wt()&&typeof window.tokenpocket<"u"}function hY(){if(!yc()&&Bt()&&!dY()){const{origin:t,pathname:e,search:n,hash:r}=window.location,s=t+e+n+r,i={action:"open",actionId:Date.now()+"",callbackUrl:"http://someurl.com",blockchain:"Tron",chain:"Tron",url:s,protocol:"TokenPocket",version:"1.0"};return window.location.href=`tpdapp://open?params=${encodeURIComponent(JSON.stringify(i))}`,!0}return!1}var Ti=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const fY="TokenPocket";class JQ extends mi{constructor(e={}){super(),this.name=fY,this.url="https://tokenpocket.pro/",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxwYXRoIGQ9Ik0xMDQxLjUyIDBILTI3VjEwMjRIMTA0MS41MlYwWiIgZmlsbD0iIzI5ODBGRSIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDA4XzIyNSkiPgo8cGF0aCBkPSJNNDA2Ljc5NiA0MzguNjQzSDQwNi45MjdDNDA2Ljc5NiA0MzcuODU3IDQwNi43OTYgNDM2Ljk0IDQwNi43OTYgNDM2LjE1NFY0MzguNjQzWiIgZmlsbD0iIzI5QUVGRiIvPgo8cGF0aCBkPSJNNjY3LjYwMiA0NjMuNTMzSDUyMy4yNDlWNzI0LjA3NkM1MjMuMjQ5IDczNi4zODkgNTMzLjIwNCA3NDYuMzQ1IDU0NS41MTcgNzQ2LjM0NUg2NDUuMzMzQzY1Ny42NDcgNzQ2LjM0NSA2NjcuNjAyIDczNi4zODkgNjY3LjYwMiA3MjQuMDc2VjQ2My41MzNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDUzLjU2MyAyNzdINDQ4LjcxNkgxOTAuMjY5QzE3Ny45NTUgMjc3IDE2OCAyODYuOTU1IDE2OCAyOTkuMjY5VjM4OS42NTNDMTY4IDQwMS45NjcgMTc3Ljk1NSA0MTEuOTIyIDE5MC4yNjkgNDExLjkyMkgyNTAuOTE4SDI3NS4wMjFWNDM4LjY0NFY3MjQuNzMxQzI3NS4wMjEgNzM3LjA0NSAyODQuOTc2IDc0NyAyOTcuMjg5IDc0N0gzOTIuMTI4QzQwNC40NDEgNzQ3IDQxNC4zOTYgNzM3LjA0NSA0MTQuMzk2IDcyNC43MzFWNDM4LjY0NFY0MzYuMTU2VjQxMS45MjJINDM4LjQ5OUg0NDguMzIzSDQ1My4xN0M0OTAuMzcyIDQxMS45MjIgNTIwLjYzMSAzODEuNjYzIDUyMC42MzEgMzQ0LjQ2MUM1MjEuMDI0IDMwNy4yNTkgNDkwLjc2NSAyNzcgNDUzLjU2MyAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjY3LjczNSA0NjMuNTMzVjY0NS4zNUM2NzIuNzEzIDY0Ni41MjkgNjc3LjgyMSA2NDcuNDQ2IDY4My4wNjEgNjQ4LjIzMkM2OTAuMzk3IDY0OS4yOCA2OTcuOTk0IDY0OS45MzUgNzA1LjU5MiA2NTAuMDY2QzcwNS45ODUgNjUwLjA2NiA3MDYuMzc4IDY1MC4wNjYgNzA2LjkwMiA2NTAuMDY2VjUwNS40NUM2ODUuMDI2IDUwNC4wMDkgNjY3LjczNSA0ODUuODAxIDY2Ny43MzUgNDYzLjUzM1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl80MDhfMjI1KSIvPgo8cGF0aCBkPSJNNzA5Ljc4MSAyNzdDNjA2LjgyMiAyNzcgNTIzLjI0OSAzNjAuNTczIDUyMy4yNDkgNDYzLjUzM0M1MjMuMjQ5IDU1Mi4wODQgNTg0Ljk0NiA2MjYuMjI1IDY2Ny43MzMgNjQ1LjM1VjQ2My41MzNDNjY3LjczMyA0NDAuMzQ3IDY4Ni41OTYgNDIxLjQ4NCA3MDkuNzgxIDQyMS40ODRDNzMyLjk2NyA0MjEuNDg0IDc1MS44MyA0NDAuMzQ3IDc1MS44MyA0NjMuNTMzQzc1MS44MyA0ODMuMDUxIDczOC42IDQ5OS40MjUgNzIwLjUyMyA1MDQuMTRDNzE3LjExNyA1MDUuMDU3IDcxMy40NDkgNTA1LjU4MSA3MDkuNzgxIDUwNS41ODFWNjUwLjA2NkM3MTMuNDQ5IDY1MC4wNjYgNzE2Ljk4NiA2NDkuOTM1IDcyMC41MjMgNjQ5LjgwNEM4MTguNTA1IDY0NC4xNzEgODk2LjMxNCA1NjIuOTU2IDg5Ni4zMTQgNDYzLjUzM0M4OTYuNDQ1IDM2MC41NzMgODEyLjg3MiAyNzcgNzA5Ljc4MSAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzA5Ljc4IDY1MC4wNjZWNTA1LjU4MUM3MDguNzMzIDUwNS41ODEgNzA3LjgxNiA1MDUuNTgxIDcwNi43NjggNTA1LjQ1VjY1MC4wNjZDNzA3LjgxNiA2NTAuMDY2IDcwOC44NjQgNjUwLjA2NiA3MDkuNzggNjUwLjA2NloiIGZpbGw9IndoaXRlIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzQwOF8yMjUiIHgxPSI3MDkuODQ0IiB5MT0iNTU2LjgyNyIgeDI9IjY2Ny43NTMiIHkyPSI1NTYuODI3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IndoaXRlIi8+CjxzdG9wIG9mZnNldD0iMC45NjY3IiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMyMzMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF80MDhfMjI1Ij4KPHJlY3Qgd2lkdGg9IjcyOC40NDgiIGhlaWdodD0iNDcwIiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY4IDI3NykiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",this._readyState=wt()?_e.Loading:_e.NotFound,this._state=K.Loading,this.onAccountsChanged=i=>{const o=this.address||"",a=(i==null?void 0:i[0])||"";if(!a)this.setAddress(null),this.setState(K.Disconnect);else{const c=a;this.setAddress(c),this.setState(K.Connected)}this.emit("accountsChanged",this.address||"",o),!o&&this.address?this.emit("connect",this.address):o&&!this.address&&this.emit("disconnect")},this.checkReadyInterval=null,this._checkPromise=null,this._updateWallet=()=>{var i,o,a,c,l;let u=this.state,d=this.address;if(yc()){const f=(i=window.tokenpocket)===null||i===void 0?void 0:i.tron;this._wallet=Bt()?{tron:f,ready:(o=window.tronWeb)===null||o===void 0?void 0:o.ready,tronWeb:(a=window.tokenpocket)===null||a===void 0?void 0:a.tronWeb}:{tron:f,ready:!!(!((c=(f==null?void 0:f.tronWeb).defaultAddress)===null||c===void 0)&&c.base58)||!1,tronWeb:f==null?void 0:f.tronWeb},d=((l=this._wallet.tronWeb.defaultAddress)===null||l===void 0?void 0:l.base58)||null,u=d?K.Connected:K.Disconnect,d||this.checkForWalletReady()}else this._wallet=null,d=null,u=K.NotFound;this.setAddress(d),this.setState(u)};const{checkTimeout:n=2*1e3,openUrlWhenWalletNotFound:r=!0,openAppWithDeeplink:s=!0}=e;if(typeof n!="number")throw new Error("[TokenPocketAdapter] config.checkTimeout should be a number");this.config={checkTimeout:n,openAppWithDeeplink:s,openUrlWhenWalletNotFound:r},this._connecting=!1,this._wallet=null,this._address=null,Bt()&&yc()?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return Ti(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;try{return yield Ca(e.tronWeb)}catch(n){throw new Aa(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}})}connect(){return Ti(this,void 0,void 0,function*(){try{if(this.checkIfOpenApp(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.readyState===_e.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;if(!this._wallet)return;this._connecting=!0;const e=this._wallet;try{const n=yield e.tron.request({method:"eth_requestAccounts"});if(!(n!=null&&n[0]))throw new St("Request connect error.");const r=n[0];this.setAddress(r),this.setState(K.Connected),this.emit("connect",this.address||"")}catch(n){throw n instanceof pr?n:new St(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}})}disconnect(){return Ti(this,void 0,void 0,function*(){this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return Ti(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new ze(s.message,s):typeof s=="string"?new ze(s,new Error(s)):new ze("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return Ti(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error||typeof i=="object"&&i.message?new ze(i.message,i):typeof i=="string"?new ze(i,new Error(i)):new ze("Unknown error",i)}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return Ti(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new zt(s.message,s):typeof s=="string"?new zt(s,new Error(s)):new zt("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}listenTronEvent(){if(Bt())return;this.stopListenTronEvent();const e=this._wallet;!e||!e.tron||e.tron.on("accountsChanged",this.onAccountsChanged)}stopListenTronEvent(){if(Bt())return;const e=this._wallet;!e||!e.tron||e.tron.removeListener("accountsChanged",this.onAccountsChanged)}checkAndGetWallet(){return Ti(this,void 0,void 0,function*(){if(this.checkIfOpenApp(),yield this._checkWallet(),!this.connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}checkIfOpenApp(){if(this.config.openAppWithDeeplink!==!1&&hY())throw new gn}checkForWalletReady(){if(this.checkReadyInterval)return;let e=0;const n=Math.floor(this.config.checkTimeout/200),r=()=>{var s,i,o,a;if(Bt()&&(!((s=window.tronWeb)===null||s===void 0)&&s.ready))this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null,this._updateWallet(),this.emit("connect",this.address||"");else if(!((a=(o=(i=this._wallet)===null||i===void 0?void 0:i.tronWeb)===null||o===void 0?void 0:o.defaultAddress)===null||a===void 0)&&a.base58){this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null,this._wallet.ready=!0;const c=this._wallet.tronWeb.defaultAddress.base58,l=c?K.Connected:K.Disconnect;this.setAddress(c),this.setState(l),this.emit("connect",this.address||"")}else e>n?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null):e++};this.checkReadyInterval=setInterval(r,200)}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;if(wt()&&!Bt())return this._checkPromise=new Promise(i=>{const o=setTimeout(()=>{window.removeEventListener(Ch,a),this._updateWallet(),yc()?(this._readyState=_e.Found,i(!0)):(this._readyState=_e.NotFound,i(!1)),this.emit("readyStateChanged",this._readyState)},this.config.checkTimeout),a=c=>{var l,u,d;const{info:f,provider:h}=c.detail;if(f.name==="TokenPocket"){this._wallet={ready:!!(!((u=(l=h.tronWeb)===null||l===void 0?void 0:l.defaultAddress)===null||u===void 0)&&u.base58),tron:h,tronWeb:h.tronWeb},this.listenTronEvent(),this._readyState=_e.Found;const p=((d=this._wallet.tronWeb.defaultAddress)===null||d===void 0?void 0:d.base58)||null,g=p?K.Connected:K.Disconnect;this.setState(g),this.setAddress(p),this.emit("readyStateChanged",this.readyState),window.removeEventListener(Ch,a),clearTimeout(o),i(!0),this.connected||this.checkForWalletReady()}};window.addEventListener(Ch,a),window.dispatchEvent(new Event(wI))}),this._checkPromise;const e=100,n=Math.floor(this.config.checkTimeout/e);let r=0,s;return this._checkPromise=new Promise(i=>{const o=()=>{r++;const a=yc();(a||r>n)&&(s&&clearInterval(s),this._readyState=a?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),i(a))};s=setInterval(o,e),o()}),this._checkPromise}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}function nd(){return!!window.tronLink&&window.isBitKeep}function pY(){if(Bt()&&!nd()){const{origin:t,pathname:e,search:n,hash:r}=window.location,s=t+e+n+r;return location.href=`https://bkcode.vip?action=dapp&url=${encodeURIComponent(s)}`,!0}return!1}var us=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gY="Bitget Wallet";class XQ extends mi{constructor(e={}){super(),this.name=gY,this.url="https://web3.bitget.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMDAxRjI5Ii8+CjxwYXRoIGQ9Ik0yMTkuOTQ4IDk1LjcwMjJDMjAxLjYyMyA5NS42OTI5IDE4My4zMyA5NS42ODM1IDE2NC45NDEgOTUuNzExNkMxNTMuODIyIDk1LjcxMTYgMTQ5LjY1MSAxMDkuNjcxIDE1Ny45MjEgMTE3LjkzOUwyODMuMDk4IDI0My4xMTdDMjg3LjAwNCAyNDYuNjkgMjg5LjQ0MSAyNTAuNTc0IDI4OS41MyAyNTUuNjkzQzI4OS40NDEgMjYwLjgxMiAyODcuMDA0IDI2NC42OTYgMjgzLjA5OCAyNjguMjY5TDE1Ny45MjEgMzkzLjQ0NkMxNDkuNjUxIDQwMS43MTUgMTUzLjgyMiA0MTUuNjc0IDE2NC45NDEgNDE1LjY3NEMxODMuMzMgNDE1LjcwMiAyMDEuNjIzIDQxNS42OTMgMjE5Ljk0OCA0MTUuNjgzQzIyOS4xMjIgNDE1LjY3OSAyMzguMzA1IDQxNS42NzQgMjQ3LjUxMSA0MTUuNjc0QzI1OS41NTUgNDE1LjY3NCAyNjYuNzIgNDA5LjI0IDI3My4xNTQgNDAyLjgwNUwzODYuMDQ3IDI4OS45MTJDMzk1LjA1NyAyODAuOTAyIDQwMy4xMTkgMjY4LjkzOSA0MDMuMDA5IDI1NS42OTNDNDAzLjExOSAyNDIuNDQ3IDM5NS4wNTcgMjMwLjQ4NCAzODYuMDQ3IDIyMS40NzRMMjczLjE1NCAxMDguNThDMjY2LjcyIDEwMi4xNDYgMjU5LjU1NSA5NS43MTE2IDI0Ny41MTEgOTUuNzExNkMyMzguMzA1IDk1LjcxMTYgMjI5LjEyMiA5NS43MDY5IDIxOS45NDggOTUuNzAyMloiIGZpbGw9IiMwMEYwRkYiLz4KPC9zdmc+Cg==",this._readyState=_e.Loading,this._state=K.Loading,this.checkReadyInterval=null,this._checkPromise=null,this._updateWallet=()=>us(this,void 0,void 0,function*(){var i,o,a,c,l,u;let d=this.state,f=this.address;if(nd()){if(Bt()){const h=(i=window.bitkeep)===null||i===void 0?void 0:i.tronLink;this._wallet={tron:h,tronWeb:h==null?void 0:h.tronWeb}}else{const h=(o=window.bitkeep)===null||o===void 0?void 0:o.tronWeb;this._wallet={tron:window.bitkeep.tronLink,tronWeb:h}}f=!((a=this._wallet.tron)===null||a===void 0)&&a.ready?((c=this._wallet.tronWeb.defaultAddress)===null||c===void 0?void 0:c.base58)||null:"",d=!((l=this._wallet.tron)===null||l===void 0)&&l.ready?K.Connected:K.Disconnect,!((u=this._wallet.tron)===null||u===void 0)&&u.ready||this.checkForWalletReady()}else this._wallet=null,f=null,d=K.NotFound;this.setAddress(f),this.setState(d)});const{checkTimeout:n=2*1e3,openUrlWhenWalletNotFound:r=!0,openAppWithDeeplink:s=!0}=e;if(typeof n!="number")throw new Error("[BitKeepAdapter] config.checkTimeout should be a number");if(this.config={checkTimeout:n,openUrlWhenWalletNotFound:r,openAppWithDeeplink:s},this._connecting=!1,this._wallet=null,this._address=null,!wt()){this._readyState=_e.NotFound,this.setState(K.NotFound);return}nd()?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return us(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;try{return yield Ca(e.tronWeb)}catch(n){throw new Aa(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}})}connect(){return us(this,void 0,void 0,function*(){var e,n,r,s;try{if(this.checkIfOpenApp(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.readyState===_e.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;const i=this._wallet;if(!Bt()){if(!i)return;this._connecting=!0;try{const a=yield i.tron.request({method:"tron_requestAccounts"});if((a==null?void 0:a.code)!==200)throw new St((a==null?void 0:a.code)===40001?"The connection request is canceled by user.":a==null?void 0:a.message)}catch(a){throw a instanceof pr?a:new St(a==null?void 0:a.message,a)}}const o=((e=i==null?void 0:i.tronWeb.defaultAddress)===null||e===void 0?void 0:e.base58)||((s=(r=(n=window.bitkeep)===null||n===void 0?void 0:n.tronWeb)===null||r===void 0?void 0:r.defaultAddress)===null||s===void 0?void 0:s.base58)||"";this.setAddress(o),this.setState(K.Connected),this.emit("connect",this.address||"")}catch(i){throw this.emit("error",i),i}finally{this._connecting=!1}})}disconnect(){return us(this,void 0,void 0,function*(){this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return us(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error?new ze(s.message,s):new ze(s,new Error(s))}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return us(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error?new ze(i.message,i):new ze(i,new Error(i))}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return us(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error?new zt(s.message,s):new zt(s,new Error(s))}}catch(r){throw this.emit("error",r),r}})}checkAndGetWallet(){return us(this,void 0,void 0,function*(){if(this.checkIfOpenApp(),yield this._checkWallet(),!this.connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}checkForWalletReady(){if(this.checkReadyInterval)return;let e=0;const n=Math.floor(this.config.checkTimeout/200),r=()=>us(this,void 0,void 0,function*(){var s;this._wallet&&(!((s=this._wallet)===null||s===void 0)&&s.tron.ready)?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null,yield this._updateWallet(),this.emit("connect",this.address||"")):e>n?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null):e++});this.checkReadyInterval=setInterval(r,200)}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;const e=100,n=Math.floor(this.config.checkTimeout/e);let r=0,s;return this._checkPromise=new Promise(i=>{const o=()=>{r++;const a=nd();(a||r>n)&&(s&&clearInterval(s),this._readyState=a?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),i(a))};s=setInterval(o,e),o()}),this._checkPromise}checkIfOpenApp(){if(this.config.openAppWithDeeplink!==!1&&pY())throw new gn}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}function Zf(){return!!(window.okxwallet&&window.okxwallet.tronLink)}function mY(){return typeof window<"u"&&typeof window.navigator<"u"?/OKApp/i.test(window.navigator.userAgent):!1}function wY(){return!mY()&&Bt()?(window.location.href="okx://wallet/dapp/url?dappUrl="+encodeURIComponent(window.location.href),!0):!1}var xi=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const yY="OKX Wallet";class eZ extends mi{constructor(e={}){super(),this.name=yY,this.url="https://okx.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTIzLjU1ODMgMTUuODk2NUgxNi40NDc0QzE2LjE0NTMgMTUuODk2NSAxNS45MDA0IDE2LjE0MTQgMTUuOTAwNCAxNi40NDM1VjIzLjU1NDRDMTUuOTAwNCAyMy44NTY1IDE2LjE0NTMgMjQuMTAxNCAxNi40NDc0IDI0LjEwMTRIMjMuNTU4M0MyMy44NjA0IDI0LjEwMTQgMjQuMTA1MyAyMy44NTY1IDI0LjEwNTMgMjMuNTU0NFYxNi40NDM1QzI0LjEwNTMgMTYuMTQxNCAyMy44NjA0IDE1Ljg5NjUgMjMuNTU4MyAxNS44OTY1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE2LjQ0NzQgMTYuMzk2NUgyMy41NTgzQzIzLjU4NDIgMTYuMzk2NSAyMy42MDUzIDE2LjQxNzUgMjMuNjA1MyAxNi40NDM1VjIzLjU1NDRDMjMuNjA1MyAyMy41ODAzIDIzLjU4NDIgMjMuNjAxNCAyMy41NTgzIDIzLjYwMTRIMTYuNDQ3NEMxNi40MjE0IDIzLjYwMTQgMTYuNDAwNCAyMy41ODAzIDE2LjQwMDQgMjMuNTU0NFYxNi40NDM1QzE2LjQwMDQgMTYuNDE3NSAxNi40MjE0IDE2LjM5NjUgMTYuNDQ3NCAxNi4zOTY1WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTE1LjM1MDMgNy42OTE0MUg4LjIzOTM3QzcuOTM3MjggNy42OTE0MSA3LjY5MjM4IDcuOTM2MyA3LjY5MjM4IDguMjM4NFYxNS4zNDkzQzcuNjkyMzggMTUuNjUxNCA3LjkzNzI4IDE1Ljg5NjMgOC4yMzkzNyAxNS44OTYzSDE1LjM1MDNDMTUuNjUyMyAxNS44OTYzIDE1Ljg5NzIgMTUuNjUxNCAxNS44OTcyIDE1LjM0OTNWOC4yMzg0QzE1Ljg5NzIgNy45MzYzIDE1LjY1MjMgNy42OTE0MSAxNS4zNTAzIDcuNjkxNDFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOC4yMzkzNyA4LjE5MTQxSDE1LjM1MDNDMTUuMzc2MiA4LjE5MTQxIDE1LjM5NzIgOC4yMTI0NSAxNS4zOTcyIDguMjM4NFYxNS4zNDkzQzE1LjM5NzIgMTUuMzc1MiAxNS4zNzYyIDE1LjM5NjMgMTUuMzUwMyAxNS4zOTYzSDguMjM5MzdDOC4yMTM0MiAxNS4zOTYzIDguMTkyMzggMTUuMzc1MiA4LjE5MjM4IDE1LjM0OTNWOC4yMzg0QzguMTkyMzggOC4yMTI0NCA4LjIxMzQyIDguMTkxNDEgOC4yMzkzNyA4LjE5MTQxWiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTMxLjc2MDQgNy42OTE0MUgyNC42NDk1QzI0LjM0NzQgNy42OTE0MSAyNC4xMDI1IDcuOTM2MyAyNC4xMDI1IDguMjM4NFYxNS4zNDkzQzI0LjEwMjUgMTUuNjUxNCAyNC4zNDc0IDE1Ljg5NjMgMjQuNjQ5NSAxNS44OTYzSDMxLjc2MDRDMzIuMDYyNSAxNS44OTYzIDMyLjMwNzQgMTUuNjUxNCAzMi4zMDc0IDE1LjM0OTNWOC4yMzg0QzMyLjMwNzQgNy45MzYzIDMyLjA2MjUgNy42OTE0MSAzMS43NjA0IDcuNjkxNDFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjQuNjQ5NSA4LjE5MTQxSDMxLjc2MDRDMzEuNzg2NCA4LjE5MTQxIDMxLjgwNzQgOC4yMTI0NSAzMS44MDc0IDguMjM4NFYxNS4zNDkzQzMxLjgwNzQgMTUuMzc1MiAzMS43ODY0IDE1LjM5NjMgMzEuNzYwNCAxNS4zOTYzSDI0LjY0OTVDMjQuNjIzNiAxNS4zOTYzIDI0LjYwMjUgMTUuMzc1MiAyNC42MDI1IDE1LjM0OTNWOC4yMzg0QzI0LjYwMjUgOC4yMTI0NCAyNC42MjM2IDguMTkxNDEgMjQuNjQ5NSA4LjE5MTQxWiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTE1LjM1MDMgMjQuMDk5Nkg4LjIzOTM3QzcuOTM3MjggMjQuMDk5NiA3LjY5MjM4IDI0LjM0NDUgNy42OTIzOCAyNC42NDY2VjMxLjc1NzVDNy42OTIzOCAzMi4wNTk2IDcuOTM3MjggMzIuMzA0NSA4LjIzOTM3IDMyLjMwNDVIMTUuMzUwM0MxNS42NTI0IDMyLjMwNDUgMTUuODk3MyAzMi4wNTk2IDE1Ljg5NzMgMzEuNzU3NVYyNC42NDY2QzE1Ljg5NzMgMjQuMzQ0NSAxNS42NTI0IDI0LjA5OTYgMTUuMzUwMyAyNC4wOTk2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTguMjM5MzcgMjQuNTk5NkgxNS4zNTAzQzE1LjM3NjIgMjQuNTk5NiAxNS4zOTczIDI0LjYyMDYgMTUuMzk3MyAyNC42NDY2VjMxLjc1NzVDMTUuMzk3MyAzMS43ODM0IDE1LjM3NjIgMzEuODA0NSAxNS4zNTAzIDMxLjgwNDVIOC4yMzkzN0M4LjIxMzQyIDMxLjgwNDUgOC4xOTIzOCAzMS43ODM0IDguMTkyMzggMzEuNzU3NVYyNC42NDY2QzguMTkyMzggMjQuNjIwNiA4LjIxMzQyIDI0LjU5OTYgOC4yMzkzNyAyNC41OTk2WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPHBhdGggZD0iTTMxLjc2MDQgMjQuMDk5NkgyNC42NDk1QzI0LjM0NzQgMjQuMDk5NiAyNC4xMDI1IDI0LjM0NDUgMjQuMTAyNSAyNC42NDY2VjMxLjc1NzVDMjQuMTAyNSAzMi4wNTk2IDI0LjM0NzQgMzIuMzA0NSAyNC42NDk1IDMyLjMwNDVIMzEuNzYwNEMzMi4wNjI1IDMyLjMwNDUgMzIuMzA3NCAzMi4wNTk2IDMyLjMwNzQgMzEuNzU3NVYyNC42NDY2QzMyLjMwNzQgMjQuMzQ0NSAzMi4wNjI1IDI0LjA5OTYgMzEuNzYwNCAyNC4wOTk2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI0LjY0OTUgMjQuNTk5NkgzMS43NjA0QzMxLjc4NjQgMjQuNTk5NiAzMS44MDc0IDI0LjYyMDYgMzEuODA3NCAyNC42NDY2VjMxLjc1NzVDMzEuODA3NCAzMS43ODM0IDMxLjc4NjQgMzEuODA0NSAzMS43NjA0IDMxLjgwNDVIMjQuNjQ5NUMyNC42MjM2IDMxLjgwNDUgMjQuNjAyNSAzMS43ODM0IDI0LjYwMjUgMzEuNzU3NVYyNC42NDY2QzI0LjYwMjUgMjQuNjIwNiAyNC42MjM2IDI0LjU5OTYgMjQuNjQ5NSAyNC41OTk2WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuMTUiLz4KPC9zdmc+Cg==",this._readyState=wt()?_e.Loading:_e.NotFound,this._state=K.Loading,this.messageHandler=i=>{var o,a,c;const l=(o=i.data)===null||o===void 0?void 0:o.message;if(l)if(l.action==="accountsChanged")setTimeout(()=>{var u;const d=this.address||"";if(!((u=this._wallet)===null||u===void 0)&&u.ready){const h=l.data.address;this.setAddress(h),this.setState(K.Connected)}else this.setAddress(null),this.setState(K.Disconnect);(this.address||"")!==d&&this.emit("accountsChanged",this.address||"",d),!d&&this.address?this.emit("connect",this.address):d&&!this.address&&this.emit("disconnect")},200);else if(l.action==="connect"){const u=this.connected,d=this.address||"",f=((c=(a=this._wallet.tronWeb)===null||a===void 0?void 0:a.defaultAddress)===null||c===void 0?void 0:c.base58)||"";this.setAddress(f),this.setState(K.Connected),u?f!==d&&this.emit("accountsChanged",this.address||"",d):this.emit("connect",f)}else l.action==="disconnect"&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))},this._checkPromise=null,this._updateWallet=()=>{var i,o;let a=this.state,c=this.address;Zf()?(this._wallet=window.okxwallet.tronLink,this._listenEvent(),c=((o=(i=this._wallet.tronWeb)===null||i===void 0?void 0:i.defaultAddress)===null||o===void 0?void 0:o.base58)||null,a=this._wallet.ready?K.Connected:K.Disconnect):(this._wallet=null,c=null,a=K.NotFound),this.setAddress(c),this.setState(a)};const{checkTimeout:n=2*1e3,openUrlWhenWalletNotFound:r=!0,openAppWithDeeplink:s=!0}=e;if(typeof n!="number")throw new Error("[OkxWalletAdapter] config.checkTimeout should be a number");if(this.config={checkTimeout:n,openAppWithDeeplink:s,openUrlWhenWalletNotFound:r},this._connecting=!1,this._wallet=null,this._address=null,!wt()){this._readyState=_e.NotFound,this.setState(K.NotFound);return}Zf()?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return xi(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;try{return yield Ca(e.tronWeb)}catch(n){throw new Aa(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}})}connect(){return xi(this,void 0,void 0,function*(){var e;try{if(this.checkIfOpenOkxWallet(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.state===K.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;if(!this._wallet)return;this._connecting=!0;const n=this._wallet;try{const s=yield n.request({method:"tron_requestAccounts"});if(!s)throw new St("Request connect error.");if(s.code===4e3)throw new St("The same DApp has already initiated a request to connect to OkxWallet, and the pop-up window has not been closed.");if(s.code===4001)throw new St("The user rejected connection.")}catch(s){throw new St(s==null?void 0:s.message,s)}const r=((e=n.tronWeb.defaultAddress)===null||e===void 0?void 0:e.base58)||"";this.setAddress(r),this.setState(K.Connected),this._listenEvent(),this.connected&&this.emit("connect",this.address||"")}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}})}disconnect(){return xi(this,void 0,void 0,function*(){this._stopListenEvent(),this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return xi(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new ze(s.message,s):typeof s=="string"?new ze(s,new Error(s)):new ze("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return xi(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error||typeof i=="object"&&i.message?new ze(i.message,i):typeof i=="string"?new ze(i,new Error(i)):new ze("Unknown error",i)}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return xi(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new zt(s.message,s):typeof s=="string"?new zt(s,new Error(s)):new zt("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}checkAndGetWallet(){return xi(this,void 0,void 0,function*(){if(this.checkIfOpenOkxWallet(),yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}_listenEvent(){this._stopListenEvent(),window.addEventListener("message",this.messageHandler)}_stopListenEvent(){window.removeEventListener("message",this.messageHandler)}checkIfOpenOkxWallet(){if(this.config.openAppWithDeeplink!==!1&&wY())throw new gn}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;const e=100,n=Math.floor(this.config.checkTimeout/e);let r=0,s;return this._checkPromise=new Promise(i=>{const o=()=>{r++;const a=Zf();(a||r>n)&&(s&&clearInterval(s),this._readyState=a?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),i(a))};s=setInterval(o,e),o()}),this._checkPromise}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}function rd(){return!!window.imToken&&!!window.tronWeb}function bY(){if(Bt()&&!rd()){const{origin:t,pathname:e,search:n,hash:r}=window.location,s=t+e+n+r;return location.href=`imtokenv2://navigate/DappView?url=${encodeURIComponent(s)}`,!0}return!1}var ds=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const vY="imToken Wallet";class tZ extends mi{constructor(e={}){super(),this.name=vY,this.url="https://token.im/",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEzIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMyA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF84OTNfMjU5OSkiPgo8bWFzayBpZD0ibWFzazBfODkzXzI1OTkiIHN0eWxlPSJtYXNrLXR5cGU6bHVtaW5hbmNlIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTEzIiBoZWlnaHQ9IjUxMiI+CjxwYXRoIGQ9Ik01MTIuMzE5IDBIMC4zMTkzMzZWNTEySDUxMi4zMTlWMFoiIGZpbGw9IndoaXRlIi8+CjwvbWFzaz4KPGcgbWFzaz0idXJsKCNtYXNrMF84OTNfMjU5OSkiPgo8cGF0aCBkPSJNMzk3Ljc0NiAwSDExNS43NDZDNTIuMjMzMyAwIDAuNzQ2MDk0IDUxLjQ4NzMgMC43NDYwOTQgMTE1VjM5N0MwLjc0NjA5NCA0NjAuNTEzIDUyLjIzMzMgNTEyIDExNS43NDYgNTEySDM5Ny43NDZDNDYxLjI1OSA1MTIgNTEyLjc0NiA0NjAuNTEzIDUxMi43NDYgMzk3VjExNUM1MTIuNzQ2IDUxLjQ4NzMgNDYxLjI1OSAwIDM5Ny43NDYgMFoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl84OTNfMjU5OSkiLz4KPHBhdGggZD0iTTQxNy40MzYgMTU4LjI5MUM0MjguMDg0IDMwMi41MDcgMzM1LjM4MiAzNzAuNjcgMjUyLjI3NyAzNzcuOTM5QzE3NS4wMTQgMzg0LjY5NiAxMDIuMjg3IDMzNy4yMjEgOTUuOTA2NyAyNjQuMjc5QzkwLjY0MzYgMjA0LjAxNyAxMjcuODg5IDE3OC4zNjEgMTU3LjE1MiAxNzUuODA0QzE4Ny4yNDkgMTczLjE2NSAyMTIuNTQyIDE5My45MjEgMjE0LjczNiAyMTkuMDUyQzIxNi44NDkgMjQzLjIxMyAyMDEuNzczIDI1NC4yMTEgMTkxLjI4OCAyNTUuMTI2QzE4Mi45OTYgMjU1Ljg1MyAxNzIuNTY0IDI1MC44MTkgMTcxLjYyMiAyNDAuMDFDMTcwLjgxNCAyMzAuNzIyIDE3NC4zNDEgMjI5LjQ1NyAxNzMuNDc5IDIxOS41OUMxNzEuOTQ1IDIwMi4wMjQgMTU2LjYyNyAxOTkuOTc4IDE0OC4yNDEgMjAwLjcwNUMxMzguMDkyIDIwMS41OTQgMTE5LjY3OCAyMTMuNDM5IDEyMi4yNjIgMjQyLjk0NEMxMjQuODYgMjcyLjcwNSAxNTMuMzk2IDI5Ni4yMjEgMTkwLjgwMyAyOTIuOTVDMjMxLjE3MSAyODkuNDIzIDI1OS4yNzYgMjU3Ljk5MyAyNjEuMzkgMjEzLjkxQzI2MS4zNyAyMTEuNTc1IDI2MS44NjIgMjA5LjI2NCAyNjIuODMgMjA3LjEzOUwyNjIuODQzIDIwNy4wODZDMjYzLjI3OCAyMDYuMTYyIDI2My43ODcgMjA1LjI3NSAyNjQuMzY0IDIwNC40MzRDMjY1LjIyNiAyMDMuMTQyIDI2Ni4zMyAyMDEuNzE1IDI2Ny43NTYgMjAwLjE1M0MyNjcuNzcgMjAwLjExMyAyNjcuNzcgMjAwLjExMyAyNjcuNzk3IDIwMC4xMTNDMjY4LjgzMyAxOTguOTQyIDI3MC4wODUgMTk3LjY3NyAyNzEuNDk4IDE5Ni4zMTdDMjg5LjEzMiAxNzkuNjggMzUyLjYzOCAxNDAuNDQzIDQxMi42OTggMTUyLjg2N0M0MTMuOTY4IDE1My4xMzkgNDE1LjExNSAxNTMuODE0IDQxNS45NjkgMTU0Ljc5MkM0MTYuODIzIDE1NS43NyA0MTcuMzM3IDE1Ni45OTcgNDE3LjQzNiAxNTguMjkxWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfODkzXzI1OTkiIHgxPSI1MTIuNDQiIHkxPSI4Ni41MTkiIHgyPSIxOC4wMjE5IiB5Mj0iMjc5LjUwMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMENDNUZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwN0ZGRiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzg5M18yNTk5Ij4KPHJlY3Qgd2lkdGg9IjUxMyIgaGVpZ2h0PSI1MTIiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",this._readyState=_e.Loading,this._state=K.Loading,this.checkReadyInterval=null,this._checkPromise=null,this._updateWallet=()=>ds(this,void 0,void 0,function*(){var i,o;let a=this.state,c=this.address;rd()?(this._wallet={ready:((i=window.tronWeb)===null||i===void 0?void 0:i.ready)||!1,tronWeb:window.tronWeb,request:()=>Promise.resolve(null)},c=((o=this._wallet.tronWeb.defaultAddress)===null||o===void 0?void 0:o.base58)||null,a=this._wallet.ready?K.Connected:K.Disconnect,this._wallet.ready||this.checkForWalletReady()):(this._wallet=null,c=null,a=K.NotFound),this.setAddress(c),this.setState(a)});const{checkTimeout:n=2*1e3,openUrlWhenWalletNotFound:r=!0,openAppWithDeeplink:s=!0}=e;if(typeof n!="number")throw new Error("[ImTokenAdapter] config.checkTimeout should be a number");if(this.config={checkTimeout:n,openUrlWhenWalletNotFound:r,openAppWithDeeplink:s},this._connecting=!1,this._wallet=null,this._address=null,!wt()){this._readyState=_e.NotFound,this.setState(K.NotFound);return}rd()?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return ds(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;try{return yield Ca(e.tronWeb)}catch(n){throw new Aa(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}})}connect(){return ds(this,void 0,void 0,function*(){var e;try{if(this.checkIfOpenApp(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.readyState===_e.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;const r=((e=this._wallet.tronWeb.defaultAddress)===null||e===void 0?void 0:e.base58)||"";this.setAddress(r),this.setState(K.Connected),this.emit("connect",this.address||"")}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}})}disconnect(){return ds(this,void 0,void 0,function*(){this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return ds(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new ze(s.message,s):typeof s=="string"?new ze(s,new Error(s)):new ze("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return ds(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error||typeof i=="object"&&i.message?new ze(i.message,i):typeof i=="string"?new ze(i,new Error(i)):new ze("Unknown error",i)}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return ds(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new zt(s.message,s):typeof s=="string"?new zt(s,new Error(s)):new zt("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}checkAndGetWallet(){return ds(this,void 0,void 0,function*(){if(this.checkIfOpenApp(),yield this._checkWallet(),!this.connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}checkForWalletReady(){if(this.checkReadyInterval)return;let e=0;const n=Math.floor(this.config.checkTimeout/200),r=()=>ds(this,void 0,void 0,function*(){this._wallet&&this._wallet.ready?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null,yield this._updateWallet(),this.emit("connect",this.address||"")):e>n?(this.checkReadyInterval&&clearInterval(this.checkReadyInterval),this.checkReadyInterval=null):e++});this.checkReadyInterval=setInterval(r,200)}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;const e=100,n=Math.floor(this.config.checkTimeout/e);let r=0,s;return this._checkPromise=new Promise(i=>{const o=()=>{r++;const a=rd();(a||r>n)&&(s&&clearInterval(s),this._readyState=a?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),i(a))};s=setInterval(o,e),o()}),this._checkPromise}checkIfOpenApp(){if(this.config.openAppWithDeeplink!==!1&&bY())throw new gn}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}function Jf(){return typeof window<"u"&&!!(window.trustwallet&&window.trustwallet.tronLink)}const EY=function(){return typeof window<"u"&&typeof window.navigator<"u"?/Trust/i.test(window.navigator.userAgent):!1};function _Y(){return!EY()&&Bt()?(window.location.href="https://link.trustwallet.com/open_url?url="+encodeURIComponent(window.location.href),!0):!1}var Oi=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const AY="Trust";class nZ extends mi{constructor(e={}){super(),this.name=AY,this.url="https://trustwallet.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K",this._readyState=wt()?_e.Loading:_e.NotFound,this._state=K.Loading,this.messageHandler=i=>{var o,a,c;const l=(o=i.data)===null||o===void 0?void 0:o.message;if(l)if(l.action==="accountsChanged")setTimeout(()=>{var u;const d=this.address||"";if(!((u=this._wallet)===null||u===void 0)&&u.ready){const h=l.data.address;this.setAddress(h),this.setState(K.Connected)}else this.setAddress(null),this.setState(K.Disconnect);(this.address||"")!==d&&this.emit("accountsChanged",this.address||"",d),!d&&this.address?this.emit("connect",this.address):d&&!this.address&&this.emit("disconnect")},200);else if(l.action==="connect"){const u=this.connected,d=this.address||"",f=((c=(a=this._wallet.tronWeb)===null||a===void 0?void 0:a.defaultAddress)===null||c===void 0?void 0:c.base58)||"";this.setAddress(f),this.setState(K.Connected),u?f!==d&&this.emit("accountsChanged",this.address||"",d):this.emit("connect",f)}else l.action==="disconnect"&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))},this._checkPromise=null,this._updateWallet=()=>{var i,o;let a=this.state,c=this.address;Jf()?(this._wallet=window.trustwallet.tronLink,this._listenEvent(),c=((o=(i=this._wallet.tronWeb)===null||i===void 0?void 0:i.defaultAddress)===null||o===void 0?void 0:o.base58)||null,a=this._wallet.ready?K.Connected:K.Disconnect):(this._wallet=null,c=null,a=K.NotFound),this.setAddress(c),this.setState(a)};const{checkTimeout:n=2*1e3,openUrlWhenWalletNotFound:r=!0,openAppWithDeeplink:s=!0}=e;if(typeof n!="number")throw new Error("[TrustAdapter] config.checkTimeout should be a number");if(this.config={checkTimeout:n,openAppWithDeeplink:s,openUrlWhenWalletNotFound:r},this._connecting=!1,this._wallet=null,this._address=null,!wt()){this._readyState=_e.NotFound,this.setState(K.NotFound);return}Jf()?(this._readyState=_e.Found,this._updateWallet()):this._checkWallet().then(()=>{this.connected&&this.emit("connect",this.address||"")})}get address(){return this._address}get state(){return this._state}get readyState(){return this._readyState}get connecting(){return this._connecting}network(){return Oi(this,void 0,void 0,function*(){try{if(yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;try{return yield Ca(e.tronWeb)}catch(n){throw new Aa(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}})}connect(){return Oi(this,void 0,void 0,function*(){var e;try{if(this.checkIfopenTrustWallet(),this.connected||this.connecting)return;if(yield this._checkWallet(),this.state===K.NotFound)throw this.config.openUrlWhenWalletNotFound!==!1&&wt()&&window.open(this.url,"_blank"),new gn;if(!this._wallet)return;this._connecting=!0;const n=this._wallet;try{const s=yield n.request({method:"tron_requestAccounts"});if(!s)throw new St("Request connect error.");if(s.code===4e3)throw new St("The same DApp has already initiated a request to connect to trustwallet, and the pop-up window has not been closed.");if(s.code===4001)throw new St("The user rejected connection.")}catch(s){throw new St(s==null?void 0:s.message,s)}const r=((e=n.tronWeb.defaultAddress)===null||e===void 0?void 0:e.base58)||"";this.setAddress(r),this.setState(K.Connected),this._listenEvent(),this.connected&&this.emit("connect",this.address||"")}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}})}disconnect(){return Oi(this,void 0,void 0,function*(){this._stopListenEvent(),this.state===K.Connected&&(this.setAddress(null),this.setState(K.Disconnect),this.emit("disconnect"))})}signTransaction(e,n){return Oi(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.sign(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new ze(s.message,s):typeof s=="string"?new ze(s,new Error(s)):new ze("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}multiSign(e,n,r){return Oi(this,void 0,void 0,function*(){try{const s=yield this.checkAndGetWallet();try{return yield s.tronWeb.trx.multiSign(e,n,r)}catch(i){throw i instanceof Error||typeof i=="object"&&i.message?new ze(i.message,i):typeof i=="string"?new ze(i,new Error(i)):new ze("Unknown error",i)}}catch(s){throw this.emit("error",s),s}})}signMessage(e,n){return Oi(this,void 0,void 0,function*(){try{const r=yield this.checkAndGetWallet();try{return yield r.tronWeb.trx.signMessageV2(e,n)}catch(s){throw s instanceof Error||typeof s=="object"&&s.message?new zt(s.message,s):typeof s=="string"?new zt(s,new Error(s)):new zt("Unknown error",s)}}catch(r){throw this.emit("error",r),r}})}checkAndGetWallet(){return Oi(this,void 0,void 0,function*(){if(this.checkIfopenTrustWallet(),yield this._checkWallet(),this.state!==K.Connected)throw new nt;const e=this._wallet;if(!e||!e.tronWeb)throw new nt;return e})}_listenEvent(){this._stopListenEvent(),window.addEventListener("message",this.messageHandler)}_stopListenEvent(){window.removeEventListener("message",this.messageHandler)}checkIfopenTrustWallet(){if(this.config.openAppWithDeeplink!==!1&&_Y())throw new gn}_checkWallet(){if(this.readyState===_e.Found)return Promise.resolve(!0);if(this._checkPromise)return this._checkPromise;const e=100,n=Math.floor(this.config.checkTimeout/e);let r=0,s;return this._checkPromise=new Promise(i=>{const o=()=>{r++;const a=Jf();(a||r>n)&&(s&&clearInterval(s),this._readyState=a?_e.Found:_e.NotFound,this._updateWallet(),this.emit("readyStateChanged",this.readyState),i(a))};s=setInterval(o,e),o()}),this._checkPromise}setAddress(e){this._address=e}setState(e){const n=this.state;e!==n&&(this._state=e,this.emit("stateChanged",e))}}export{Tt as $,hE as A,Ct as B,N as C,kY as D,jt as E,cn as F,vs as G,vc as H,DY as I,$u as J,zb as K,Xm as L,Le as M,It as N,G as O,l1 as P,hg as Q,fe as R,ft as S,RY as T,Fb as U,pn as V,yt as W,it as X,hN as Y,Xe as Z,hn as _,Ju as a,_t as a0,Ce as a1,OY as a2,kQ as a3,Cr as a4,OQ as a5,be as a6,qQ as a7,ur as a8,ip as a9,Qe as aa,Qv as ab,SY as ac,TY as ad,II as ae,JQ as af,XQ as ag,eZ as ah,nZ as ai,tZ as aj,ZQ as ak,QQ as al,NY as am,xY as an,Qu as ao,id as ap,Ln as aq,dg as ar,Ho as as,KN as at,aE as au,dc as av,we as aw,UQ as b,YQ as c,PY as d,GQ as e,$z as f,KQ as g,H as h,ri as i,oe as j,On as k,Bn as l,de as m,Ue as n,X as o,Q as p,Kn as q,VQ as r,ye as s,ve as t,ma as u,ne as v,Gn as w,LQ as x,$e as y,Uz as z};
